<?xml version="1.0" encoding="UTF-8"?><XI3uWnd navtype="tab" debug="1" bgx="bg_gfcolors:2|4|2,0x7dafff|0x0,0xccbadb|0x64,0xccaadb|0x6464,ccaadb|0x6400,0x102,302" Title="中药智能调剂发药系统" icons="http://3ucs.com/biz/theme/delight-vtiger/vtiger/style.css">
	
	<webconfig theme="../biz/theme/delight-vtiger/theme.html"/>
	<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\general.xml" name="general">
<Lang name="bottleid" value="药瓶"/>
<Lang name="ttp_bottleid" value=""/>
<Lang name="medicineid" value="药品"/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="opera" value="操作者"/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="uptime" value="更新时间"/>
<Lang name="weight_cur" value="当前重量"/>
<Lang name="ttp_weight_cur" value="当前重量"/>
<Lang name="uses_flag" value="使用状态"/>
<Lang name="ttp_uses_flag" value="使用状态"/>
<Lang name="bottleno" value="瓶号"/>
<Lang name="ttp_bottleno" value="瓶号"/>
<Lang name="medicineno" value="药码"/>
<Lang name="ttp_medicineno" value="药码"/>
<Lang name="dispensary" value="药房"/>
<Lang name="dispensaryid" value="药房"/>
<Lang name="instock" value="入库"/>
<Lang name="upcabinet" value="上柜"/>
<Lang name="issue" value="发药"/>
<Lang name="prepare" value="准备发药"/>
<Lang name="cabinet_pick" value="取药"/>
<Lang name="equipment_weight1" value="上机称重"/>
<Lang name="equipment_pos" value="上机"/>
<Lang name="equipment_issue" value="上机发药"/>
<Lang name="equipment_weight2" value="下机称重"/>
<Lang name="cabinet_back" value="回柜"/>
<Lang name="statusname" value="状态"/>
<Lang name="ind_shangdai" value="上袋指令"/>
<Lang name="return_finish" value="检测完成状态"/>
<Lang name="statusname" value="状态"/>
<Lang name="ind_shangdai" value="上袋指令"/>
<Lang name="ind_startstop" value="启动/停止"/>
<Lang name="return_finish" value="检测完成状态"/>
<Lang name="ind_fengdai" value="封袋指令"/>
<Lang name="light" value="亮灯指示"/>
<Lang name="check" value="核验"/>
<Lang name="icon_bottle_loc_cabinet_V" value="fas fa-braille"/>
<Lang name="icon_medication_v" value="fas fa-book-medical"/>
<Lang name="icon_bottle_transaction_v" value="fas fa-prescription-bottle"/>
<Lang name="icon_medi_trans_v" value="fas fa-book-medical"/>
<Lang name="icon_bottle_info_v" value="fas fa-prescription-bottle-alt"/>
<Lang name="icon_medicine_info_v" value="fas fa-file-alt"/>
<Lang name="icon_hospital_v" value="fas fa-file-medical"/>
<Lang name="icon_dispensary_v" value="fas fa-clinic-medical"/>
<Lang name="icon_stockbaseinfo_v" value="fas fa-store"/>
<Lang name="icon_equipment_v" value="fab fa-creative-commons-remix"/>
<Lang name="icon_cabinet_v" value="far fa-building"/>
<Lang name="icon_users_v" value="fas fa-hospital-user"/>
<Lang name="icon_user_role_v" value="fas fa-user-cog"/>
<Lang name="icon_department_v" value="far fa-object-group"/>
<Lang name="icon_addone" value="fas fa-plus"/>
<Lang name="icon_reset" value="fas fa-eraser"/>
<Lang name="icon_search" value="fas fa-search"/>
<Lang name="icon_create" value="fas fa-save"/>lni-add-files fa-file-medical  
<Lang name="icon_modify" value="fas fa-edit"/>fa
<Lang name="icon_go2Page" value="fas fa-directions"/>
<Lang name="icon_initial" value="fab fa-first-order"/>
<Lang name="icon_firstpage" value="fas fa-step-backward"/>
<Lang name="icon_prepage" value="fas fa-angle-double-left"/>
<Lang name="icon_nextpage" value="fas fa-angle-double-right"/>
<Lang name="icon_endpage" value="fas fa-step-forward"/>
<Lang name="icon_delete" value="fas fa-times"/>
<Lang name="icon_light" value="far fa-lightbulb"/>
<Lang name="responsible" value="责任工程师"/>
<Lang name="accountname" value="客户"/>
<Lang name="imagename" value="图片"/>
<Lang name="projectmilestonename" value="项目阶段"/>
<Lang name="operation" value="操作"/>
<Lang name="create" value="新增"/>
<Lang name="modify" value="修改"/>
<Lang name="reset" value="复位"/>
<Lang name="delete" value="删除"/>
<Lang name="refresh" value="刷新"/>
<Lang name="firstpage" value="首页"/>
<Lang name="prepage" value="上页"/>
<Lang name="nextpage" value="下页"/>
<Lang name="operator" value="操作"/>
<Lang name="search" value="搜索"/>
<Lang name="initial" value="初始"/>
<Lang name="addone" value="添加"/>
<Lang name="ttp_addone" value="打开新建页面添加新项目"/>
<Lang name="records" value="记录数"/>
<Lang name="ttp_records" value="记录数"/>
<Lang name="ttp_pgs" value="总页数"/>
<Lang name="ttp_pgcur" value="当前页"/>
<Lang name="go2page" value="跳转"/>
<Lang name="created_by" value="创建人"/>
<Lang name="creation_date" value="创建时间"/>
<Lang name="last_update_by" value="修改人"/>
<Lang name="last_update_date" value="修改时间"/>
<Lang name="presence" value="显示"/>
<Lang name="locationmap" value="地图显示"/>
<Lang name="address" value="地址"/>
<Lang name="picklist_valueid" value="选取值"/>
<Lang name="sortorderid" value="显示顺序"/>
<Lang name="contact" value="联系人"/>
<Lang name="basic" value="基本"/>
<Lang name="phone" value="电话"/>
<Lang name="mobile" value="手机"/>
<Lang name="initiate" value="启动"/>
<Lang name="complete" value="完成"/>
<Lang name="completetask" value="任务完成"/>
<Lang name="archive" value="归档"/>
<Lang name="cancel" value="取消"/>
<Lang name="import" value="导入"/>
<Lang name="export" value="导出"/>
<Lang name="view" value="查看"/>
<Lang name="download" value="下载"/>
<Lang name="submit" value="提交"/>
<Lang name="approval_diagram" value="审批流图"/>
<Lang name="modify" value="修改"/>
<Lang name="save" value="保存"/>
<Lang name="sendfile" value="发送文件"/>
<Lang name="success" value="成功"/>
<Lang name="description" value="说明"/>
<Lang name="ttp_description" value=""/>
<Lang name="taskprogress" value="任务处理"/>
<Lang name="attachment2" value="任务跟踪"/>
<Lang name="attachments" value="附件"/>
<Lang name="SetResponsible" value="设置责任人"/>
</Language>	
	<WndTaps>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_Vm.xml" Text="bottle_loc_cabinet_v" Name="bottle_loc_cabinet_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_Ve.xml" Text="bottle_loc_cabinet" Name="bottle_loc_cabinet" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="bottleid[bottleid],cabinetid[cabinetid]"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\bottle_loc_cabinet.xml" name="bottle_loc_cabinet">
<Lang name="bottle_loc_cabinet" value="药柜药品信息"/>
<Lang name="bottle_loc_cabinet_v" value="药柜药品信息"/>
<Lang name="TabEditbottle_loc_cabinet" value="bottle_loc_cabinet Edit"/>
<Lang name="TabViewbottle_loc_cabinet" value="bottle_loc_cabinet View"/>
<Lang name="bottleid" value="药瓶"/>
<Lang name="ttp_bottleid" value="药瓶"/>
<Lang name="bottleno" value="药瓶编码"/>
<Lang name="ttp_bottleno" value="药瓶编码"/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value="药柜"/>
<Lang name="cellid" value="药柜柜格"/>
<Lang name="ttp_cellid" value="药柜柜格"/>
<Lang name="locationid" value=""/>
<Lang name="ttp_locationid" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="ttp_operationbottle_loc_cabinet" value=""/>
<Lang name="ttp_createbottle_loc_cabinet" value=""/>
<Lang name="ttp_modifybottle_loc_cabinet" value=""/>
<Lang name="ttp_resetbottle_loc_cabinet" value=""/>
<Lang name="ttp_deletebottle_loc_cabinet" value=""/>
<Lang name="ttp_refreshbottle_loc_cabinet" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="bottle_loc_cabinet" Name="GBbottle_loc_cabinet" id="bottle_loc_cabinet" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_GBDEDIT.xml" Name="GBDEDITbottle_loc_cabinet"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" Name="lb_bottleid" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottleid" Name="bottleid" Size="170,20">
	<DbDetails>
<Index>bottleid</Index>
<DbTable>his.bottle_info</DbTable>
<Data>bottleno,medicineid,bottleid</Data>
<Where/>
<queryFormat/></DbDetails><OnEnChange><submit next="medicineid"/></OnEnChange></TextBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="170,20">
	<DbDetails fcsm="true">
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineno,medicineid</Data>
<Where>medicineid='%{bottleid[medicineid]}'</Where>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_medicineno" Visible="false"><Ctrls>
<Label Align="Right" Text="medicineno" overlap="pre" Name="lb_medicineno" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" overlap="pre" Name="medicineno" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetid"><Ctrls>
<Label Align="Right" Text="cabinetid" onload="init" Name="lb_cabinetid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_cabinetid" onload="init" Name="cabinetid" Size="150,100">
	<DbDetails>
<Index>cabinetid</Index>
<DbTable>his.cabinet</DbTable>
<Data>cabinetname,cabinetno,cabinetid</Data>
<Where/>
<queryFormat/></DbDetails><OnSelEndOk><submit next="cellid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshcabinetid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="cabinetid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cellid"><Ctrls>
<Label Align="Right" Text="cellid" Name="lb_cellid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_cellid" Name="cellid" Size="150,100">
	<DbDetails>
<Index>cellid</Index>
<DbTable>his.cabinet_cell</DbTable>
<Data>concat(cell_row,'-',cell_col),op_idx,power(2,op_code) op_code,cellid</Data>
<Where>cabinetid='%{cabinetid[cabinetid]}'</Where>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshcellid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="cellid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_locationid" Visible="false"><Ctrls>
<Label Align="Right" Text="locationid" overlap="pre" Name="lb_locationid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_locationid" overlap="pre" Name="locationid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{locationid}'"><SetVisible name="insertbottle_loc_cabinet" Visible="0"/><SetVisible name="modifybottle_loc_cabinet" Visible="1"/><else/><SetVisible name="insertbottle_loc_cabinet" Visible="1"/><SetVisible name="modifybottle_loc_cabinet" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEbottle_loc_cabinet" Size="100,100"><Ctrls>
<Button sqlpkinsert="locationid" Text="create" ToolTip="ttp_createbottle_loc_cabinet" Name="insertbottle_loc_cabinet" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.bottle_loc_cabinet</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleid[bottleid],medicineid[medicineid],medicineno,cabinetid[cabinetid],cellid[cellid]</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertbottle_loc_cabinet[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_loc_cabinetLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_loc_cabinet_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifybottle_loc_cabinet" Name="modifybottle_loc_cabinet" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.bottle_loc_cabinet</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleid[bottleid],medicineid[medicineid],medicineno,cabinetid[cabinetid],cellid[cellid]</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<Where>locationid='%{locationid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifybottle_loc_cabinet[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_loc_cabinetLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_loc_cabinet_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetbottle_loc_cabinet" Name="resetbottle_loc_cabinet" Size="50,20">
<OnClick>
<submit next="GBDEDITbottle_loc_cabinet" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchbottle_loc_cabinet" Name="gsearchbottle_loc_cabinet" Size="50,20" visible="false">
<OnClick>
<search next="bottle_loc_cabinetLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITbottle_loc_cabinet" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVbottle_loc_cabinet" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_bottle_loc_cabinet" Name="bottle_loc_cabinetLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>locationid</Index>
<DbTable>his.bottle_loc_cabinet</DbTable>
<Data>bottleid,medicineid,medicineno,cabinetid,cellid,opera,uptime,locationid</Data>
<Order>locationid</Order></DbDetails>
<OnClick><assign name="bottleid[bottleid]" function="SetSel" expr="%{bottle_loc_cabinetLst[bottleid]}"/><assign name="medicineid[medicineid]" function="SetSel" expr="%{bottle_loc_cabinetLst[medicineid]}"/><assign name="cabinetid[cabinetid]" function="SetSel" expr="%{bottle_loc_cabinetLst[cabinetid]}"/><assign name="cellid[cellid]" function="SetSel" expr="%{bottle_loc_cabinetLst[cellid]}"/><assign name="opera[user_id]" function="SetSel" expr="%{bottle_loc_cabinetLst[opera]}"/>
<if cond="'%{locationid}'"><SetVisible name="insertbottle_loc_cabinet" Visible="0"/><SetVisible name="modifybottle_loc_cabinet" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertbottle_loc_cabinet" Visible="1"/><SetVisible name="modifybottle_loc_cabinet" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><bottleid format="b.bottleid='%{opvalue}'"/><bottleno format="(b.bottleno like '%%{opvalue}%')"/><medicineid format="(b.medicineid like '%%{opvalue}%')"/><medicineno format="(b.medicineno like '%%{opvalue}%')"/><cabinetid format="b.cabinetid='%{opvalue}'"/><cellid format="b.cellid='%{opvalue}'"/><locationid format="(b.locationid like '%%{opvalue}%')"/><opera format="b.opera='%{opvalue}'"/><uptime format="(b.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\bottle_loc_cabinet.xml" name="bottle_loc_cabinet">
<Lang name="bottle_loc_cabinet" value="药柜药品信息"/>
<Lang name="bottle_loc_cabinet_v" value="药柜药品信息"/>
<Lang name="TabEditbottle_loc_cabinet" value="bottle_loc_cabinet Edit"/>
<Lang name="TabViewbottle_loc_cabinet" value="bottle_loc_cabinet View"/>
<Lang name="bottleid" value="药瓶"/>
<Lang name="ttp_bottleid" value="药瓶"/>
<Lang name="bottleno" value="药瓶编码"/>
<Lang name="ttp_bottleno" value="药瓶编码"/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value="药柜"/>
<Lang name="cellid" value="药柜柜格"/>
<Lang name="ttp_cellid" value="药柜柜格"/>
<Lang name="locationid" value=""/>
<Lang name="ttp_locationid" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="ttp_operationbottle_loc_cabinet" value=""/>
<Lang name="ttp_createbottle_loc_cabinet" value=""/>
<Lang name="ttp_modifybottle_loc_cabinet" value=""/>
<Lang name="ttp_resetbottle_loc_cabinet" value=""/>
<Lang name="ttp_deletebottle_loc_cabinet" value=""/>
<Lang name="ttp_refreshbottle_loc_cabinet" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="bottle_loc_cabinet" Name="GBbottle_loc_cabinet" id="bottle_loc_cabinet" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_Vs.xml" text="Search" toggle="1" Name="GBDEDITbottle_loc_cabinet"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" Name="lb_bottleid" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottleid" Name="bottleid" Size="170,20">
	<DbDetails>
<Index>bottleid</Index>
<DbTable>his.bottle_info</DbTable>
<Data>bottleno,medicineid,bottleid</Data>
<Where/>
<queryFormat/></DbDetails><OnEnChange><submit next="medicineid"/></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineno"><Ctrls>
<Label Align="Right" Text="medicineno" Name="lb_medicineno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" Name="medicineno" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVbottle_loc_cabinet" Size="100,20"><Ctrls>
	
<Button Text="reset" ToolTip="ttp_resetbottle_loc_cabinet" Name="resetbottle_loc_cabinet" Size="50,20">	<OnClick>	<submit next="GBDEDITbottle_loc_cabinet" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchbottle_loc_cabinet" Name="gsearchbottle_loc_cabinet" Size="50,20">	<OnClick>	
<search next="bottle_loc_cabinet_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITbottle_loc_cabinet" namelist="search" function="search"/>	
<search next="records_bottle_loc_cabinet" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITbottle_loc_cabinet" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGbottle_loc_cabinet"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_bottle_loc_cabinet" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>locationid</Index>
<DbTable>his.bottle_loc_cabinet b left join his.bottle_info b0 on b.bottleid=b0.bottleid left join his.medicine_info m on b.medicineid=m.medicineid left join his.cabinet c on b.cabinetid=c.cabinetid left join his.cabinet_cell c0 on b.cellid=c0.cellid left join his.users u on b.opera=u.user_id</DbTable><Where>where !m.isdel</Where>
<Data>count(*) records</Data>
<Order>locationid</Order><Queryformat>select %{data} from (select b.locationid from %{dbtable} %{where} GROUP BY b.locationid  ORDER BY b.locationid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_bottle_loc_cabinet" expr="js(Math.ceil(%{records_bottle_loc_cabinet}/%{bottle_loc_cabinet_vLst[countsperpage]}))"/>
<assign name="pgscb_bottle_loc_cabinet" function="setitems" expr="js('1~'+Math.ceil(%{records_bottle_loc_cabinet}/%{bottle_loc_cabinet_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_bottle_loc_cabinet" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_bottle_loc_cabinet" Size="30,20"/>
<Button Text="go2Page" Name="go2pagebottle_loc_cabinet_vLst" Size="50,20"><OnClick><submit next="bottle_loc_cabinet_vLst" function="GetPage(%{pgcur_bottle_loc_cabinet}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVbottle_loc_cabinet"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialbottle_loc_cabinet" Size="50,20">
<OnClick><submit next="bottle_loc_cabinet_vLst" function="initial"/><submit next="records_bottle_loc_cabinet" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPbottle_loc_cabinet_vLst" Size="50,20">
<OnClick><submit next="bottle_loc_cabinet_vLst" function="GetPage(first)"/><submit next="records_bottle_loc_cabinet"/></OnClick></Button>
<Button Text="prepage" Name="PREbottle_loc_cabinet_vLst" Size="50,20">
<OnClick><submit next="bottle_loc_cabinet_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPbottle_loc_cabinet_vLst" Size="50,20">
<OnClick><submit next="bottle_loc_cabinet_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVbottle_loc_cabinet"><Ctrls>
<ListCtrl Heading="bottleid,55;medicineid,55;medicineno,250;cabinetid,120;cellid,120;opera,55;uptime,150;locationid,100;" loadedclick="0" ToolTip="ttp_bottle_loc_cabinet_v" OnLoad="init" Name="bottle_loc_cabinet_vLst" Size="700,450" colsDisplay="7">
	<DbDetails>
<Index>locationid</Index>
<DbTable>his.bottle_loc_cabinet b left join his.bottle_info b0 on b.bottleid=b0.bottleid left join his.medicine_info m on b.medicineid=m.medicineid left join his.cabinet c on b.cabinetid=c.cabinetid left join his.cabinet_cell c0 on b.cellid=c0.cellid left join his.users u on b.opera=u.user_id</DbTable>
<Data>b0.bottleno bottleid,m.medicinenocn medicineid,b.medicineno,c.cabinetname cabinetid,concat(cell_row,'-',cell_col),u.user_name opera,b.uptime,b.locationid</Data>
<Order>locationid</Order></DbDetails>
<DbDetails><Where>where !m.isdel</Where><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<operator xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_ops.xml" firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">

<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.bottle_loc_cabinet</DbTable>
<Where>locationid='%{bottle_loc_cabinet_vLst[locationid]}'</Where>
<queryFormat>update %{table} set isdel=true,opera='%{operaid}',uptime=now() where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_bottle_loc_cabinet" expr="js(%{bottle_loc_cabinet_vLst[currentpage]}+1)"/>
<assign name="pgscb_bottle_loc_cabinet" function="SetSel" expr="js(%{bottle_loc_cabinet_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_vm.xml" Text="medication_v" Name="medication_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_Ve.xml" Text="medication" Name="medication" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="medication_no,jici,dispensaryid[dispensaryid],dept_category[dept_categoryid],type[statuscode],doctor_no,doctory_diagnosis"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medication.xml" name="medication">
<Lang name="medication" value="处方"/>
<Lang name="patient" value="病人信息"/>
<Lang name="medication_v" value="处方"/>
<Lang name="TabEditmedication" value="medication Edit"/>
<Lang name="TabViewmedication" value="medication View"/>
<Lang name="medication_no" value="处方号"/>
<Lang name="ttp_medication_no" value="处方号"/>
<Lang name="jici" value="剂次"/>
<Lang name="ttp_jici" value="剂次"/>
<Lang name="dispensaryid" value=""/>
<Lang name="ttp_dispensaryid" value=""/>
<Lang name="dept_category" value="科别"/>
<Lang name="ttp_dept_category" value="科别"/>
<Lang name="type" value="处方类型"/>
<Lang name="ttp_type" value="处方类型"/>
<Lang name="doctor_no" value="医生"/>
<Lang name="ttp_doctor_no" value="医生"/>
<Lang name="doctory_diagnosis" value="诊断"/>
<Lang name="ttp_doctory_diagnosis" value="诊断"/>
<Lang name="doctory_medicineprescript" value="药方"/>
<Lang name="ttp_doctory_medicineprescript" value="药方"/>
<Lang name="doctory_medicinefundesc" value="药效"/>
<Lang name="ttp_doctory_medicinefundesc" value="药效"/>
<Lang name="doctory_usemethod" value="使用方法"/>
<Lang name="ttp_doctory_usemethod" value="使用方法"/>
<Lang name="danji_price" value="单剂价格"/>
<Lang name="ttp_danji_price" value="单剂价格"/>
<Lang name="total_price" value="总价"/>
<Lang name="ttp_total_price" value="总价"/>
<Lang name="patient_name" value="姓名"/>
<Lang name="ttp_patient_name" value="姓名"/>
<Lang name="patient_sex" value="性别"/>
<Lang name="ttp_patient_sex" value="性别"/>
<Lang name="patient_age" value="年龄"/>
<Lang name="ttp_patient_age" value="年龄"/>
<Lang name="patient_phoneno" value="电话"/>
<Lang name="ttp_patient_phoneno" value="电话"/>
<Lang name="patient_fresh" value="是否首次"/>
<Lang name="ttp_patient_fresh" value="是否首次"/>
<Lang name="patient_address" value="地址"/>
<Lang name="ttp_patient_address" value="地址"/>
<Lang name="patient_fallill_time" value="生病时间"/>
<Lang name="ttp_patient_fallill_time" value="生病时间"/>
<Lang name="patient_intime" value="看病时间"/>
<Lang name="ttp_patient_intime" value="看病时间"/>
<Lang name="patient_allergy" value="过敏史"/>
<Lang name="ttp_patient_allergy" value="过敏史"/>
<Lang name="patient_historyilldes" value="病史"/>
<Lang name="ttp_patient_historyilldes" value="病史"/>
<Lang name="patient_illshow" value="病表现"/>
<Lang name="ttp_patient_illshow" value="病表现"/>
<Lang name="status" value="状态"/>
<Lang name="ttp_status" value="状态"/>
<Lang name="opera" value="操作人"/>
<Lang name="ttp_opera" value="操作人"/>
<Lang name="uptime" value="更新时间"/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="medicationid" value=""/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="ttp_operationmedication" value=""/>
<Lang name="ttp_createmedication" value=""/>
<Lang name="ttp_modifymedication" value=""/>
<Lang name="ttp_resetmedication" value=""/>
<Lang name="ttp_deletemedication" value=""/>
<Lang name="ttp_refreshmedication" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medication_detail.xml" name="medication_detail">
<Lang name="medication_detail" value="medication_detail"/>
<Lang name="TabEditmedication_detail" value="medication_detail Edit"/>
<Lang name="TabViewmedication_detail" value="medication_detail View"/>
<Lang name="medicineid" value="药品"/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="medicineno" value="药编号"/>
<Lang name="ttp_medicineno" value="药编号"/>
<Lang name="medication_no" value="处方号"/>
<Lang name="ttp_medication_no" value="处方号"/>
<Lang name="medicinenocn" value="药名"/>
<Lang name="ttp_medicinenocn" value="药名"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="jiliang" value="剂量"/>
<Lang name="ttp_jiliang" value="剂量"/>
<Lang name="xiaoji" value="小计"/>
<Lang name="ttp_xiaoji" value="小计"/>
<Lang name="status" value="状态"/>
<Lang name="ttp_status" value="状态"/>
<Lang name="time1" value="时间"/>
<Lang name="ttp_time1" value="时间"/>
<Lang name="medication_detailid" value=""/>
<Lang name="ttp_medication_detailid" value=""/>
<Lang name="medicationid" value=""/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="ttp_operationmedication_detail" value=""/>
<Lang name="ttp_createmedication_detail" value=""/>
<Lang name="ttp_modifymedication_detail" value=""/>
<Lang name="ttp_resetmedication_detail" value=""/>
<Lang name="ttp_deletemedication_detail" value=""/>
<Lang name="ttp_refreshmedication_detail" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="medication" Name="GBmedication" id="medication" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_GBDEDIT.xml" Name="GBDEDITmedication"><Ctrls>
<GroupBox feature="tab" Text="medication" Name="medication"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medication_no"><Ctrls>
<Label Align="Right" Text="medication_no" Name="lb_medication_no" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medication_no" Name="medication_no" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_jici"><Ctrls>
<Label Align="Right" Text="jici" Name="lb_jici" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_jici" Name="jici" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dispensaryid"><Ctrls>
<Label Align="Right" Text="dispensaryid" onload="init" Name="lb_dispensaryid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_dispensaryid" onload="init" Name="dispensaryid" Size="150,100">
	<DbDetails>
<Index>dispensaryid</Index>
<DbTable>his.dispensary</DbTable>
<Data>dispensaryname,dispensaryid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshdispensaryid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="dispensaryid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dept_category"><Ctrls>
<Label Align="Right" Text="dept_category" onload="init" Name="lb_dept_category" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_dept_category" onload="init" Name="dept_category" Size="150,100">
	<DbDetails>
<Index>dept_categoryid</Index>
<DbTable>his.dept_category</DbTable>
<Data>dept_categoryname,dept_categoryid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshdept_category" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="dept_category"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_type"><Ctrls>
<Label Align="Right" Text="type" onload="init" Name="lb_type" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_type" onload="init" Name="type" Size="170,100">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=4</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_status" Visible="false"><Ctrls>
<Label Align="Right" Text="status" overlap="pre" onload="init" Name="lb_status" readonly="true" Size="60,20" Visible="false"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_status" overlap="pre" onload="init" Name="status" readonly="true" Size="170,100" Visible="false">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=2</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctor_no"><Ctrls>
<Label Align="Right" Text="doctor_no" Name="lb_doctor_no" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctor_no" Name="doctor_no" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctory_diagnosis"><Ctrls>
<Label Align="Right" Text="doctory_diagnosis" Name="lb_doctory_diagnosis" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctory_diagnosis" Name="doctory_diagnosis" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctory_medicineprescript"><Ctrls>
<Label Align="Right" Text="doctory_medicineprescript" Name="lb_doctory_medicineprescript" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctory_medicineprescript" Name="doctory_medicineprescript" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctory_medicinefundesc"><Ctrls>
<Label Align="Right" Text="doctory_medicinefundesc" Name="lb_doctory_medicinefundesc" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctory_medicinefundesc" Name="doctory_medicinefundesc" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctory_usemethod"><Ctrls>
<Label Align="Right" Text="doctory_usemethod" Name="lb_doctory_usemethod" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctory_usemethod" Name="doctory_usemethod" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_total_price" Visible="false"><Ctrls>
<Label Align="Right" Text="total_price" overlap="pre" Name="lb_total_price" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_total_price" overlap="pre" Name="total_price" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR NULLHeight="1"/><GroupBox feature="tab" Text="patient" Name="patient"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_name"><Ctrls>
<Label Align="Right" Text="patient_name" Name="lb_patient_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_name" Name="patient_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_sex"><Ctrls>
<Label Align="Right" Text="patient_sex" Name="lb_patient_sex" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_sex" Name="patient_sex" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_age"><Ctrls>
<Label Align="Right" Text="patient_age" Name="lb_patient_age" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_age" Name="patient_age" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_fresh"><Ctrls>
<CheckBox Text="patient_fresh" ToolTip="ttp_patient_fresh" Name="patient_fresh" Size="230,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_phoneno"><Ctrls>
<Label Align="Right" Text="patient_phoneno" Name="lb_patient_phoneno" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_patient_phoneno" Name="patient_phoneno" Size="150,20"/>
<MagicCtrl ToolTip="DialToCall" Name="dialpatient_phoneno" OnClick="nis3ucs:%{patient_phoneno}" images=" ,data/startcall_green.png" button="type:0" Size="20,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_fallill_time"><Ctrls>
<Label Align="Right" Text="patient_fallill_time" Name="lb_patient_fallill_time" Size="60,20"/>
<DateTime Weight="170" Text="" ToolTip="ttp_patient_fallill_time" Name="patient_fallill_time" Size="170,20" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_address"><Ctrls>
<Label Align="Right" Text="patient_address" Name="lb_patient_address" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_address" Name="patient_address" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_intime"><Ctrls>
<Label Align="Right" Text="patient_intime" Name="lb_patient_intime" Size="60,20"/>
<DateTime Weight="170" Text="" ToolTip="ttp_patient_intime" Name="patient_intime" Size="170,20" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_allergy"><Ctrls>
<Label Align="Right" Text="patient_allergy" Name="lb_patient_allergy" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_allergy" Name="patient_allergy" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_historyilldes"><Ctrls>
<Label Align="Right" Text="patient_historyilldes" Name="lb_patient_historyilldes" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_historyilldes" Name="patient_historyilldes" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_illshow"><Ctrls>
<Label Align="Right" Text="patient_illshow" Name="lb_patient_illshow" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_illshow" Name="patient_illshow" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_medicationid" Visible="false"><Ctrls>
<Label Align="Right" Text="medicationid" overlap="pre" Name="lb_medicationid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicationid" overlap="pre" Name="medicationid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{medicationid}'"><SetVisible name="insertmedication" Visible="0"/><SetVisible name="modifymedication" Visible="1"/><else/><SetVisible name="insertmedication" Visible="1"/><SetVisible name="modifymedication" Visible="0"/></if><if cond="'%{medicationid}'"><DbDetails><Where>medicationid='%{medicationid}'</Where></DbDetails><submit next="medication_detail_vLst" namelist="DbDetails"/><else/><submit next="medication_detail_vLst" function="resetcontent"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox></Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEmedication" Size="100,100"><Ctrls>
<Button sqlpkinsert="medicationid" Text="create" ToolTip="ttp_createmedication" Name="insertmedication" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.medication</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medication_no,jici,dispensaryid[dispensaryid],dept_category[dept_categoryid],type[statuscode],doctor_no,doctory_diagnosis,doctory_medicineprescript,doctory_medicinefundesc,doctory_usemethod,total_price,patient_name,patient_sex,patient_age,patient_fresh,patient_phoneno,patient_fallill_time,patient_address,patient_intime,patient_allergy,patient_historyilldes,patient_illshow</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertmedication[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medicationLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="0"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medication_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifymedication" Name="modifymedication" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.medication</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medication_no,jici,dispensaryid[dispensaryid],dept_category[dept_categoryid],type[statuscode],doctor_no,doctory_diagnosis,doctory_medicineprescript,doctory_medicinefundesc,doctory_usemethod,total_price,patient_name,patient_sex,patient_age,patient_fresh,patient_phoneno,patient_fallill_time,patient_address,patient_intime,patient_allergy,patient_historyilldes,patient_illshow</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<Where>medicationid='%{medicationid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifymedication[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medicationLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medication_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetmedication" Name="resetmedication" Size="50,20">
<OnClick>
<submit next="GBDEDITmedication" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchmedication" Name="gsearchmedication" Size="50,20" visible="false">
<OnClick>
<search next="medicationLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITmedication" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedication" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_medication" Name="medicationLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>medicationid</Index>
<DbTable>his.medication</DbTable>
<Data>medication_no,jici,dispensaryid,dept_category,type,status,doctor_no,doctory_diagnosis,doctory_medicineprescript,doctory_medicinefundesc,doctory_usemethod,total_price,patient_name,patient_sex,patient_age,patient_fresh,patient_phoneno,patient_fallill_time,patient_address,patient_intime,patient_allergy,patient_historyilldes,patient_illshow,opera,uptime,medicationid</Data>
<Order>medicationid</Order></DbDetails>
<OnClick><assign name="dispensaryid[dispensaryid]" function="SetSel" expr="%{medicationLst[dispensaryid]}"/><assign name="dept_category[dept_categoryid]" function="SetSel" expr="%{medicationLst[dept_category]}"/><assign name="type[statuscode]" function="SetSel" expr="%{medicationLst[type]}"/><assign name="status[statuscode]" function="SetSel" expr="%{medicationLst[status]}"/><assign name="opera[user_id]" function="SetSel" expr="%{medicationLst[opera]}"/>
<if cond="'%{medicationid}'"><SetVisible name="insertmedication" Visible="0"/><SetVisible name="modifymedication" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox>
<BR/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_detail_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedication_detail"><Ctrls>
<ListCtrl Heading="medicineid,55;medicineno,250;medicinenocn,250;price,50;jiliang,50;xiaoji,50;status,120;time1,150;medication_detailid,100;medicationid,100;" loadedclick="0" ToolTip="ttp_medication_detail_v" Name="medication_detail_vLst" Size="700,450">
	<DbDetails>
<Index>medication_detailid</Index>
<DbTable>his.medication_detail m left join his.medicine_info m0 on m.medicineid=m0.medicineid left join his.status_option s on m.status=s.statuscode</DbTable>
<Data>m0.medicineno medicineid,m.medicineno,m.medicinenocn,m.price,m.jiliang,m.xiaoji,s.statusname status,m.time1,m.medication_detailid,m.medicationid,m.medicineid medichine_id</Data>
<Order>medication_detailid</Order></DbDetails>
<operator xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_detail_ops.xml" firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op mustselected="0" text="addone"><if cond="!%{medicationid}"><alert expr="medicationid is Empty!"/><else/><submit next="$parent.medication_detail.GBDEDITmedication_detail" function="reset"/><assign name="$parent.medication_detail.medicationid" expr="%{medicationid}"/><assign name="$parent.medication_detail.frmwndctrl" expr="%{this}"/></if></op>
<op text="modify"><DbDetails><Where>medication_detailid='%{medication_detail_vLst[medication_detailid]}'</Where></DbDetails><submit next="$parent.medication_detail.medication_detailLst" namelist="DbDetails"/><DbDetails><Where>medicineid='%{medication_detail_vLst[medicine_id]}'</Where></DbDetails><submit next="$this.medication_detail.medicineid" namelist="DbDetails"/><assign name="$parent.medication_detail.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.medication_detail</DbTable>
<Where>medication_detailid='%{medication_detail_vLst[medication_detailid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertmedication" Visible="1"/><SetVisible name="modifymedication" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_detail_Ve.xml" Text="medication_detail" Name="medication_detail" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="medicineid[medicineid],price,jiliang,medicationid"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medication_detail.xml" name="medication_detail">
<Lang name="medication_detail" value="medication_detail"/>
<Lang name="TabEditmedication_detail" value="medication_detail Edit"/>
<Lang name="TabViewmedication_detail" value="medication_detail View"/>
<Lang name="medicineid" value="药品"/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="medicineno" value="药编号"/>
<Lang name="ttp_medicineno" value="药编号"/>
<Lang name="medication_no" value="处方号"/>
<Lang name="ttp_medication_no" value="处方号"/>
<Lang name="medicinenocn" value="药名"/>
<Lang name="ttp_medicinenocn" value="药名"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="jiliang" value="剂量"/>
<Lang name="ttp_jiliang" value="剂量"/>
<Lang name="xiaoji" value="小计"/>
<Lang name="ttp_xiaoji" value="小计"/>
<Lang name="status" value="状态"/>
<Lang name="ttp_status" value="状态"/>
<Lang name="time1" value="时间"/>
<Lang name="ttp_time1" value="时间"/>
<Lang name="medication_detailid" value=""/>
<Lang name="ttp_medication_detailid" value=""/>
<Lang name="medicationid" value=""/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="ttp_operationmedication_detail" value=""/>
<Lang name="ttp_createmedication_detail" value=""/>
<Lang name="ttp_modifymedication_detail" value=""/>
<Lang name="ttp_resetmedication_detail" value=""/>
<Lang name="ttp_deletemedication_detail" value=""/>
<Lang name="ttp_refreshmedication_detail" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="medication_detail" Name="GBmedication_detail" id="medication_detail" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_detail_GBDEDIT.xml" Name="GBDEDITmedication_detail"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="150,20">
	<DbDetails fcsm="true">
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicineno,medicinenocn,price,medicineid</Data>
<Where>!isdel</Where>
<queryFormat/></DbDetails></TextBox>
<MagicCtrl Name="pickmedicineid" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$parent.medicine_info_pick.frmwndctrl" expr="medication_detail.medicineid"/><DbDetails><Where/></DbDetails><submit next="$parent.medicine_info_pick.medicine_info_vLst" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_medicineno" Visible="false"><Ctrls>
<Label Align="Right" Text="medicineno" overlap="pre" Name="lb_medicineno" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" overlap="pre" Name="medicineno" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenocn"><Ctrls>
<Label Align="Right" Text="medicinenocn" Name="lb_medicinenocn" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenocn" Name="medicinenocn" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_price"><Ctrls>
<Label Align="Right" Text="price" Name="lb_price" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_price" Name="price" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_jiliang"><Ctrls>
<Label Align="Right" Text="jiliang" Name="lb_jiliang" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_jiliang" Name="jiliang" Size="170,20"><OnEnChange><assign name="xiaoji" expr="js(%{price}*%{jiliang})"/></OnEnChange></TextBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_xiaoji"><Ctrls>
<Label Align="Right" Text="xiaoji" Name="lb_xiaoji" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiaoji" Name="xiaoji" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_status" Visible="false"><Ctrls>
<Label Align="Right" Text="status" overlap="pre" Name="lb_status" readonly="true" Size="60,20" Visible="false"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_status" overlap="pre" Name="status" readonly="true" Size="170,100" Visible="false">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=3</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_time1" Visible="false"><Ctrls>
<Label Align="Right" Text="time1" overlap="pre" Name="lb_time1" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_time1" overlap="pre" Name="time1" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_medication_detailid" Visible="false"><Ctrls>
<Label Align="Right" Text="medication_detailid" overlap="pre" Name="lb_medication_detailid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medication_detailid" overlap="pre" Name="medication_detailid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{medication_detailid}'"><SetVisible name="insertmedication_detail" Visible="0"/><SetVisible name="modifymedication_detail" Visible="1"/><else/><SetVisible name="insertmedication_detail" Visible="1"/><SetVisible name="modifymedication_detail" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_medicationid" Visible="false"><Ctrls>
<Label Align="Right" Text="medicationid" overlap="pre" Name="lb_medicationid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicationid" overlap="pre" Name="medicationid" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_detail_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEmedication_detail" Size="100,100"><Ctrls>
<Button sqlpkinsert="medication_detailid" Text="create" ToolTip="ttp_createmedication_detail" Name="insertmedication_detail" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.medication_detail</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicineid[medicineid],medicineno,medicinenocn,price,jiliang,xiaoji,medicationid</Data>
<DataEx>time1;now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertmedication_detail[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medication_detailLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medication_detail_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifymedication_detail" Name="modifymedication_detail" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.medication_detail</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicineid[medicineid],medicineno,medicinenocn,price,jiliang,xiaoji,medicationid</Data>
<DataEx>time1;now()</DataEx>
<Where>medication_detailid='%{medication_detailid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifymedication_detail[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medication_detailLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medication_detail_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetmedication_detail" Name="resetmedication_detail" Size="50,20">
<OnClick>
<submit next="GBDEDITmedication_detail" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchmedication_detail" Name="gsearchmedication_detail" Size="50,20" visible="false">
<OnClick>
<search next="medication_detailLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITmedication_detail" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_detail_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedication_detail" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_medication_detail" Name="medication_detailLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>medication_detailid</Index>
<DbTable>his.medication_detail</DbTable>
<Data>medicineid,medicineno,medicinenocn,price,jiliang,xiaoji,status,time1,medication_detailid,medicationid</Data>
<Order>medication_detailid</Order></DbDetails>
<OnClick><assign name="medicineid[medicineid]" function="SetSel" expr="%{medication_detailLst[medicineid]}"/><assign name="status[statuscode]" function="SetSel" expr="%{medication_detailLst[status]}"/>
<if cond="'%{medication_detailid}'"><SetVisible name="insertmedication_detail" Visible="0"/><SetVisible name="modifymedication_detail" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertmedication_detail" Visible="1"/><SetVisible name="modifymedication_detail" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_Veprint.xml" Text="medication" Name="medication_print" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medication.xml" name="medication">
<Lang name="medication" value="处方"/>
<Lang name="patient" value="病人信息"/>
<Lang name="medication_v" value="处方"/>
<Lang name="TabEditmedication" value="medication Edit"/>
<Lang name="TabViewmedication" value="medication View"/>
<Lang name="medication_no" value="处方号"/>
<Lang name="ttp_medication_no" value="处方号"/>
<Lang name="jici" value="剂次"/>
<Lang name="ttp_jici" value="剂次"/>
<Lang name="dispensaryid" value=""/>
<Lang name="ttp_dispensaryid" value=""/>
<Lang name="dept_category" value="科别"/>
<Lang name="ttp_dept_category" value="科别"/>
<Lang name="type" value="处方类型"/>
<Lang name="ttp_type" value="处方类型"/>
<Lang name="doctor_no" value="医生"/>
<Lang name="ttp_doctor_no" value="医生"/>
<Lang name="doctory_diagnosis" value="诊断"/>
<Lang name="ttp_doctory_diagnosis" value="诊断"/>
<Lang name="doctory_medicineprescript" value="药方"/>
<Lang name="ttp_doctory_medicineprescript" value="药方"/>
<Lang name="doctory_medicinefundesc" value="药效"/>
<Lang name="ttp_doctory_medicinefundesc" value="药效"/>
<Lang name="doctory_usemethod" value="使用方法"/>
<Lang name="ttp_doctory_usemethod" value="使用方法"/>
<Lang name="danji_price" value="单剂价格"/>
<Lang name="ttp_danji_price" value="单剂价格"/>
<Lang name="total_price" value="总价"/>
<Lang name="ttp_total_price" value="总价"/>
<Lang name="patient_name" value="姓名"/>
<Lang name="ttp_patient_name" value="姓名"/>
<Lang name="patient_sex" value="性别"/>
<Lang name="ttp_patient_sex" value="性别"/>
<Lang name="patient_age" value="年龄"/>
<Lang name="ttp_patient_age" value="年龄"/>
<Lang name="patient_phoneno" value="电话"/>
<Lang name="ttp_patient_phoneno" value="电话"/>
<Lang name="patient_fresh" value="是否首次"/>
<Lang name="ttp_patient_fresh" value="是否首次"/>
<Lang name="patient_address" value="地址"/>
<Lang name="ttp_patient_address" value="地址"/>
<Lang name="patient_fallill_time" value="生病时间"/>
<Lang name="ttp_patient_fallill_time" value="生病时间"/>
<Lang name="patient_intime" value="看病时间"/>
<Lang name="ttp_patient_intime" value="看病时间"/>
<Lang name="patient_allergy" value="过敏史"/>
<Lang name="ttp_patient_allergy" value="过敏史"/>
<Lang name="patient_historyilldes" value="病史"/>
<Lang name="ttp_patient_historyilldes" value="病史"/>
<Lang name="patient_illshow" value="病表现"/>
<Lang name="ttp_patient_illshow" value="病表现"/>
<Lang name="status" value="状态"/>
<Lang name="ttp_status" value="状态"/>
<Lang name="opera" value="操作人"/>
<Lang name="ttp_opera" value="操作人"/>
<Lang name="uptime" value="更新时间"/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="medicationid" value=""/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="ttp_operationmedication" value=""/>
<Lang name="ttp_createmedication" value=""/>
<Lang name="ttp_modifymedication" value=""/>
<Lang name="ttp_resetmedication" value=""/>
<Lang name="ttp_deletemedication" value=""/>
<Lang name="ttp_refreshmedication" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medication_detail.xml" name="medication_detail">
<Lang name="medication_detail" value="medication_detail"/>
<Lang name="TabEditmedication_detail" value="medication_detail Edit"/>
<Lang name="TabViewmedication_detail" value="medication_detail View"/>
<Lang name="medicineid" value="药品"/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="medicineno" value="药编号"/>
<Lang name="ttp_medicineno" value="药编号"/>
<Lang name="medication_no" value="处方号"/>
<Lang name="ttp_medication_no" value="处方号"/>
<Lang name="medicinenocn" value="药名"/>
<Lang name="ttp_medicinenocn" value="药名"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="jiliang" value="剂量"/>
<Lang name="ttp_jiliang" value="剂量"/>
<Lang name="xiaoji" value="小计"/>
<Lang name="ttp_xiaoji" value="小计"/>
<Lang name="status" value="状态"/>
<Lang name="ttp_status" value="状态"/>
<Lang name="time1" value="时间"/>
<Lang name="ttp_time1" value="时间"/>
<Lang name="medication_detailid" value=""/>
<Lang name="ttp_medication_detailid" value=""/>
<Lang name="medicationid" value=""/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="ttp_operationmedication_detail" value=""/>
<Lang name="ttp_createmedication_detail" value=""/>
<Lang name="ttp_modifymedication_detail" value=""/>
<Lang name="ttp_resetmedication_detail" value=""/>
<Lang name="ttp_deletemedication_detail" value=""/>
<Lang name="ttp_refreshmedication_detail" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medicine_info.xml" name="medicine_info">
<Lang name="medicine_info" value="药品信息"/>
<Lang name="medicine_info_v" value="药品信息"/>
<Lang name="TabEditmedicine_info" value="medicine_info Edit"/>
<Lang name="TabViewmedicine_info" value="medicine_info View"/>
<Lang name="medicineno" value="药品编号"/>
<Lang name="ttp_medicineno" value="药品编号"/>
<Lang name="medicinecode" value="HIS药品编号"/>
<Lang name="ttp_medicinecode" value="HIS药品编号"/>
<Lang name="medicinenocn" value="药名中文"/>
<Lang name="ttp_medicinenocn" value="药名中文"/>
<Lang name="medicinenopy" value="药名拼音"/>
<Lang name="ttp_medicinenopy" value="药名拼音"/>
<Lang name="packno" value="包装码"/>
<Lang name="ttp_packno" value="包装码"/>
<Lang name="density" value="密度"/>
<Lang name="ttp_density" value=""/>
<Lang name="equivalent" value="当量"/>
<Lang name="ttp_equivalent" value=""/>
<Lang name="currentqty" value="当前数量"/>
<Lang name="ttp_currentqty" value="当前数量"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="warningval_jiliang" value="剂量上限"/>
<Lang name="ttp_warningval_jiliang" value=""/>
<Lang name="warningval_stock" value="库存安全值"/>
<Lang name="ttp_warningval_stock" value="库存安全值"/>
<Lang name="warningval_cabinet" value="药柜安全值"/>
<Lang name="ttp_warningval_cabinet" value="药柜安全值"/>
<Lang name="warning_validdays" value="有效期报警值"/>
<Lang name="ttp_warning_validdays" value="有效期报警值"/>
<Lang name="publicqty" value=""/>
<Lang name="ttp_publicqty" value=""/>
<Lang name="ispoison" value="毒药"/>
<Lang name="ttp_ispoison" value="毒药"/>
<Lang name="isanesthetic" value="麻药"/>
<Lang name="ttp_isanesthetic" value="麻药"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value="SEQ"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="ttp_operationmedicine_info" value=""/>
<Lang name="ttp_createmedicine_info" value=""/>
<Lang name="ttp_modifymedicine_info" value=""/>
<Lang name="ttp_resetmedicine_info" value=""/>
<Lang name="ttp_deletemedicine_info" value=""/>
<Lang name="ttp_refreshmedicine_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\bottle_info.xml" name="bottle_info">
<Lang name="bottle_info" value="药瓶信息"/>
<Lang name="bottle_info_v" value="药瓶信息"/>
<Lang name="TabEditbottle_info" value="bottle_info Edit"/>
<Lang name="TabViewbottle_info" value="bottle_info View"/>
<Lang name="bottleno" value="瓶号"/>
<Lang name="ttp_bottleno" value="瓶号"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="medicineno" value="药码"/>
<Lang name="ttp_medicineno" value="药码"/>
<Lang name="uses_flag" value="使用状态"/>
<Lang name="ttp_uses_flag" value="使用状态"/>
<Lang name="weight_initial" value="初始重量"/>
<Lang name="ttp_weight_initial" value="初始重量"/>
<Lang name="weight_last" value="最近重量"/>
<Lang name="ttp_weight_last" value=""/>
<Lang name="weight_cur" value=""/>
<Lang name="ttp_weight_cur" value="当前重量"/>
<Lang name="weight_gross" value="毛重(标)"/>
<Lang name="ttp_weight_gross" value="毛重(标)"/>
<Lang name="weight_net" value="净重(标)"/>
<Lang name="ttp_weight_net" value="净重(标)"/>
<Lang name="remark" value="备注"/>
<Lang name="ttp_remark" value="备注"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="bottleid" value=""/>
<Lang name="ttp_bottleid" value=""/>
<Lang name="ttp_operationbottle_info" value=""/>
<Lang name="ttp_createbottle_info" value=""/>
<Lang name="ttp_modifybottle_info" value=""/>
<Lang name="ttp_resetbottle_info" value=""/>
<Lang name="ttp_deletebottle_info" value=""/>
<Lang name="ttp_refreshbottle_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\cabinet.xml" name="cabinet">
<Lang name="cabinet" value="药柜"/>
<Lang name="cabinet_v" value="药柜"/>
<Lang name="TabEditcabinet" value="cabinet Edit"/>
<Lang name="TabViewcabinet" value="cabinet View"/>
<Lang name="cabinetno" value="柜号"/>
<Lang name="ttp_cabinetno" value="柜号"/>
<Lang name="cabinetname" value="柜名"/>
<Lang name="ttp_cabinetname" value="柜名"/>
<Lang name="layout_row" value="药柜行数"/>
<Lang name="ttp_layout_row" value="药柜行数"/>
<Lang name="layout_col" value="药柜列数"/>
<Lang name="ttp_layout_col" value="药柜列数"/>
<Lang name="layout_rowwidth" value="药格宽"/>
<Lang name="ttp_layout_rowwidth" value="药格宽"/>
<Lang name="layout_rowheight" value="药格高"/>
<Lang name="ttp_layout_rowheight" value="药格高"/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="cabinetid" value=""/>
<Lang name="ttp_cabinetid" value="序号"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="ttp_operationcabinet" value=""/>
<Lang name="ttp_createcabinet" value=""/>
<Lang name="ttp_modifycabinet" value=""/>
<Lang name="ttp_resetcabinet" value=""/>
<Lang name="ttp_deletecabinet" value=""/>
<Lang name="ttp_refreshcabinet" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\cabinet_cell.xml" name="cabinet_cell">
<Lang name="cabinet_cell" value="药格"/>
<Lang name="cell" value="药格"/>
<Lang name="TabEditcabinet_cell" value="cabinet_cell Edit"/>
<Lang name="TabViewcabinet_cell" value="cabinet_cell View"/>
<Lang name="cell_row" value="行"/>
<Lang name="ttp_cell_row" value=""/>
<Lang name="cell_col" value="列"/>
<Lang name="ttp_cell_col" value=""/>
<Lang name="op_idx" value="操作系列"/>
<Lang name="ttp_op_idx" value="modbus regs index, eg:1,2,3,4,5"/>
<Lang name="op_code" value="操作参数"/>
<Lang name="ttp_op_code" value="modbus reg code,eg:0,1,2,3,4,...,15"/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value=""/>
<Lang name="cellid" value="药格"/>
<Lang name="ttp_cellid" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="ttp_operationcabinet_cell" value=""/>
<Lang name="ttp_createcabinet_cell" value=""/>
<Lang name="ttp_modifycabinet_cell" value=""/>
<Lang name="ttp_resetcabinet_cell" value=""/>
<Lang name="ttp_deletecabinet_cell" value=""/>
<Lang name="ttp_refreshcabinet_cell" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\equipment.xml" name="equipment">
<Lang name="equipment" value="发药机"/>
<Lang name="equipment_v" value="发药机"/>
<Lang name="TabEditequipment" value="equipment Edit"/>
<Lang name="TabViewequipment" value="equipment View"/>
<Lang name="equipmentno" value="设备编号"/>
<Lang name="ttp_equipmentno" value="设备编号"/>
<Lang name="equipmentname" value="设备名"/>
<Lang name="ttp_equipmentname" value="设备名"/>
<Lang name="ip" value=""/>
<Lang name="ttp_ip" value="ip"/>
<Lang name="cabinetid" value="药柜号"/>
<Lang name="ttp_cabinetid" value="药柜号"/>
<Lang name="equipmenttypeid" value="设备类型"/>
<Lang name="ttp_equipmenttypeid" value=""/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="equipmentid" value=""/>
<Lang name="ttp_equipmentid" value="序号"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="computerid" value="绑定电脑"/>
<Lang name="ttp_computerid" value=""/>
<Lang name="ttp_operationequipment" value=""/>
<Lang name="ttp_createequipment" value=""/>
<Lang name="ttp_modifyequipment" value=""/>
<Lang name="ttp_resetequipment" value=""/>
<Lang name="ttp_deleteequipment" value=""/>
<Lang name="ttp_refreshequipment" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\equipment_pos.xml" name="equipment_pos">
<Lang name="equipment_pos" value="药机位"/>
<Lang name="TabEditequipment_pos" value="equipment_pos Edit"/>
<Lang name="TabViewequipment_pos" value="equipment_pos View"/>
<Lang name="equipment_pos_degree" value="开口角度"/>
<Lang name="pos_idx" value="机位"/>
<Lang name="ttp_pos_idx" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="posid" value=""/>
<Lang name="ttp_posid" value=""/>
<Lang name="equipmentid" value=""/>
<Lang name="ttp_equipmentid" value=""/>
<Lang name="ttp_operationequipment_pos" value=""/>
<Lang name="ttp_createequipment_pos" value=""/>
<Lang name="ttp_modifyequipment_pos" value=""/>
<Lang name="ttp_resetequipment_pos" value=""/>
<Lang name="ttp_deleteequipment_pos" value=""/>
<Lang name="ttp_refreshequipment_pos" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="medication" Name="GBmedication" id="medication" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_GBDEDIT.xml" Name="GBDEDITmedication"><Ctrls>
<GroupBox feature="tab" Text="medication" Name="medication"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medication_no"><Ctrls>
<Label Align="Right" Text="medication_no" Name="lb_medication_no" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medication_no" Name="medication_no" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_jici"><Ctrls>
<Label Align="Right" Text="jici" Name="lb_jici" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_jici" Name="jici" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dispensaryid"><Ctrls>
<Label Align="Right" Text="dispensaryid" onload="init" Name="lb_dispensaryid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_dispensaryid" onload="init" Name="dispensaryid" Size="150,100">
	<DbDetails>
<Index>dispensaryid</Index>
<DbTable>his.dispensary</DbTable>
<Data>dispensaryname,dispensaryid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshdispensaryid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="dispensaryid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dept_category"><Ctrls>
<Label Align="Right" Text="dept_category" onload="init" Name="lb_dept_category" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_dept_category" onload="init" Name="dept_category" Size="150,100">
	<DbDetails>
<Index>dept_categoryid</Index>
<DbTable>his.dept_category</DbTable>
<Data>dept_categoryname,dept_categoryid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshdept_category" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="dept_category"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_type"><Ctrls>
<Label Align="Right" Text="type" onload="init" Name="lb_type" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_type" onload="init" Name="type" Size="170,100">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=4</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_status" Visible="false"><Ctrls>
<Label Align="Right" Text="status" overlap="pre" onload="init" Name="lb_status" readonly="true" Size="60,20" Visible="false"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_status" overlap="pre" onload="init" Name="status" readonly="true" Size="170,100" Visible="false">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=2</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctor_no"><Ctrls>
<Label Align="Right" Text="doctor_no" Name="lb_doctor_no" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctor_no" Name="doctor_no" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctory_diagnosis"><Ctrls>
<Label Align="Right" Text="doctory_diagnosis" Name="lb_doctory_diagnosis" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctory_diagnosis" Name="doctory_diagnosis" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctory_medicineprescript"><Ctrls>
<Label Align="Right" Text="doctory_medicineprescript" Name="lb_doctory_medicineprescript" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctory_medicineprescript" Name="doctory_medicineprescript" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctory_medicinefundesc"><Ctrls>
<Label Align="Right" Text="doctory_medicinefundesc" Name="lb_doctory_medicinefundesc" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctory_medicinefundesc" Name="doctory_medicinefundesc" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctory_usemethod"><Ctrls>
<Label Align="Right" Text="doctory_usemethod" Name="lb_doctory_usemethod" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctory_usemethod" Name="doctory_usemethod" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_total_price" Visible="false"><Ctrls>
<Label Align="Right" Text="total_price" overlap="pre" Name="lb_total_price" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_total_price" overlap="pre" Name="total_price" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR NULLHeight="1"/><GroupBox feature="tab" Text="patient" Name="patient"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_name"><Ctrls>
<Label Align="Right" Text="patient_name" Name="lb_patient_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_name" Name="patient_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_sex"><Ctrls>
<Label Align="Right" Text="patient_sex" Name="lb_patient_sex" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_sex" Name="patient_sex" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_age"><Ctrls>
<Label Align="Right" Text="patient_age" Name="lb_patient_age" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_age" Name="patient_age" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_fresh"><Ctrls>
<CheckBox Text="patient_fresh" ToolTip="ttp_patient_fresh" Name="patient_fresh" Size="230,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_phoneno"><Ctrls>
<Label Align="Right" Text="patient_phoneno" Name="lb_patient_phoneno" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_patient_phoneno" Name="patient_phoneno" Size="150,20"/>
<MagicCtrl ToolTip="DialToCall" Name="dialpatient_phoneno" OnClick="nis3ucs:%{patient_phoneno}" images=" ,data/startcall_green.png" button="type:0" Size="20,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_fallill_time"><Ctrls>
<Label Align="Right" Text="patient_fallill_time" Name="lb_patient_fallill_time" Size="60,20"/>
<DateTime Weight="170" Text="" ToolTip="ttp_patient_fallill_time" Name="patient_fallill_time" Size="170,20" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_address"><Ctrls>
<Label Align="Right" Text="patient_address" Name="lb_patient_address" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_address" Name="patient_address" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_intime"><Ctrls>
<Label Align="Right" Text="patient_intime" Name="lb_patient_intime" Size="60,20"/>
<DateTime Weight="170" Text="" ToolTip="ttp_patient_intime" Name="patient_intime" Size="170,20" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_allergy"><Ctrls>
<Label Align="Right" Text="patient_allergy" Name="lb_patient_allergy" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_allergy" Name="patient_allergy" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_historyilldes"><Ctrls>
<Label Align="Right" Text="patient_historyilldes" Name="lb_patient_historyilldes" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_historyilldes" Name="patient_historyilldes" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_illshow"><Ctrls>
<Label Align="Right" Text="patient_illshow" Name="lb_patient_illshow" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_illshow" Name="patient_illshow" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_medicationid" Visible="false"><Ctrls>
<Label Align="Right" Text="medicationid" overlap="pre" Name="lb_medicationid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicationid" overlap="pre" Name="medicationid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{medicationid}'"><SetVisible name="insertmedication" Visible="0"/><SetVisible name="modifymedication" Visible="1"/><else/><SetVisible name="insertmedication" Visible="1"/><SetVisible name="modifymedication" Visible="0"/></if><if cond="'%{medicationid}'"><DbDetails><Where>medicationid='%{medicationid}'</Where></DbDetails><submit next="medication_detail_vLst" namelist="DbDetails"/><else/><submit next="medication_detail_vLst" function="resetcontent"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox></Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Size="100,100"><Ctrls>
<Button Weight="100" text="ind_shangdai" Name="ind_shangdai" Size="100,20"><OnClick><if cond="!%{medication_detail_vLst[equipmentid]}"><alert expr="请选择药方明细"/><else/><DbDetails> <DbDatabase>mqtt</DbDatabase> <datatype>mqtt</datatype> <queryFormat>set %{medication_detail_vLst[mqtt_ind_shangdai]}='1'</queryFormat> </DbDetails><submit namelist="DbDetails"/></if></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Size="100,100"><Ctrls><Button Weight="100" text="return_finish" Name="return_finish" Size="100,20"><OnClick><if cond="!%{medication_detail_vLst[equipmentid]}"><alert expr="请选择药方明细"/><else/><DbDetails> <DbDatabase>mqtt</DbDatabase> <datatype>mqtt</datatype> <queryFormat>set %{medication_detail_vLst[mqtt_return_finish]}='accquire'</queryFormat> </DbDetails><submit next="returnfinish" namelist="DbDetails"/></if></OnClick></Button>
<TextBox Weight="50" Text="" ToolTip="ttp_returnfinish" Name="returnfinish" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Size="100,100"><Ctrls><Button Weight="100" text="ind_fengdai" Name="ind_fengdai" Size="100,20"><OnClick><if cond="!%{medication_detail_vLst[equipmentid]}"><alert expr="请选择药方明细"/><else/><DbDetails> <DbDatabase>mqtt</DbDatabase> <datatype>mqtt</datatype> <queryFormat>set %{medication_detail_vLst[mqtt_ind_fengdai]}='1'</queryFormat> </DbDetails><submit namelist="DbDetails"/></if></OnClick></Button>
 </Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedication" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_medication" Name="medicationLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>medicationid</Index>
<DbTable>his.medication</DbTable>
<Data>medication_no,jici,dispensaryid,dept_category,type,status,doctor_no,doctory_diagnosis,doctory_medicineprescript,doctory_medicinefundesc,doctory_usemethod,total_price,patient_name,patient_sex,patient_age,patient_fresh,patient_phoneno,patient_fallill_time,patient_address,patient_intime,patient_allergy,patient_historyilldes,patient_illshow,opera,uptime,medicationid</Data>
<Order>medicationid</Order></DbDetails>
<OnClick><assign name="dispensaryid[dispensaryid]" function="SetSel" expr="%{medicationLst[dispensaryid]}"/><assign name="dept_category[dept_categoryid]" function="SetSel" expr="%{medicationLst[dept_category]}"/><assign name="type[statuscode]" function="SetSel" expr="%{medicationLst[type]}"/><assign name="status[statuscode]" function="SetSel" expr="%{medicationLst[status]}"/><assign name="opera[user_id]" function="SetSel" expr="%{medicationLst[opera]}"/>
<if cond="'%{medicationid}'"><SetVisible name="insertmedication" Visible="0"/><SetVisible name="modifymedication" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox>
<BR/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_detail_Vvprint.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedication_detail"><Ctrls>
<ListCtrl loadedclick="0" ToolTip="ttp_medication_detail_v" Name="medication_detail_vLst" AutoSizeCol="3" Size="700,220" colsDisplay="11">
	<DbDetails>
<Index>medication_detailid</Index>
<DbTable>mt_cc_b_m</DbTable>
<Data>*</Data>
<Order>medication_detailid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">CALL PrepareMed(1,1);
<EvalTbl rules="" table="medication_detail_vvprint_ops">
<rules><Tables xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\rule/medication_detail_vvprint_ops.xml"><Table name="medication_detail_vvprint_ops"><Inputs><Attr>status</Attr><Value op="1" id="3">300</Value><Value op="1" id="4">301</Value><Value op="1" id="5">302</Value><Value op="1" id="6">303</Value><Value op="1" id="7">304</Value><Value op="1" id="8">305</Value><Value op="1" id="9">306</Value><Value/></Inputs><Inputs><Attr>roleid</Attr><Value/><Value/><Value/><Value/><Value/><Value/><Value/><Value/></Inputs><Outputs><Attr>title</Attr><Value op="1" id="10">prepare</Value><Value op="1" id="11">cabinet_pick;ind_shangdai</Value><Value op="1" id="12">equipment_weight1</Value><Value op="1" id="13">equipment_pos</Value><Value op="1" id="14">equipment_issue</Value><Value op="1" id="15">equipment_weight2</Value><Value op="1" id="16">cabinet_back;ind_fengdai</Value><Value/></Outputs><Outputs><Attr>disabled</Attr><Value op="1" id="17">false</Value><Value op="1" id="17">false</Value><Value op="1" id="17">false</Value><Value op="1" id="17">false</Value><Value op="1" id="17">false</Value><Value op="1" id="17">false</Value><Value op="1" id="17">false</Value><Value op="1" id="17">false</Value></Outputs></Table></Tables></rules>
<inputs status="%{medication_detail_vLst[status]}" roleid="%{role_id}"/>
<outputs title="text" disabled="disabled"/></EvalTbl>
<op text="prepare"><if cond="!%{medicationid}"><alert expr="medicationid is Empty!"/><else/><DbDetails>
<queryFormat>CALL PrepareMed(%{medicationid},%{operaid});</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></if></op>
<op text="cabinet_pick"><submit next="$parent.medi_trans_cabinet.GBDEDITmedi_trans" function="reset"/><DbDetails><Where>medication_detailid='%{medication_detail_vLst[medication_detailid]}'</Where></DbDetails><submit next="$parent.medi_trans_cabinet.medication_detailid" namelist="DbDetails"/><assign name="$parent.medi_trans_cabinet.status" expr="302"/><assign name="$parent.medi_trans_cabinet.frmwndctrl" expr="%{this}"/></op>

<op text="equipment_weight1"><submit next="$parent.medi_trans_equipment.GBDEDITmedi_trans" function="reset"/><DbDetails><Where>medication_detailid='%{medication_detail_vLst[medication_detailid]}'</Where></DbDetails><submit next="$parent.medi_trans_equipment.medication_detailid" namelist="DbDetails"/><assign name="$parent.medi_trans_equipment.status" expr="303"/><assign name="$parent.medi_trans_equipment.frmwndctrl" expr="%{this}"/></op>
<op text="equipment_pos"><submit next="$parent.medi_trans_equipment.GBDEDITmedi_trans" function="reset"/><DbDetails><Where>medication_detailid='%{medication_detail_vLst[medication_detailid]}'</Where></DbDetails><submit next="$parent.medi_trans_equipment.medication_detailid" namelist="DbDetails"/><assign name="$parent.medi_trans_equipment.status" expr="304"/><assign name="$parent.medi_trans_equipment.frmwndctrl" expr="%{this}"/></op>
<op text="equipment_issue"><submit next="$parent.medi_trans_equipment.GBDEDITmedi_trans" function="reset"/><DbDetails><Where>medication_detailid='%{medication_detail_vLst[medication_detailid]}'</Where></DbDetails><submit next="$parent.medi_trans_equipment.medication_detailid" namelist="DbDetails"/><assign name="$parent.medi_trans_equipment.status" expr="305"/><assign name="$parent.medi_trans_equipment.frmwndctrl" expr="%{this}"/></op>
<op text="equipment_weight2"><submit next="$parent.medi_trans_equipment.GBDEDITmedi_trans" function="reset"/><DbDetails><Where>medication_detailid='%{medication_detail_vLst[medication_detailid]}'</Where></DbDetails><submit next="$parent.medi_trans_equipment.medication_detailid" namelist="DbDetails"/><assign name="$parent.medi_trans_equipment.status" expr="306"/><assign name="$parent.medi_trans_equipment.frmwndctrl" expr="%{this}"/></op>

<op text="cabinet_back"><submit next="$parent.medi_trans_cabinet.GBDEDITmedi_trans" function="reset"/><DbDetails><Where>medication_detailid='%{medication_detail_vLst[medication_detailid]}'</Where></DbDetails><submit next="$parent.medi_trans_cabinet.medication_detailid" namelist="DbDetails"/><assign name="$parent.medi_trans_cabinet.status" expr="307"/><assign name="$parent.medi_trans_cabinet.frmwndctrl" expr="%{this}"/></op>
</operator>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertmedication" Visible="1"/><SetVisible name="modifymedication" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_cabinet_Vem.xml" Text="medi_trans_cabinet" Name="medi_trans_cabinet" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="medication_detailid[medication_detailid]"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medi_trans.xml" name="medi_trans">
<Lang name="medi_trans" value="发药日志"/>
<Lang name="medi_trans_v" value="发药日志"/>
<Lang name="TabEditmedi_trans" value="medi_trans Edit"/>
<Lang name="TabViewmedi_trans" value="medi_trans View"/>
<Lang name="medicationid" value="处方"/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="medication_detailid" value="处方药"/>
<Lang name="ttp_medication_detailid" value=""/>
<Lang name="medicineid" value="药品"/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="bottleid" value="药瓶"/>
<Lang name="ttp_bottleid" value=""/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value=""/>
<Lang name="cabinet_cellid" value="药格"/>
<Lang name="ttp_cabinet_cellid" value=""/>
<Lang name="equipmentid" value="药机"/>
<Lang name="ttp_equipmentid" value=""/> 
<Lang name="equipment_posid" value="机位"/>
<Lang name="ttp_equipment_posid" value=""/>
<Lang name="equipment_pos_degree" value="开口角度"/>
<Lang name="ttp_equipment_pos_degree" value=""/>
<Lang name="qtyapply" value="申请量"/>
<Lang name="ttp_qtyapply" value=""/>
<Lang name="qtyrelease" value="发放量"/>
<Lang name="ttp_qtyrelease" value=""/>
<Lang name="weight1" value="上机重量"/>
<Lang name="weight2" value="下机重量"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="transid" value=""/>
<Lang name="ttp_transid" value=""/>
<Lang name="ttp_operationmedi_trans" value=""/>
<Lang name="ttp_createmedi_trans" value=""/>
<Lang name="ttp_modifymedi_trans" value=""/>
<Lang name="ttp_resetmedi_trans" value=""/>
<Lang name="ttp_deletemedi_trans" value=""/>
<Lang name="ttp_refreshmedi_trans" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="medi_trans" Name="GBmedi_trans" id="medi_trans" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_cabinet_GBDEDIT.xml" Name="GBDEDITmedi_trans"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medication_detailid"><Ctrls>
<Label Align="Right" Text="medication_detailid" Name="lb_medication_detailid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medication_detailid" Name="medication_detailid" readonly="true" Size="170,20">
	<DbDetails fcsm="true">
<Index>medication_detailid</Index>
<DbTable>his.mt_cc_b_m</DbTable>
<Data>medicineno,medicineno medicineid,bottleno bottleid,cabinetname cabinetid,cell cabinet_cellid,mqtt_light,pow(2,op_code) op_code,transid,medication_detailid</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineid" Name="medicineid" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" Name="lb_bottleid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottleid" Name="bottleid" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetid"><Ctrls>
<Label Align="Right" Text="cabinetid" Name="lb_cabinetid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cabinetid" Name="cabinetid" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinet_cellid"><Ctrls>
<Label Align="Right" Text="cabinet_cellid" Name="lb_cabinet_cellid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cabinet_cellid" Name="cabinet_cellid" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_transid" Visible="false"><Ctrls>
<Label Align="Right" Text="transid" overlap="pre" Name="lb_transid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_transid" overlap="pre" Name="transid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{transid}'"><SetVisible name="insertmedi_trans" Visible="0"/><SetVisible name="modifymedi_trans" Visible="1"/><else/><SetVisible name="insertmedi_trans" Visible="1"/><SetVisible name="modifymedi_trans" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_status" Visible="false"><Ctrls>
<Label Align="Right" Text="status" overlap="pre" Name="lb_status" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_status" overlap="pre" Name="status" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_cabinet_GBOPEm.xml" cols="xs12 sm6 md4" Name="GBOPEmedi_trans" Size="100,100"><Ctrls>
<Button sqlpkinsert="transid" Text="create" ToolTip="ttp_createmedi_trans" Name="insertmedi_trans" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.medi_trans</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medication_detailid[medication_detailid],status</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertmedi_trans[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medi_transLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medi_trans_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifymedi_trans" Name="modifymedi_trans" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.medi_trans</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medication_detailid[medication_detailid],status</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<Where>transid='%{transid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifymedi_trans[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medi_transLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medi_trans_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetmedi_trans" Name="resetmedi_trans" Size="50,20">
<OnClick>
<submit next="GBDEDITmedi_trans" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchmedi_trans" Name="gsearchmedi_trans" Size="50,20" visible="false">
<OnClick>
<search next="medi_transLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITmedi_trans" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
<Button Text="light" ToolTip="ttp_light_cabinet" Name="light_cabinet" Size="80,20">
<OnClick>
<DbDetails> <DbDatabase>mqtt</DbDatabase> <datatype>mqtt</datatype> <queryFormat>set %{medication_detailid[mqtt_light]}='%{medication_detailid[op_code]}'</queryFormat> </DbDetails><submit namelist="DbDetails"/>	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_cabinet_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedi_trans" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_medi_trans" Name="medi_transLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>transid</Index>
<DbTable>his.medi_trans</DbTable>
<Data>medication_detailid,medicineid,bottleid,cabinetid,cabinet_cellid,opera,uptime,transid,status</Data>
<Order>transid</Order></DbDetails>
<OnClick><assign name="medication_detailid[medication_detailid]" function="SetSel" expr="%{medi_transLst[medication_detailid]}"/><assign name="opera[user_id]" function="SetSel" expr="%{medi_transLst[opera]}"/>
<if cond="'%{transid}'"><SetVisible name="insertmedi_trans" Visible="0"/><SetVisible name="modifymedi_trans" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertmedi_trans" Visible="1"/><SetVisible name="modifymedi_trans" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_equipment_Vem.xml" Text="medi_trans_equipment" Name="medi_trans_equipment" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="medication_detailid[medication_detailid]"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medi_trans.xml" name="medi_trans">
<Lang name="medi_trans" value="发药日志"/>
<Lang name="medi_trans_v" value="发药日志"/>
<Lang name="TabEditmedi_trans" value="medi_trans Edit"/>
<Lang name="TabViewmedi_trans" value="medi_trans View"/>
<Lang name="medicationid" value="处方"/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="medication_detailid" value="处方药"/>
<Lang name="ttp_medication_detailid" value=""/>
<Lang name="medicineid" value="药品"/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="bottleid" value="药瓶"/>
<Lang name="ttp_bottleid" value=""/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value=""/>
<Lang name="cabinet_cellid" value="药格"/>
<Lang name="ttp_cabinet_cellid" value=""/>
<Lang name="equipmentid" value="药机"/>
<Lang name="ttp_equipmentid" value=""/> 
<Lang name="equipment_posid" value="机位"/>
<Lang name="ttp_equipment_posid" value=""/>
<Lang name="equipment_pos_degree" value="开口角度"/>
<Lang name="ttp_equipment_pos_degree" value=""/>
<Lang name="qtyapply" value="申请量"/>
<Lang name="ttp_qtyapply" value=""/>
<Lang name="qtyrelease" value="发放量"/>
<Lang name="ttp_qtyrelease" value=""/>
<Lang name="weight1" value="上机重量"/>
<Lang name="weight2" value="下机重量"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="transid" value=""/>
<Lang name="ttp_transid" value=""/>
<Lang name="ttp_operationmedi_trans" value=""/>
<Lang name="ttp_createmedi_trans" value=""/>
<Lang name="ttp_modifymedi_trans" value=""/>
<Lang name="ttp_resetmedi_trans" value=""/>
<Lang name="ttp_deletemedi_trans" value=""/>
<Lang name="ttp_refreshmedi_trans" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="medi_trans" Name="GBmedi_trans" id="medi_trans" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_equipment_GBDEDIT.xml" Name="GBDEDITmedi_trans"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medication_detailid"><Ctrls>
<Label Align="Right" Text="medication_detailid" Name="lb_medication_detailid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medication_detailid" Name="medication_detailid" readonly="true" Size="170,20">
	<DbDetails fcsm="true">
<Index>medication_detailid</Index>
<DbTable>his.mt_cc_b_m</DbTable>
<Data>medicineno,medicineno medicineid,bottleno bottleid,equipmentname equipmentid,pos_idx equipment_posid,mqtt_pos,mqtt_ind_shangdai,mqtt_ind_fengdai,mqtt_ind_startstop,mqtt_getweight,equipment_pos_degree,jiliang qtyapply,weight1,weight2,mqtt_return_finish,transid,medication_detailid</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineid" Name="medicineid" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" Name="lb_bottleid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottleid" Name="bottleid" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipmentid"><Ctrls>
<Label Align="Right" Text="equipmentid" Name="lb_equipmentid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipmentid" Name="equipmentid" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipment_posid"><Ctrls>
<Label Align="Right" Text="equipment_posid" Name="lb_equipment_posid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipment_posid" Name="equipment_posid" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipment_pos_degree"><Ctrls>
<Label Align="Right" Text="equipment_pos_degree" Name="lb_equipment_pos_degree" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipment_pos_degree" Name="equipment_pos_degree" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_qtyapply"><Ctrls>
<Label Align="Right" Text="qtyapply" Name="lb_qtyapply" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_qtyapply" Name="qtyapply" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_qtyrelease"><Ctrls>
<Label Align="Right" Text="qtyrelease" Name="lb_qtyrelease" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_qtyrelease" Name="qtyrelease" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_transid" Visible="false"><Ctrls>
<Label Align="Right" Text="transid" overlap="pre" Name="lb_transid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_transid" overlap="pre" Name="transid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{transid}'"><SetVisible name="insertmedi_trans" Visible="0"/><SetVisible name="modifymedi_trans" Visible="1"/><else/><SetVisible name="insertmedi_trans" Visible="1"/><SetVisible name="modifymedi_trans" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_weight1"><Ctrls>
<Label Align="Right" Text="weight1" Name="lb_weight1" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_weight1" Name="weight1" Size="150,20"/>
<MagicCtrl Name="refreshweight1" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><DbDetails> <DbDatabase>mqtt</DbDatabase> <datatype>mqtt</datatype> <queryFormat>set %{medication_detailid[mqtt_getweight]}='acquire'</queryFormat> </DbDetails><submit next="weight1" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_weight2"><Ctrls>
<Label Align="Right" Text="weight2" Name="lb_weight2" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_weight2" Name="weight2" Size="150,20"><OnEnChange><if cond="'%{weight2}'"><assign name="qtyrelease" expr="js(%{weight1}-%{weight2})"/></if></OnEnChange></TextBox>
<MagicCtrl Name="refreshweight2" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><DbDetails> <DbDatabase>mqtt</DbDatabase> <datatype>mqtt</datatype> <queryFormat>set %{medication_detailid[mqtt_getweight]}='acquire'</queryFormat> </DbDetails><submit next="weight2" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_status" Visible="false"><Ctrls>
<Label Align="Right" Text="status" overlap="pre" Name="lb_status" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_status" overlap="pre" Name="status" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_status"><Ctrls> <Button Weight="100" text="ind_startstop" Name="ind_startstop" Size="100,20"><OnClick><DbDetails> <DbDatabase>mqtt</DbDatabase> <datatype>mqtt</datatype> <queryFormat>set %{medication_detailid[mqtt_ind_startstop]}='1'</queryFormat> </DbDetails><submit namelist="DbDetails"/></OnClick></Button></Ctrls></GroupBox></Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_equipment_GBOPEm.xml" cols="xs12 sm6 md4" Name="GBOPEmedi_trans" Size="100,100"><Ctrls>
<Button sqlpkinsert="transid" Text="create" ToolTip="ttp_createmedi_trans" Name="insertmedi_trans" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.medi_trans</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medication_detailid[medication_detailid],qtyapply,qtyrelease,weight1,weight2,status</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertmedi_trans[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medi_transLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medi_trans_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifymedi_trans" Name="modifymedi_trans" Size="50,20">
<OnClick><alert expr="test!"/><if cond="((%{status}==303) && !'%{weight1}')"><alert expr="%{lb_weight1} is Empty!"/><elseif cond="((%{status}==306) && !'%{weight2}')"/><alert expr="%{lb_weight2} is Empty!"/><else/>
<DbDetails mode="update" fcsm="1">
<DbTable>his.medi_trans</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medication_detailid[medication_detailid],qtyapply,qtyrelease,weight1,weight2,status</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<Where>transid='%{transid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/></if><if cond="!%{modifymedi_trans[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medi_transLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medi_trans_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetmedi_trans" Name="resetmedi_trans" Size="50,20">
<OnClick>
<submit next="GBDEDITmedi_trans" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchmedi_trans" Name="gsearchmedi_trans" Size="50,20" visible="false">
<OnClick>
<search next="medi_transLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITmedi_trans" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_equipment_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedi_trans" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_medi_trans" Name="medi_transLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>transid</Index>
<DbTable>his.medi_trans</DbTable>
<Data>medication_detailid,medicineid,bottleid,equipmentid,equipment_posid,equipment_pos_degree,qtyapply,qtyrelease,opera,uptime,transid,weight1,weight2,status</Data>
<Order>transid</Order></DbDetails>
<OnClick><assign name="medication_detailid[medication_detailid]" function="SetSel" expr="%{medi_transLst[medication_detailid]}"/><assign name="opera[user_id]" function="SetSel" expr="%{medi_transLst[opera]}"/>
<if cond="'%{transid}'"><SetVisible name="insertmedi_trans" Visible="0"/><SetVisible name="modifymedi_trans" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertmedi_trans" Visible="1"/><SetVisible name="modifymedi_trans" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_pick.xml" Text="medicine_info_Pick" Name="medicine_info_pick" popup="1">
<var name="searchtmpl"><medicineno format="(m.medicineno like '%%{opvalue}%')"/><medicinenocn format="(m.medicinenocn like '%%{opvalue}%')"/><medicinenopy format="(m.medicinenopy like '%%{opvalue}%')"/><packno format="(m.packno like '%%{opvalue}%')"/><medicinecode format="(m.medicinecode like '%%{opvalue}%')"/><density format="(m.density like '%%{opvalue}%')"/><equivalent format="(m.equivalent like '%%{opvalue}%')"/><price format="(m.price like '%%{opvalue}%')"/><warningval_jiliang format="(m.warningval_jiliang like '%%{opvalue}%')"/><warningval_stock format="(m.warningval_stock like '%%{opvalue}%')"/><warningval_cabinet format="(m.warningval_cabinet like '%%{opvalue}%')"/><ispoison format="m.ispoison is %{opvalue}"/><isanesthetic format="m.isanesthetic is %{opvalue}"/><medicineid format="(m.medicineid like '%%{opvalue}%')"/><opera format="m.opera='%{opvalue}'"/><uptime format="(m.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><isdel format="m.isdel is %{opvalue}"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medicine_info.xml" name="medicine_info">
<Lang name="medicine_info" value="药品信息"/>
<Lang name="medicine_info_v" value="药品信息"/>
<Lang name="TabEditmedicine_info" value="medicine_info Edit"/>
<Lang name="TabViewmedicine_info" value="medicine_info View"/>
<Lang name="medicineno" value="药品编号"/>
<Lang name="ttp_medicineno" value="药品编号"/>
<Lang name="medicinecode" value="HIS药品编号"/>
<Lang name="ttp_medicinecode" value="HIS药品编号"/>
<Lang name="medicinenocn" value="药名中文"/>
<Lang name="ttp_medicinenocn" value="药名中文"/>
<Lang name="medicinenopy" value="药名拼音"/>
<Lang name="ttp_medicinenopy" value="药名拼音"/>
<Lang name="packno" value="包装码"/>
<Lang name="ttp_packno" value="包装码"/>
<Lang name="density" value="密度"/>
<Lang name="ttp_density" value=""/>
<Lang name="equivalent" value="当量"/>
<Lang name="ttp_equivalent" value=""/>
<Lang name="currentqty" value="当前数量"/>
<Lang name="ttp_currentqty" value="当前数量"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="warningval_jiliang" value="剂量上限"/>
<Lang name="ttp_warningval_jiliang" value=""/>
<Lang name="warningval_stock" value="库存安全值"/>
<Lang name="ttp_warningval_stock" value="库存安全值"/>
<Lang name="warningval_cabinet" value="药柜安全值"/>
<Lang name="ttp_warningval_cabinet" value="药柜安全值"/>
<Lang name="warning_validdays" value="有效期报警值"/>
<Lang name="ttp_warning_validdays" value="有效期报警值"/>
<Lang name="publicqty" value=""/>
<Lang name="ttp_publicqty" value=""/>
<Lang name="ispoison" value="毒药"/>
<Lang name="ttp_ispoison" value="毒药"/>
<Lang name="isanesthetic" value="麻药"/>
<Lang name="ttp_isanesthetic" value="麻药"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value="SEQ"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="ttp_operationmedicine_info" value=""/>
<Lang name="ttp_createmedicine_info" value=""/>
<Lang name="ttp_modifymedicine_info" value=""/>
<Lang name="ttp_resetmedicine_info" value=""/>
<Lang name="ttp_deletemedicine_info" value=""/>
<Lang name="ttp_refreshmedicine_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="medicine_info" Name="GBmedicine_info" id="medicine_info" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Vs.xml" text="Search" toggle="1" Name="GBDEDITmedicine_info"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineno"><Ctrls>
<Label Align="Right" Text="medicineno" Name="lb_medicineno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" Name="medicineno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenocn"><Ctrls>
<Label Align="Right" Text="medicinenocn" Name="lb_medicinenocn" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenocn" Name="medicinenocn" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenopy"><Ctrls>
<Label Align="Right" Text="medicinenopy" Name="lb_medicinenopy" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenopy" Name="medicinenopy" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVmedicine_info" Size="100,20"><Ctrls>
<Button Text="reset" ToolTip="ttp_resetmedicine_info" Name="resetmedicine_info" Size="50,20">	<OnClick>	<submit next="GBDEDITmedicine_info" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchmedicine_info" Name="gsearchmedicine_info" Size="50,20">	<OnClick>	
<search next="medicine_info_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedicine_info" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm12 md12 lg12" Name="GBDVmedicine_info"><Ctrls>
<ListCtrl Heading="medicineno,250;medicinenocn,250;medicinenopy,250;packno,250;medicinecode,250;density,50;equivalent,55;price,90;warningval_jiliang,90;warningval_stock,25;warningval_cabinet,25;ispoison,60;isanesthetic,60;medicineid,55;opera,55;uptime,150;isdel,60;" loadedclick="0" ToolTip="ttp_medicine_info_v" Name="medicine_info_vLst" Size="700,450">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info m left join his.users u on m.opera=u.user_id</DbTable>
<Data>m.medicineno,m.medicinenocn,m.medicinenopy,m.packno,m.medicinecode,m.density,m.equivalent,m.price,m.warningval_jiliang,m.warningval_stock,m.warningval_cabinet,m.ispoison,m.isanesthetic,m.medicineid,u.user_name opera,m.uptime,m.isdel</Data>
<Order>medicineid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<OnClick><if cond="%{medicine_info_vLst[medicineid]}"><DbDetails><Where>medicineid='%{medicine_info_vLst[medicineid]}'</Where></DbDetails><submit next="$parent.%{frmwndctrl}" namelist="DbDetails"/><submit function="onok"/></if></OnClick>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
</WndTaps>
<var name="searchtmpl"><medication_no format="(m.medication_no like '%%{opvalue}%')"/><jici format="(m.jici like '%%{opvalue}%')"/><dispensaryid format="m.dispensaryid='%{opvalue}'"/><kebie_name format="(m.kebie_name like '%%{opvalue}%')"/><doctor_no format="(m.doctor_no like '%%{opvalue}%')"/><doctory_diagnosis format="(m.doctory_diagnosis like '%%{opvalue}%')"/><doctory_medicineprescript format="(m.doctory_medicineprescript like '%%{opvalue}%')"/><doctory_medicinefundesc format="(m.doctory_medicinefundesc like '%%{opvalue}%')"/><doctory_usemethod format="(m.doctory_usemethod like '%%{opvalue}%')"/><danji_price format="(m.danji_price like '%%{opvalue}%')"/><total_price format="(m.total_price like '%%{opvalue}%')"/><patient_name format="(m.patient_name like '%%{opvalue}%')"/><patient_sex format="(m.patient_sex like '%%{opvalue}%')"/><patient_age format="(m.patient_age like '%%{opvalue}%')"/><patient_phoneno format="(m.patient_phoneno like '%%{opvalue}%')"/><patient_fresh format="m.patient_fresh is %{opvalue}"/><patient_address format="(m.patient_address like '%%{opvalue}%')"/><patient_fallill_time format="(m.patient_fallill_time between '%{patient_fallill_time[datetime]}' and '%{patient_fallill_time[datetime2]}')"/><patient_intime format="(m.patient_intime between '%{patient_intime[datetime]}' and '%{patient_intime[datetime2]}')"/><patient_allergy format="(m.patient_allergy like '%%{opvalue}%')"/><patient_historyilldes format="(m.patient_historyilldes like '%%{opvalue}%')"/><patient_illshow format="(m.patient_illshow like '%%{opvalue}%')"/><status format="m.status='%{opvalue}'"/><opera format="m.opera='%{opvalue}'"/><uptime format="(m.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><medicationid format="(m.medicationid like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medication.xml" name="medication">
<Lang name="medication" value="处方"/>
<Lang name="patient" value="病人信息"/>
<Lang name="medication_v" value="处方"/>
<Lang name="TabEditmedication" value="medication Edit"/>
<Lang name="TabViewmedication" value="medication View"/>
<Lang name="medication_no" value="处方号"/>
<Lang name="ttp_medication_no" value="处方号"/>
<Lang name="jici" value="剂次"/>
<Lang name="ttp_jici" value="剂次"/>
<Lang name="dispensaryid" value=""/>
<Lang name="ttp_dispensaryid" value=""/>
<Lang name="dept_category" value="科别"/>
<Lang name="ttp_dept_category" value="科别"/>
<Lang name="type" value="处方类型"/>
<Lang name="ttp_type" value="处方类型"/>
<Lang name="doctor_no" value="医生"/>
<Lang name="ttp_doctor_no" value="医生"/>
<Lang name="doctory_diagnosis" value="诊断"/>
<Lang name="ttp_doctory_diagnosis" value="诊断"/>
<Lang name="doctory_medicineprescript" value="药方"/>
<Lang name="ttp_doctory_medicineprescript" value="药方"/>
<Lang name="doctory_medicinefundesc" value="药效"/>
<Lang name="ttp_doctory_medicinefundesc" value="药效"/>
<Lang name="doctory_usemethod" value="使用方法"/>
<Lang name="ttp_doctory_usemethod" value="使用方法"/>
<Lang name="danji_price" value="单剂价格"/>
<Lang name="ttp_danji_price" value="单剂价格"/>
<Lang name="total_price" value="总价"/>
<Lang name="ttp_total_price" value="总价"/>
<Lang name="patient_name" value="姓名"/>
<Lang name="ttp_patient_name" value="姓名"/>
<Lang name="patient_sex" value="性别"/>
<Lang name="ttp_patient_sex" value="性别"/>
<Lang name="patient_age" value="年龄"/>
<Lang name="ttp_patient_age" value="年龄"/>
<Lang name="patient_phoneno" value="电话"/>
<Lang name="ttp_patient_phoneno" value="电话"/>
<Lang name="patient_fresh" value="是否首次"/>
<Lang name="ttp_patient_fresh" value="是否首次"/>
<Lang name="patient_address" value="地址"/>
<Lang name="ttp_patient_address" value="地址"/>
<Lang name="patient_fallill_time" value="生病时间"/>
<Lang name="ttp_patient_fallill_time" value="生病时间"/>
<Lang name="patient_intime" value="看病时间"/>
<Lang name="ttp_patient_intime" value="看病时间"/>
<Lang name="patient_allergy" value="过敏史"/>
<Lang name="ttp_patient_allergy" value="过敏史"/>
<Lang name="patient_historyilldes" value="病史"/>
<Lang name="ttp_patient_historyilldes" value="病史"/>
<Lang name="patient_illshow" value="病表现"/>
<Lang name="ttp_patient_illshow" value="病表现"/>
<Lang name="status" value="状态"/>
<Lang name="ttp_status" value="状态"/>
<Lang name="opera" value="操作人"/>
<Lang name="ttp_opera" value="操作人"/>
<Lang name="uptime" value="更新时间"/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="medicationid" value=""/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="ttp_operationmedication" value=""/>
<Lang name="ttp_createmedication" value=""/>
<Lang name="ttp_modifymedication" value=""/>
<Lang name="ttp_resetmedication" value=""/>
<Lang name="ttp_deletemedication" value=""/>
<Lang name="ttp_refreshmedication" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="medication" Name="GBmedication" id="medication" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_Vsm.xml" text="Search" toggle="1" Name="GBDEDITmedication"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medication_no"><Ctrls>
<Label Align="Right" Text="medication_no" Name="lb_medication_no" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medication_no" Name="medication_no" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dispensaryid"><Ctrls>
<Label Align="Right" Text="dispensaryid" onload="init" Name="lb_dispensaryid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_dispensaryid" onload="init" Name="dispensaryid" Size="150,100">
	<DbDetails>
<Index>dispensaryid</Index>
<DbTable>his.dispensary</DbTable>
<Data>dispensaryname,dispensaryid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshdispensaryid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="dispensaryid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dept_category"><Ctrls>
<Label Align="Right" Text="dept_category" onload="init" Name="lb_dept_category" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_dept_category" onload="init" Name="dept_category" Size="150,100">
	<DbDetails>
<Index>dept_categoryid</Index>
<DbTable>his.dept_category</DbTable>
<Data>dept_categoryname,dept_categoryid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshdept_category" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="dept_category"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_doctor_no"><Ctrls>
<Label Align="Right" Text="doctor_no" Name="lb_doctor_no" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_doctor_no" Name="doctor_no" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_patient_name"><Ctrls>
<Label Align="Right" Text="patient_name" Name="lb_patient_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_patient_name" Name="patient_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_status"><Ctrls>
<Label Align="Right" Text="status" onload="init" Name="lb_status" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_status" onload="init" Name="status" Size="170,100">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=2</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox></Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVmedication" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.medication.GBDEDITmedication" function="reset"/><assign name="$this.medication.frmwndctrl" expr="%{$this.medication_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetmedication" Name="resetmedication" Size="50,20">	<OnClick>	<submit next="GBDEDITmedication" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchmedication" Name="gsearchmedication" Size="50,20">	<OnClick>	
<search next="medication_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedication" namelist="search" function="search"/>	
<search next="records_medication" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedication" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGmedication"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_medication" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>medicationid</Index>
<DbTable>his.medication m left join his.dispensary d on m.dispensaryid=d.dispensaryid left join his.dept_category d0 on m.dept_category=d0.dept_categoryid left join his.status_option s on m.type=s.statuscode left join his.status_option s0 on m.status=s0.statuscode left join his.users u on m.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>medicationid</Order><Queryformat>select %{data} from (select m.medicationid from %{dbtable} %{where} GROUP BY m.medicationid  ORDER BY m.medicationid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_medication" expr="js(Math.ceil(%{records_medication}/%{medication_vLst[countsperpage]}))"/>
<assign name="pgscb_medication" function="setitems" expr="js('1~'+Math.ceil(%{records_medication}/%{medication_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_medication" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_medication" Size="30,20"/>
<Button Text="go2Page" Name="go2pagemedication_vLst" Size="50,20"><OnClick><submit next="medication_vLst" function="GetPage(%{pgcur_medication}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVmedication"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialmedication" Size="50,20">
<OnClick><submit next="medication_vLst" function="initial"/><submit next="records_medication" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPmedication_vLst" Size="50,20">
<OnClick><submit next="medication_vLst" function="GetPage(first)"/><submit next="records_medication"/></OnClick></Button>
<Button Text="prepage" Name="PREmedication_vLst" Size="50,20">
<OnClick><submit next="medication_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPmedication_vLst" Size="50,20">
<OnClick><submit next="medication_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedication"><Ctrls>
<ListCtrl Heading="medication_no,150;jici,25;dispensaryid,120;dept_category,120;type,120;status,120;doctor_no,250;doctory_diagnosis,500;doctory_medicineprescript,500;doctory_medicinefundesc,500;doctory_usemethod,500;total_price,50;patient_name,250;patient_sex,25;patient_age,20;patient_fresh,60;patient_phoneno,100;patient_fallill_time,150;patient_address,250;patient_intime,150;patient_allergy,500;patient_historyilldes,500;patient_illshow,500;opera,55;uptime,150;medicationid,100;" loadedclick="0" ToolTip="ttp_medication_v" OnLoad="init" Name="medication_vLst" Size="700,450" colsDisplay="7">
	<DbDetails>
<Index>medicationid</Index>
<DbTable>his.medication m left join his.dispensary d on m.dispensaryid=d.dispensaryid left join his.dept_category d0 on m.dept_category=d0.dept_categoryid left join his.status_option s on m.type=s.statuscode left join his.status_option s0 on m.status=s0.statuscode left join his.users u on m.opera=u.user_id</DbTable>
<Data>m.medication_no,m.jici,d.dispensaryname dispensaryid,d0.dept_categoryname dept_category,s.statusname type,s0.statusname status,m.doctor_no,m.doctory_diagnosis,m.doctory_medicineprescript,m.doctory_medicinefundesc,m.doctory_usemethod,m.total_price,m.patient_name,m.patient_sex,m.patient_age,m.patient_fresh,m.patient_phoneno,m.patient_fallill_time,m.patient_address,m.patient_intime,m.patient_allergy,m.patient_historyilldes,m.patient_illshow,u.user_name opera,m.uptime,m.medicationid,m.status statusid</Data>
<Order>medicationid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<operator xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medication_ops.xml" firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<EvalTbl rules="" table="medication_ops">
<rules><Tables xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\rule/medication_ops.xml"><Table name="medication_ops"><Inputs><Attr>status</Attr><Value op="1" id="3,4">200|201</Value><Value op="64" id="5">204,207</Value><Value op="1" id="3,4">200|201</Value><Value op="64" id="5">204,207</Value><Value op="1" id="6,7">202|203</Value><Value/></Inputs><Inputs><Attr>layid</Attr><Value op="1" id="8">3</Value><Value op="1" id="9">2</Value><Value op="1" id="10">1</Value><Value op="1" id="10">1</Value><Value/><Value/></Inputs><Outputs><Attr>title</Attr><Value op="1" id="11">delete;modify;check</Value><Value op="1" id="12">issue;</Value><Value op="1" id="11">delete;modify;check</Value><Value op="1" id="12">issue;</Value><Value op="1" id="13">check;</Value><Value op="1" id="14">;</Value></Outputs><Outputs><Attr>disabled</Attr><Value op="1" id="15">false</Value><Value op="1" id="15">false</Value><Value op="1" id="15">false</Value><Value op="1" id="15">false</Value><Value op="1" id="15">false</Value><Value op="1" id="15">false</Value></Outputs></Table></Tables></rules>
<inputs status="%{medication_vLst[statusid]}" layid="%{layid}"/>
<outputs title="text" disabled="disabled"/></EvalTbl>
<op text="check" needconfirm="1"><DbDetails>
<DbTable>his.medication</DbTable>
<Where>medicationid='%{medication_vLst[medicationid]}'</Where>
<queryFormat>UPDATE medication m LEFT JOIN md_mc_ctrl c ON m.medicationid=c.medicationid SET m.status=204 WHERE m.%{where} AND c.controlid IS null</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
<op text="issue"><DbDetails><Where>medicationid='%{medication_vLst[medicationid]}'</Where></DbDetails><submit next="$this.medication_print.medicationLst" namelist="DbDetails"/><assign name="$this.medication_print.frmwndctrl" expr="%{this}"/></op>
<op text="modify"><DbDetails><Where>medicationid='%{medication_vLst[medicationid]}'</Where></DbDetails><submit next="$this.medication.medicationLst" namelist="DbDetails"/><assign name="$this.medication.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.medication</DbTable>
<Where>medicationid='%{medication_vLst[medicationid]}'</Where>
<queryFormat>update %{table} set isdel=1 where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_medication" expr="js(%{medication_vLst[currentpage]}+1)"/>
<assign name="pgscb_medication" function="SetSel" expr="js(%{medication_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_vm.xml" Text="bottle_transaction_v" Name="bottle_transaction_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_Ve.xml" Text="bottle_transaction" Name="bottle_transaction" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="bottleid[bottleid],medicineid[medicineid]"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\bottle_transaction.xml" name="bottle_transaction">
<Lang name="bottle_transaction" value="药瓶日志"/>
<Lang name="bottle_transaction_v" value="药瓶日志"/>
<Lang name="TabEditbottle_transaction" value="bottle_transaction Edit"/>
<Lang name="TabViewbottle_transaction" value="bottle_transaction View"/>

</Language>
<Ctrls>
<GroupBox Text="bottle_transaction" Name="GBbottle_transaction" id="bottle_transaction" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_GBDEDIT.xml" Name="GBDEDITbottle_transaction"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" onload="init" Name="lb_bottleid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_bottleid" onload="init" Name="bottleid" Size="150,100">
	<DbDetails>
<Index>bottleid</Index>
<DbTable>his.bottle_info</DbTable>
<Data>bottleno,bottleid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshbottleid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="bottleid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" onload="init" Name="lb_medicineid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_medicineid" onload="init" Name="medicineid" Size="150,100">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshmedicineid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="medicineid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_uses_flag"><Ctrls>
<Label Align="Right" Text="uses_flag" onload="init" Name="lb_uses_flag" readonly="true" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_uses_flag" onload="init" Name="uses_flag" readonly="true" Size="170,100">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=1</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_weight_cur" Visible="false"><Ctrls>
<Label Align="Right" Text="weight_cur" overlap="pre" Name="lb_weight_cur" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_weight_cur" overlap="pre" Name="weight_cur" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_reftbl" Visible="false"><Ctrls>
<Label Align="Right" Text="reftbl" overlap="pre" Name="lb_reftbl" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_reftbl" overlap="pre" Name="reftbl" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_refid" Visible="false"><Ctrls>
<Label Align="Right" Text="refid" overlap="pre" Name="lb_refid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_refid" overlap="pre" Name="refid" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_bottle_transactionid" Visible="false"><Ctrls>
<Label Align="Right" Text="bottle_transactionid" overlap="pre" Name="lb_bottle_transactionid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottle_transactionid" overlap="pre" Name="bottle_transactionid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{bottle_transactionid}'"><SetVisible name="insertbottle_transaction" Visible="0"/><SetVisible name="modifybottle_transaction" Visible="1"/><else/><SetVisible name="insertbottle_transaction" Visible="1"/><SetVisible name="modifybottle_transaction" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEbottle_transaction" Size="100,100"><Ctrls>
<Button sqlpkinsert="bottle_transactionid" Text="create" ToolTip="ttp_createbottle_transaction" Name="insertbottle_transaction" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.bottle_transaction</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleid[bottleid],medicineid[medicineid],uses_flag[statuscode],reftbl,refid</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertbottle_transaction[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_transactionLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_transaction_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifybottle_transaction" Name="modifybottle_transaction" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.bottle_transaction</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleid[bottleid],medicineid[medicineid],uses_flag[statuscode],reftbl,refid</Data>
<DataEx>uptime;now()</DataEx>
<Where>bottle_transactionid='%{bottle_transactionid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifybottle_transaction[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_transactionLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_transaction_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetbottle_transaction" Name="resetbottle_transaction" Size="50,20">
<OnClick>
<submit next="GBDEDITbottle_transaction" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchbottle_transaction" Name="gsearchbottle_transaction" Size="50,20" visible="false">
<OnClick>
<search next="bottle_transactionLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITbottle_transaction" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVbottle_transaction" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_bottle_transaction" Name="bottle_transactionLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>bottle_transactionid</Index>
<DbTable>his.bottle_transaction</DbTable>
<Data>bottleid,medicineid,uses_flag,weight_cur,opera,uptime,reftbl,refid,bottle_transactionid</Data>
<Order>bottle_transactionid</Order></DbDetails>
<OnClick><assign name="bottleid[bottleid]" function="SetSel" expr="%{bottle_transactionLst[bottleid]}"/><assign name="medicineid[medicineid]" function="SetSel" expr="%{bottle_transactionLst[medicineid]}"/><assign name="uses_flag[statuscode]" function="SetSel" expr="%{bottle_transactionLst[uses_flag]}"/><assign name="opera[user_id]" function="SetSel" expr="%{bottle_transactionLst[opera]}"/>
<if cond="'%{bottle_transactionid}'"><SetVisible name="insertbottle_transaction" Visible="0"/><SetVisible name="modifybottle_transaction" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertbottle_transaction" Visible="1"/><SetVisible name="modifybottle_transaction" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><bottleid format="b.bottleid='%{opvalue}'"/><medicineid format="b.medicineid='%{opvalue}'"/><uses_flag format="b.uses_flag='%{opvalue}'"/><weight_cur format="(b.weight_cur like '%%{opvalue}%')"/><opera format="b.opera='%{opvalue}'"/><uptime format="(b.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><reftbl format="(b.reftbl like '%%{opvalue}%')"/><refid format="(b.refid like '%%{opvalue}%')"/><bottle_transactionid format="(b.bottle_transactionid like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\bottle_transaction.xml" name="bottle_transaction">
<Lang name="bottle_transaction" value="药瓶日志"/>
<Lang name="bottle_transaction_v" value="药瓶日志"/>
<Lang name="TabEditbottle_transaction" value="bottle_transaction Edit"/>
<Lang name="TabViewbottle_transaction" value="bottle_transaction View"/>

</Language>
<Ctrls><GroupBox Text="bottle_transaction" Name="GBbottle_transaction" id="bottle_transaction" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_Vs.xml" text="Search" toggle="1" Name="GBDEDITbottle_transaction"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" onload="init" Name="lb_bottleid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_bottleid" onload="init" Name="bottleid" Size="150,100">
	<DbDetails>
<Index>bottleid</Index>
<DbTable>his.bottle_info</DbTable>
<Data>bottleno,bottleid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshbottleid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="bottleid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" onload="init" Name="lb_medicineid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_medicineid" onload="init" Name="medicineid" Size="150,100">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshmedicineid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="medicineid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_uses_flag"><Ctrls>
<Label Align="Right" Text="uses_flag" onload="init" Name="lb_uses_flag" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_uses_flag" onload="init" Name="uses_flag" Size="170,100">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=1</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVbottle_transaction" Size="100,20"><Ctrls>
<Button Text="reset" ToolTip="ttp_resetbottle_transaction" Name="resetbottle_transaction" Size="50,20">	<OnClick>	<submit next="GBDEDITbottle_transaction" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchbottle_transaction" Name="gsearchbottle_transaction" Size="50,20">	<OnClick>	
<search next="bottle_transaction_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITbottle_transaction" namelist="search" function="search"/>	
<search next="records_bottle_transaction" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITbottle_transaction" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGbottle_transaction"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_bottle_transaction" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>bottle_transactionid</Index>
<DbTable>his.bottle_transaction b left join his.bottle_info b0 on b.bottleid=b0.bottleid left join his.medicine_info m on b.medicineid=m.medicineid left join his.status_option s on b.uses_flag=s.statuscode left join his.users u on b.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>bottle_transactionid</Order><Queryformat>select %{data} from (select b.bottle_transactionid from %{dbtable} %{where} GROUP BY b.bottle_transactionid  ORDER BY b.bottle_transactionid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_bottle_transaction" expr="js(Math.ceil(%{records_bottle_transaction}/%{bottle_transaction_vLst[countsperpage]}))"/>
<assign name="pgscb_bottle_transaction" function="setitems" expr="js('1~'+Math.ceil(%{records_bottle_transaction}/%{bottle_transaction_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_bottle_transaction" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_bottle_transaction" Size="30,20"/>
<Button Text="go2Page" Name="go2pagebottle_transaction_vLst" Size="50,20"><OnClick><submit next="bottle_transaction_vLst" function="GetPage(%{pgcur_bottle_transaction}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVbottle_transaction"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialbottle_transaction" Size="50,20">
<OnClick><submit next="bottle_transaction_vLst" function="initial"/><submit next="records_bottle_transaction" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPbottle_transaction_vLst" Size="50,20">
<OnClick><submit next="bottle_transaction_vLst" function="GetPage(first)"/><submit next="records_bottle_transaction"/></OnClick></Button>
<Button Text="prepage" Name="PREbottle_transaction_vLst" Size="50,20">
<OnClick><submit next="bottle_transaction_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPbottle_transaction_vLst" Size="50,20">
<OnClick><submit next="bottle_transaction_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVbottle_transaction"><Ctrls>
<ListCtrl Heading="bottleid,120;medicineid,120;uses_flag,120;weight_cur,90;opera,55;uptime,150;reftbl,250;refid,100;bottle_transactionid,100;" loadedclick="0" ToolTip="ttp_bottle_transaction_v" OnLoad="init" Name="bottle_transaction_vLst" Size="700,450" colsDisplay="6">
	<DbDetails>
<Index>bottle_transactionid</Index>
<DbTable>his.bottle_transaction b left join his.bottle_info b0 on b.bottleid=b0.bottleid left join his.medicine_info m on b.medicineid=m.medicineid left join his.status_option s on b.uses_flag=s.statuscode left join his.users u on b.opera=u.user_id</DbTable>
<Data>b0.bottleno bottleid,m.medicinenocn medicineid,s.statusname uses_flag,b.weight_cur,u.user_name opera,b.uptime,b.reftbl,b.refid,b.bottle_transactionid</Data>
<Order>bottle_transactionid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>bottle_transactionid='%{bottle_transaction_vLst[bottle_transactionid]}'</Where></DbDetails><submit next="$this.bottle_transaction.bottle_transactionLst" namelist="DbDetails"/><assign name="$this.bottle_transaction.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.bottle_transaction</DbTable>
<Where>bottle_transactionid='%{bottle_transaction_vLst[bottle_transactionid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_bottle_transaction" expr="js(%{bottle_transaction_vLst[currentpage]}+1)"/>
<assign name="pgscb_bottle_transaction" function="SetSel" expr="js(%{bottle_transaction_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_vm.xml" Text="medi_trans_v" Name="medi_trans_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_Ve.xml" Text="medi_trans" Name="medi_trans" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medi_trans.xml" name="medi_trans">
<Lang name="medi_trans" value="发药日志"/>
<Lang name="medi_trans_v" value="发药日志"/>
<Lang name="TabEditmedi_trans" value="medi_trans Edit"/>
<Lang name="TabViewmedi_trans" value="medi_trans View"/>
<Lang name="medicationid" value="处方"/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="medication_detailid" value="处方药"/>
<Lang name="ttp_medication_detailid" value=""/>
<Lang name="medicineid" value="药品"/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="bottleid" value="药瓶"/>
<Lang name="ttp_bottleid" value=""/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value=""/>
<Lang name="cabinet_cellid" value="药格"/>
<Lang name="ttp_cabinet_cellid" value=""/>
<Lang name="equipmentid" value="药机"/>
<Lang name="ttp_equipmentid" value=""/> 
<Lang name="equipment_posid" value="机位"/>
<Lang name="ttp_equipment_posid" value=""/>
<Lang name="equipment_pos_degree" value="开口角度"/>
<Lang name="ttp_equipment_pos_degree" value=""/>
<Lang name="qtyapply" value="申请量"/>
<Lang name="ttp_qtyapply" value=""/>
<Lang name="qtyrelease" value="发放量"/>
<Lang name="ttp_qtyrelease" value=""/>
<Lang name="weight1" value="上机重量"/>
<Lang name="weight2" value="下机重量"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="transid" value=""/>
<Lang name="ttp_transid" value=""/>
<Lang name="ttp_operationmedi_trans" value=""/>
<Lang name="ttp_createmedi_trans" value=""/>
<Lang name="ttp_modifymedi_trans" value=""/>
<Lang name="ttp_resetmedi_trans" value=""/>
<Lang name="ttp_deletemedi_trans" value=""/>
<Lang name="ttp_refreshmedi_trans" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="medi_trans" Name="GBmedi_trans" id="medi_trans" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_GBDEDIT.xml" Name="GBDEDITmedi_trans"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicationid"><Ctrls>
<Label Align="Right" Text="medicationid" onload="init" Name="lb_medicationid" Size="60,20" selectedIndex="0"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_medicationid" onload="init" Name="medicationid" Size="150,100" selectedIndex="0">
	<DbDetails>
<Index>medicationid</Index>
<DbTable>his.medication</DbTable>
<Data>medication_no,medicationid</Data>
<Where/>
<queryFormat/></DbDetails><OnSelEndOk><submit next="medication_detailid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshmedicationid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="medicationid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medication_detailid"><Ctrls>
<Label Align="Right" Text="medication_detailid" Name="lb_medication_detailid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_medication_detailid" Name="medication_detailid" Size="150,100">
	<DbDetails>
<Index>medication_detailid</Index>
<DbTable>his.medication_detail</DbTable>
<Data>medicineno,medicineid,medication_detailid</Data>
<Where>medicationid='%{medicationid[medicationid]}'</Where>
<queryFormat/></DbDetails><OnSelEndOk><submit next="medicineid"/><submit next="bottleid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshmedication_detailid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="medication_detailid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="150,100">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineid</Data>
<Where>medicineid='%{medication_detailid[medicineid]}'</Where>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshmedicineid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="medicineid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" Name="lb_bottleid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_bottleid" Name="bottleid" Size="150,100">
	<DbDetails>
<Index>bottleid</Index>
<DbTable>his.bottle_info</DbTable>
<Data>bottleno,bottleid</Data>
<Where>medicineid='%{medication_detailid[medicineid]}'</Where>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshbottleid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="bottleid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetid"><Ctrls>
<Label Align="Right" Text="cabinetid" onload="init" Name="lb_cabinetid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_cabinetid" onload="init" Name="cabinetid" Size="150,100">
	<DbDetails>
<Index>cabinetid</Index>
<DbTable>his.cabinet</DbTable>
<Data>cabinetname,cabinetid</Data>
<Where/>
<queryFormat/></DbDetails><OnSelEndOk><submit next="cabinet_cellid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshcabinetid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="cabinetid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinet_cellid"><Ctrls>
<Label Align="Right" Text="cabinet_cellid" Name="lb_cabinet_cellid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_cabinet_cellid" Name="cabinet_cellid" Size="150,100">
	<DbDetails>
<Index>cellid</Index>
<DbTable>his.cabinet_cell</DbTable>
<Data>concat(cell_row,'-',cell_col),cellid</Data>
<Where>cabinetid='%{cabinetid}'</Where>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshcabinet_cellid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="cabinet_cellid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipmentid"><Ctrls>
<Label Align="Right" Text="equipmentid" onload="init" Name="lb_equipmentid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_equipmentid" onload="init" Name="equipmentid" Size="150,100">
	<DbDetails>
<Index>equipmentid</Index>
<DbTable>his.equipment</DbTable>
<Data>equipmentno,equipmentid</Data>
<Where/>
<queryFormat/></DbDetails><OnSelEndOk><submit next="equipment_posid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshequipmentid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="equipmentid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipment_posid"><Ctrls>
<Label Align="Right" Text="equipment_posid" Name="lb_equipment_posid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_equipment_posid" Name="equipment_posid" Size="150,100">
	<DbDetails>
<Index>equipmentid</Index>
<DbTable>his.equipment_pos</DbTable>
<Data>pos_idx,equipmentid</Data>
<Where>equipmentid='%{equipmentid}'</Where>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshequipment_posid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="equipment_posid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipment_pos_degree"><Ctrls>
<Label Align="Right" Text="equipment_pos_degree" Name="lb_equipment_pos_degree" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipment_pos_degree" Name="equipment_pos_degree" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_qtyapply"><Ctrls>
<Label Align="Right" Text="qtyapply" Name="lb_qtyapply" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_qtyapply" Name="qtyapply" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_qtyrelease"><Ctrls>
<Label Align="Right" Text="qtyrelease" Name="lb_qtyrelease" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_qtyrelease" Name="qtyrelease" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_transid" Visible="false"><Ctrls>
<Label Align="Right" Text="transid" overlap="pre" Name="lb_transid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_transid" overlap="pre" Name="transid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{transid}'"><SetVisible name="insertmedi_trans" Visible="0"/><SetVisible name="modifymedi_trans" Visible="1"/><else/><SetVisible name="insertmedi_trans" Visible="1"/><SetVisible name="modifymedi_trans" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_weight1"><Ctrls>
<Label Align="Right" Text="weight1" Name="lb_weight1" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_weight1" Name="weight1" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_weight2"><Ctrls>
<Label Align="Right" Text="weight2" Name="lb_weight2" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_weight2" Name="weight2" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_status"><Ctrls>
<Label Align="Right" Text="status" Name="lb_status" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_status" Name="status" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEmedi_trans" Size="100,100"><Ctrls>
<Button sqlpkinsert="transid" Text="create" ToolTip="ttp_createmedi_trans" Name="insertmedi_trans" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.medi_trans</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicationid[medicationid],medication_detailid[medication_detailid],medicineid[medicineid],bottleid[bottleid],cabinetid[cabinetid],cabinet_cellid[cellid],equipmentid[equipmentid],equipment_posid[equipmentid],equipment_pos_degree,qtyapply,qtyrelease,weight1,weight2,status</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertmedi_trans[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medi_transLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medi_trans_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifymedi_trans" Name="modifymedi_trans" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.medi_trans</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicationid[medicationid],medication_detailid[medication_detailid],medicineid[medicineid],bottleid[bottleid],cabinetid[cabinetid],cabinet_cellid[cellid],equipmentid[equipmentid],equipment_posid[equipmentid],equipment_pos_degree,qtyapply,qtyrelease,weight1,weight2,status</Data>
<DataEx>uptime;now()</DataEx>
<Where>transid='%{transid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifymedi_trans[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medi_transLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medi_trans_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetmedi_trans" Name="resetmedi_trans" Size="50,20">
<OnClick>
<submit next="GBDEDITmedi_trans" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchmedi_trans" Name="gsearchmedi_trans" Size="50,20" visible="false">
<OnClick>
<search next="medi_transLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITmedi_trans" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedi_trans" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_medi_trans" Name="medi_transLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>transid</Index>
<DbTable>his.medi_trans</DbTable>
<Data>medicationid,medication_detailid,medicineid,bottleid,cabinetid,cabinet_cellid,equipmentid,equipment_posid,equipment_pos_degree,qtyapply,qtyrelease,opera,uptime,transid,weight1,weight2,status</Data>
<Order>transid</Order></DbDetails>
<OnClick><assign name="medicationid[medicationid]" function="SetSel" expr="%{medi_transLst[medicationid]}"/><assign name="medication_detailid[medication_detailid]" function="SetSel" expr="%{medi_transLst[medication_detailid]}"/><assign name="medicineid[medicineid]" function="SetSel" expr="%{medi_transLst[medicineid]}"/><assign name="bottleid[bottleid]" function="SetSel" expr="%{medi_transLst[bottleid]}"/><assign name="cabinetid[cabinetid]" function="SetSel" expr="%{medi_transLst[cabinetid]}"/><assign name="cabinet_cellid[cellid]" function="SetSel" expr="%{medi_transLst[cabinet_cellid]}"/><assign name="equipmentid[equipmentid]" function="SetSel" expr="%{medi_transLst[equipmentid]}"/><assign name="equipment_posid[equipmentid]" function="SetSel" expr="%{medi_transLst[equipment_posid]}"/><assign name="opera[user_id]" function="SetSel" expr="%{medi_transLst[opera]}"/>
<if cond="'%{transid}'"><SetVisible name="insertmedi_trans" Visible="0"/><SetVisible name="modifymedi_trans" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertmedi_trans" Visible="1"/><SetVisible name="modifymedi_trans" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><medicationid format="m.medicationid='%{opvalue}'"/><medication_detailid format="m.medication_detailid='%{opvalue}'"/><medicineid format="m.medicineid='%{opvalue}'"/><bottleid format="m.bottleid='%{opvalue}'"/><cabinetid format="m.cabinetid='%{opvalue}'"/><cabinet_cellid format="m.cabinet_cellid='%{opvalue}'"/><equipmentid format="m.equipmentid='%{opvalue}'"/><equipment_posid format="m.equipment_posid='%{opvalue}'"/><equipment_pos_degree format="(m.equipment_pos_degree like '%%{opvalue}%')"/><qtyapply format="(m.qtyapply like '%%{opvalue}%')"/><qtyrelease format="(m.qtyrelease like '%%{opvalue}%')"/><opera format="m.opera='%{opvalue}'"/><uptime format="(m.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><transid format="(m.transid like '%%{opvalue}%')"/><weight1 format="(m.weight1 like '%%{opvalue}%')"/><weight2 format="(m.weight2 like '%%{opvalue}%')"/><status format="(m.status like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medi_trans.xml" name="medi_trans">
<Lang name="medi_trans" value="发药日志"/>
<Lang name="medi_trans_v" value="发药日志"/>
<Lang name="TabEditmedi_trans" value="medi_trans Edit"/>
<Lang name="TabViewmedi_trans" value="medi_trans View"/>
<Lang name="medicationid" value="处方"/>
<Lang name="ttp_medicationid" value=""/>
<Lang name="medication_detailid" value="处方药"/>
<Lang name="ttp_medication_detailid" value=""/>
<Lang name="medicineid" value="药品"/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="bottleid" value="药瓶"/>
<Lang name="ttp_bottleid" value=""/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value=""/>
<Lang name="cabinet_cellid" value="药格"/>
<Lang name="ttp_cabinet_cellid" value=""/>
<Lang name="equipmentid" value="药机"/>
<Lang name="ttp_equipmentid" value=""/> 
<Lang name="equipment_posid" value="机位"/>
<Lang name="ttp_equipment_posid" value=""/>
<Lang name="equipment_pos_degree" value="开口角度"/>
<Lang name="ttp_equipment_pos_degree" value=""/>
<Lang name="qtyapply" value="申请量"/>
<Lang name="ttp_qtyapply" value=""/>
<Lang name="qtyrelease" value="发放量"/>
<Lang name="ttp_qtyrelease" value=""/>
<Lang name="weight1" value="上机重量"/>
<Lang name="weight2" value="下机重量"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="transid" value=""/>
<Lang name="ttp_transid" value=""/>
<Lang name="ttp_operationmedi_trans" value=""/>
<Lang name="ttp_createmedi_trans" value=""/>
<Lang name="ttp_modifymedi_trans" value=""/>
<Lang name="ttp_resetmedi_trans" value=""/>
<Lang name="ttp_deletemedi_trans" value=""/>
<Lang name="ttp_refreshmedi_trans" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="medi_trans" Name="GBmedi_trans" id="medi_trans" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_Vs.xml" text="Search" toggle="1" Name="GBDEDITmedi_trans"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicationid"><Ctrls>
<Label Align="Right" Text="medicationid" onload="init" Name="lb_medicationid" Size="60,20" selectedIndex="0"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_medicationid" onload="init" Name="medicationid" Size="150,100" selectedIndex="0">
	<DbDetails>
<Index>medicationid</Index>
<DbTable>his.medication</DbTable>
<Data>medication_no,medicationid</Data>
<Where/>
<queryFormat/></DbDetails><OnSelEndOk><submit next="medication_detailid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshmedicationid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="medicationid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medication_detailid"><Ctrls>
<Label Align="Right" Text="medication_detailid" Name="lb_medication_detailid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_medication_detailid" Name="medication_detailid" Size="150,100">
	<DbDetails>
<Index>medication_detailid</Index>
<DbTable>his.medication_detail</DbTable>
<Data>medicineno,medicineid,medication_detailid</Data>
<Where>medicationid='%{medicationid[medicationid]}'</Where>
<queryFormat/></DbDetails><OnSelEndOk><submit next="medicineid"/><submit next="bottleid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshmedication_detailid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="medication_detailid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="150,100">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineid</Data>
<Where>medicineid='%{medication_detailid[medicineid]}'</Where>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshmedicineid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="medicineid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" Name="lb_bottleid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_bottleid" Name="bottleid" Size="150,100">
	<DbDetails>
<Index>bottleid</Index>
<DbTable>his.bottle_info</DbTable>
<Data>bottleno,bottleid</Data>
<Where>medicineid='%{medication_detailid[medicineid]}'</Where>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshbottleid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="bottleid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetid"><Ctrls>
<Label Align="Right" Text="cabinetid" onload="init" Name="lb_cabinetid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_cabinetid" onload="init" Name="cabinetid" Size="150,100">
	<DbDetails>
<Index>cabinetid</Index>
<DbTable>his.cabinet</DbTable>
<Data>cabinetname,cabinetid</Data>
<Where/>
<queryFormat/></DbDetails><OnSelEndOk><submit next="cabinet_cellid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshcabinetid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="cabinetid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipmentid"><Ctrls>
<Label Align="Right" Text="equipmentid" onload="init" Name="lb_equipmentid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_equipmentid" onload="init" Name="equipmentid" Size="150,100">
	<DbDetails>
<Index>equipmentid</Index>
<DbTable>his.equipment</DbTable>
<Data>equipmentno,equipmentid</Data>
<Where/>
<queryFormat/></DbDetails><OnSelEndOk><submit next="equipment_posid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshequipmentid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="equipmentid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVmedi_trans" Size="100,20"><Ctrls>
<Button Text="reset" ToolTip="ttp_resetmedi_trans" Name="resetmedi_trans" Size="50,20">	<OnClick>	<submit next="GBDEDITmedi_trans" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchmedi_trans" Name="gsearchmedi_trans" Size="50,20">	<OnClick>	
<search next="medi_trans_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedi_trans" namelist="search" function="search"/>	
<search next="records_medi_trans" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedi_trans" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGmedi_trans"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_medi_trans" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>transid</Index>
<DbTable>his.medi_trans m left join his.medication m0 on m.medicationid=m0.medicationid left join his.medication_detail m1 on m.medication_detailid=m1.medication_detailid left join his.medicine_info m2 on m.medicineid=m2.medicineid left join his.bottle_info b on m.bottleid=b.bottleid left join his.cabinet c on m.cabinetid=c.cabinetid left join his.cabinet_cell c0 on m.cabinet_cellid=c0.cellid left join his.equipment e on m.equipmentid=e.equipmentid left join his.equipment_pos e0 on m.equipment_posid=e0.equipmentid left join his.users u on m.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>transid</Order><Queryformat>select %{data} from (select m.transid from %{dbtable} %{where} GROUP BY m.transid  ORDER BY m.transid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_medi_trans" expr="js(Math.ceil(%{records_medi_trans}/%{medi_trans_vLst[countsperpage]}))"/>
<assign name="pgscb_medi_trans" function="setitems" expr="js('1~'+Math.ceil(%{records_medi_trans}/%{medi_trans_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_medi_trans" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_medi_trans" Size="30,20"/>
<Button Text="go2Page" Name="go2pagemedi_trans_vLst" Size="50,20"><OnClick><submit next="medi_trans_vLst" function="GetPage(%{pgcur_medi_trans}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVmedi_trans"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialmedi_trans" Size="50,20">
<OnClick><submit next="medi_trans_vLst" function="initial"/><submit next="records_medi_trans" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPmedi_trans_vLst" Size="50,20">
<OnClick><submit next="medi_trans_vLst" function="GetPage(first)"/><submit next="records_medi_trans"/></OnClick></Button>
<Button Text="prepage" Name="PREmedi_trans_vLst" Size="50,20">
<OnClick><submit next="medi_trans_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPmedi_trans_vLst" Size="50,20">
<OnClick><submit next="medi_trans_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medi_trans_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedi_trans"><Ctrls>
<ListCtrl Heading="medicationid,120;medication_detailid,120;medicineid,120;bottleid,120;cabinetid,120;cabinet_cellid,120;equipmentid,120;equipment_posid,120;equipment_pos_degree,30;qtyapply,90;qtyrelease,90;opera,55;uptime,150;transid,100;weight1,90;weight2,90;status,30;" loadedclick="0" ToolTip="ttp_medi_trans_v" OnLoad="init" Name="medi_trans_vLst" Size="700,450">
	<DbDetails>
<Index>transid</Index>
<DbTable>his.medi_trans m left join his.medication m0 on m.medicationid=m0.medicationid left join his.medication_detail m1 on m.medication_detailid=m1.medication_detailid left join his.medicine_info m2 on m.medicineid=m2.medicineid left join his.bottle_info b on m.bottleid=b.bottleid left join his.cabinet c on m.cabinetid=c.cabinetid left join his.cabinet_cell c0 on m.cabinet_cellid=c0.cellid left join his.equipment e on m.equipmentid=e.equipmentid left join his.equipment_pos e0 on m.equipment_posid=e0.equipmentid left join his.users u on m.opera=u.user_id</DbTable>
<Data>m0.medication_no medicationid,m1.medicineno medication_detailid,m2.medicinenocn medicineid,b.bottleno bottleid,c.cabinetname cabinetid,concat(cell_row,'-',cell_col),e.equipmentno equipmentid,e0.pos_idx equipment_posid,m.equipment_pos_degree,m.qtyapply,m.qtyrelease,u.user_name opera,m.uptime,m.transid,m.weight1,m.weight2,m.status</Data>
<Order>transid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>transid='%{medi_trans_vLst[transid]}'</Where></DbDetails><submit next="$this.medi_trans.medi_transLst" namelist="DbDetails"/><assign name="$this.medi_trans.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.medi_trans</DbTable>
<Where>transid='%{medi_trans_vLst[transid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_medi_trans" expr="js(%{medi_trans_vLst[currentpage]}+1)"/>
<assign name="pgscb_medi_trans" function="SetSel" expr="js(%{medi_trans_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_vm.xml" Text="bottle_info_v" Name="bottle_info_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_Ve.xml" Text="bottle_info" Name="bottle_info" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="bottleno,medicineid[medicineid],medicineno,weight_gross"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\bottle_info.xml" name="bottle_info">
<Lang name="bottle_info" value="药瓶信息"/>
<Lang name="bottle_info_v" value="药瓶信息"/>
<Lang name="TabEditbottle_info" value="bottle_info Edit"/>
<Lang name="TabViewbottle_info" value="bottle_info View"/>
<Lang name="bottleno" value="瓶号"/>
<Lang name="ttp_bottleno" value="瓶号"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="medicineno" value="药码"/>
<Lang name="ttp_medicineno" value="药码"/>
<Lang name="uses_flag" value="使用状态"/>
<Lang name="ttp_uses_flag" value="使用状态"/>
<Lang name="weight_initial" value="初始重量"/>
<Lang name="ttp_weight_initial" value="初始重量"/>
<Lang name="weight_last" value="最近重量"/>
<Lang name="ttp_weight_last" value=""/>
<Lang name="weight_cur" value=""/>
<Lang name="ttp_weight_cur" value="当前重量"/>
<Lang name="weight_gross" value="毛重(标)"/>
<Lang name="ttp_weight_gross" value="毛重(标)"/>
<Lang name="weight_net" value="净重(标)"/>
<Lang name="ttp_weight_net" value="净重(标)"/>
<Lang name="remark" value="备注"/>
<Lang name="ttp_remark" value="备注"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="bottleid" value=""/>
<Lang name="ttp_bottleid" value=""/>
<Lang name="ttp_operationbottle_info" value=""/>
<Lang name="ttp_createbottle_info" value=""/>
<Lang name="ttp_modifybottle_info" value=""/>
<Lang name="ttp_resetbottle_info" value=""/>
<Lang name="ttp_deletebottle_info" value=""/>
<Lang name="ttp_refreshbottle_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="bottle_info" Name="GBbottle_info" id="bottle_info" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_GBDEDIT.xml" Name="GBDEDITbottle_info"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleno"><Ctrls>
<Label Align="Right" Text="bottleno" Name="lb_bottleno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottleno" Name="bottleno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="150,20">
	<DbDetails fcsm="true">
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineno,medicineid</Data>
<Where>!isdel</Where>
<queryFormat/></DbDetails></TextBox>
<MagicCtrl Name="pickmedicineid" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$parent.medicine_info_pick.frmwndctrl" expr="bottle_info.medicineid"/><DbDetails><Where/></DbDetails><submit next="$parent.medicine_info_pick.medicine_info_vLst" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineno"><Ctrls>
<Label Align="Right" Text="medicineno" Name="lb_medicineno" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" Name="medicineno" readonly="true" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uses_flag" Visible="false"><Ctrls>
<Label Align="Right" Text="uses_flag" overlap="pre" onload="init" Name="lb_uses_flag" readonly="true" Size="60,20" Visible="false"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_uses_flag" overlap="pre" onload="init" Name="uses_flag" readonly="true" Size="170,100" Visible="false">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=1</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_weight_initial" Visible="false"><Ctrls>
<Label Align="Right" Text="weight_initial" overlap="pre" Name="lb_weight_initial" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_weight_initial" overlap="pre" Name="weight_initial" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_weight_last" Visible="false"><Ctrls>
<Label Align="Right" Text="weight_last" overlap="pre" Name="lb_weight_last" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_weight_last" overlap="pre" Name="weight_last" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_weight_cur" Visible="false"><Ctrls>
<Label Align="Right" Text="weight_cur" overlap="pre" Name="lb_weight_cur" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_weight_cur" overlap="pre" Name="weight_cur" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_weight_gross"><Ctrls>
<Label Align="Right" Text="weight_gross" Name="lb_weight_gross" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_weight_gross" Name="weight_gross" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_weight_net"><Ctrls>
<Label Align="Right" Text="weight_net" Name="lb_weight_net" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_weight_net" Name="weight_net" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_remark"><Ctrls>
<Label Align="Right" Text="remark" Name="lb_remark" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_remark" Name="remark" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_bottleid" Visible="false"><Ctrls>
<Label Align="Right" Text="bottleid" overlap="pre" Name="lb_bottleid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottleid" overlap="pre" Name="bottleid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{bottleid}'"><SetVisible name="insertbottle_info" Visible="0"/><SetVisible name="modifybottle_info" Visible="1"/><else/><SetVisible name="insertbottle_info" Visible="1"/><SetVisible name="modifybottle_info" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEbottle_info" Size="100,100"><Ctrls>
<Button sqlpkinsert="bottleid" Text="create" ToolTip="ttp_createbottle_info" Name="insertbottle_info" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.bottle_info</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleno,medicineid[medicineid],medicineno,weight_gross,weight_net,remark</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertbottle_info[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_infoLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_info_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifybottle_info" Name="modifybottle_info" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.bottle_info</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleno,medicineid[medicineid],medicineno,weight_initial,remark</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<Where>bottleid='%{bottleid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifybottle_info[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_infoLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_info_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetbottle_info" Name="resetbottle_info" Size="50,20">
<OnClick>
<submit next="GBDEDITbottle_info" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchbottle_info" Name="gsearchbottle_info" Size="50,20" visible="false">
<OnClick>
<search next="bottle_infoLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITbottle_info" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVbottle_info" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_bottle_info" Name="bottle_infoLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>bottleid</Index>
<DbTable>his.bottle_info</DbTable>
<Data>bottleno,medicineid,medicineno,uses_flag,weight_initial,weight_last,weight_cur,weight_gross,weight_net,remark,opera,uptime,bottleid</Data>
<Order>bottleid</Order></DbDetails>
<OnClick><assign name="medicineid[medicineid]" function="SetSel" expr="%{bottle_infoLst[medicineid]}"/><assign name="uses_flag[statuscode]" function="SetSel" expr="%{bottle_infoLst[uses_flag]}"/><assign name="opera[user_id]" function="SetSel" expr="%{bottle_infoLst[opera]}"/>
<if cond="'%{bottleid}'"><SetVisible name="insertbottle_info" Visible="0"/><SetVisible name="modifybottle_info" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertbottle_info" Visible="1"/><SetVisible name="modifybottle_info" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_op_Ve.xml" Text="bottle_transaction_op" Name="bottle_transaction_op" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="bottleid[bottleid],medicineid[medicineid]"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\bottle_transaction_op.xml" name="bottle_transaction">
<Lang name="bottle_transaction" value="药瓶日志"/>
<Lang name="bottle_transaction_v" value="药瓶日志"/>
<Lang name="TabEditbottle_transaction" value="bottle_transaction Edit"/>
<Lang name="TabViewbottle_transaction" value="bottle_transaction View"/>

</Language>
<Ctrls>
<GroupBox Text="bottle_transaction" Name="GBbottle_transaction" id="bottle_transaction" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_op_GBDEDIT.xml" Name="GBDEDITbottle_transaction"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" Name="lb_bottleid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottleid" Name="bottleid" readonly="true" Size="170,20">
	<DbDetails>
<Index>bottleid</Index>
<DbTable>his.bottle_info</DbTable>
<Data>bottleno,medicineid,bottleid</Data>
<Where/>
<queryFormat/></DbDetails><OnEnChange><submit next="medicineid"/></OnEnChange></TextBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" readonly="true" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineid" Name="medicineid" readonly="true" Size="170,20">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineid</Data>
<Where>medicineid='%{bottleid[medicineid]}'</Where>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_weight_cur"><Ctrls>
<Label Align="Right" Text="weight_cur" Name="lb_weight_cur" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_weight_cur" Name="weight_cur" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uses_flag" Visible="false"><Ctrls>
<Label Align="Right" Text="uses_flag" overlap="pre" Name="lb_uses_flag" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_uses_flag" overlap="pre" Name="uses_flag" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_reftbl" Visible="false"><Ctrls>
<Label Align="Right" Text="reftbl" overlap="pre" Name="lb_reftbl" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_reftbl" overlap="pre" Name="reftbl" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_refid" Visible="false"><Ctrls>
<Label Align="Right" Text="refid" overlap="pre" Name="lb_refid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_refid" overlap="pre" Name="refid" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_bottle_transactionid" Visible="false"><Ctrls>
<Label Align="Right" Text="bottle_transactionid" overlap="pre" Name="lb_bottle_transactionid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottle_transactionid" overlap="pre" Name="bottle_transactionid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{bottle_transactionid}'"><SetVisible name="insertbottle_transaction" Visible="0"/><SetVisible name="modifybottle_transaction" Visible="1"/><else/><SetVisible name="insertbottle_transaction" Visible="1"/><SetVisible name="modifybottle_transaction" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_op_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEbottle_transaction" Size="100,100"><Ctrls>
<Button sqlpkinsert="bottle_transactionid" Text="create" ToolTip="ttp_createbottle_transaction" Name="insertbottle_transaction" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.bottle_transaction</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleid[bottleid],medicineid[medicineid],weight_cur,uses_flag,reftbl,refid</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertbottle_transaction[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_transactionLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_transaction_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifybottle_transaction" Name="modifybottle_transaction" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.bottle_transaction</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleid[bottleid],medicineid[medicineid],weight_cur,uses_flag,reftbl,refid</Data>
<DataEx>uptime;now()</DataEx>
<Where>bottle_transactionid='%{bottle_transactionid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifybottle_transaction[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_transactionLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_transaction_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetbottle_transaction" Name="resetbottle_transaction" Size="50,20">
<OnClick>
<submit next="GBDEDITbottle_transaction" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchbottle_transaction" Name="gsearchbottle_transaction" Size="50,20" visible="false">
<OnClick>
<search next="bottle_transactionLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITbottle_transaction" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_transaction_op_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVbottle_transaction" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_bottle_transaction" Name="bottle_transactionLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>bottle_transactionid</Index>
<DbTable>his.bottle_transaction</DbTable>
<Data>bottleid,medicineid,opera,uptime,weight_cur,uses_flag,reftbl,refid,bottle_transactionid</Data>
<Order>bottle_transactionid</Order></DbDetails>
<OnClick><assign name="bottleid[bottleid]" function="SetSel" expr="%{bottle_transactionLst[bottleid]}"/><assign name="medicineid[medicineid]" function="SetSel" expr="%{bottle_transactionLst[medicineid]}"/><assign name="opera[user_id]" function="SetSel" expr="%{bottle_transactionLst[opera]}"/>
<if cond="'%{bottle_transactionid}'"><SetVisible name="insertbottle_transaction" Visible="0"/><SetVisible name="modifybottle_transaction" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertbottle_transaction" Visible="1"/><SetVisible name="modifybottle_transaction" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_Vem.xml" Text="bottle_loc_cabinet" Name="bottle_loc_cabinet" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="bottleid[bottleid],cabinetid[cabinetid]"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\bottle_loc_cabinet.xml" name="bottle_loc_cabinet">
<Lang name="bottle_loc_cabinet" value="药柜药品信息"/>
<Lang name="bottle_loc_cabinet_v" value="药柜药品信息"/>
<Lang name="TabEditbottle_loc_cabinet" value="bottle_loc_cabinet Edit"/>
<Lang name="TabViewbottle_loc_cabinet" value="bottle_loc_cabinet View"/>
<Lang name="bottleid" value="药瓶"/>
<Lang name="ttp_bottleid" value="药瓶"/>
<Lang name="bottleno" value="药瓶编码"/>
<Lang name="ttp_bottleno" value="药瓶编码"/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value="药柜"/>
<Lang name="cellid" value="药柜柜格"/>
<Lang name="ttp_cellid" value="药柜柜格"/>
<Lang name="locationid" value=""/>
<Lang name="ttp_locationid" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="ttp_operationbottle_loc_cabinet" value=""/>
<Lang name="ttp_createbottle_loc_cabinet" value=""/>
<Lang name="ttp_modifybottle_loc_cabinet" value=""/>
<Lang name="ttp_resetbottle_loc_cabinet" value=""/>
<Lang name="ttp_deletebottle_loc_cabinet" value=""/>
<Lang name="ttp_refreshbottle_loc_cabinet" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="bottle_loc_cabinet" Name="GBbottle_loc_cabinet" id="bottle_loc_cabinet" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_GBDEDIT.xml" Name="GBDEDITbottle_loc_cabinet"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleid"><Ctrls>
<Label Align="Right" Text="bottleid" Name="lb_bottleid" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottleid" Name="bottleid" Size="170,20">
	<DbDetails>
<Index>bottleid</Index>
<DbTable>his.bottle_info</DbTable>
<Data>bottleno,medicineid,bottleid</Data>
<Where/>
<queryFormat/></DbDetails><OnEnChange><submit next="medicineid"/></OnEnChange></TextBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="170,20">
	<DbDetails fcsm="true">
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineno,medicineid</Data>
<Where>medicineid='%{bottleid[medicineid]}'</Where>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_medicineno" Visible="false"><Ctrls>
<Label Align="Right" Text="medicineno" overlap="pre" Name="lb_medicineno" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" overlap="pre" Name="medicineno" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetid"><Ctrls>
<Label Align="Right" Text="cabinetid" onload="init" Name="lb_cabinetid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_cabinetid" onload="init" Name="cabinetid" Size="150,100">
	<DbDetails>
<Index>cabinetid</Index>
<DbTable>his.cabinet</DbTable>
<Data>cabinetname,cabinetno,cabinetid</Data>
<Where/>
<queryFormat/></DbDetails><OnSelEndOk><submit next="cellid"/></OnSelEndOk></ComboBox>
<MagicCtrl Name="refreshcabinetid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="cabinetid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cellid"><Ctrls>
<Label Align="Right" Text="cellid" Name="lb_cellid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_cellid" Name="cellid" Size="150,100">
	<DbDetails>
<Index>cellid</Index>
<DbTable>his.cabinet_cell</DbTable>
<Data>concat(cell_row,'-',cell_col),op_idx,power(2,op_code) op_code,cellid</Data>
<Where>cabinetid='%{cabinetid[cabinetid]}'</Where>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshcellid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="cellid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_locationid" Visible="false"><Ctrls>
<Label Align="Right" Text="locationid" overlap="pre" Name="lb_locationid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_locationid" overlap="pre" Name="locationid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{locationid}'"><SetVisible name="insertbottle_loc_cabinet" Visible="0"/><SetVisible name="modifybottle_loc_cabinet" Visible="1"/><else/><SetVisible name="insertbottle_loc_cabinet" Visible="1"/><SetVisible name="modifybottle_loc_cabinet" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_GBOPEm.xml" cols="xs12 sm6 md4" Name="GBOPEbottle_loc_cabinet" Size="100,100"><Ctrls>
<Button sqlpkinsert="locationid" Text="create" ToolTip="ttp_createbottle_loc_cabinet" Name="insertbottle_loc_cabinet" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.bottle_loc_cabinet</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleid[bottleid],medicineid[medicineid],medicineno,cabinetid[cabinetid],cellid[cellid]</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertbottle_loc_cabinet[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_loc_cabinetLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_loc_cabinet_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifybottle_loc_cabinet" Name="modifybottle_loc_cabinet" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.bottle_loc_cabinet</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>bottleid[bottleid],bottleno,medicineid,medicineno,cabinetid[cabinetid],cellid[cellid]</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<Where>locationid='%{locationid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifybottle_loc_cabinet[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="bottle_loc_cabinetLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.bottle_loc_cabinet_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetbottle_loc_cabinet" Name="resetbottle_loc_cabinet" Size="50,20">
<OnClick>
<submit next="GBDEDITbottle_loc_cabinet" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchbottle_loc_cabinet" Name="gsearchbottle_loc_cabinet" Size="50,20" visible="false">
<OnClick>
<search next="bottle_loc_cabinetLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITbottle_loc_cabinet" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
<Button Text="light" ToolTip="ttp_light_cabinet" Name="light_cabinet" Size="100,20">
<OnClick>
<DbDetails> <DbDatabase>mqtt</DbDatabase> <datatype>mqtt</datatype> <queryFormat>set devices/%{cabinetid[cabinetno]}/light%{cellid[op_idx]}='%{cellid[op_code]}'</queryFormat> </DbDetails><submit namelist="DbDetails"/>	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_loc_cabinet_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVbottle_loc_cabinet" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_bottle_loc_cabinet" Name="bottle_loc_cabinetLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>locationid</Index>
<DbTable>his.bottle_loc_cabinet</DbTable>
<Data>bottleid,medicineid,medicineno,cabinetid,cellid,opera,uptime,locationid</Data>
<Order>locationid</Order></DbDetails>
<OnClick><assign name="bottleid[bottleid]" function="SetSel" expr="%{bottle_loc_cabinetLst[bottleid]}"/><assign name="medicineid[medicineid]" function="SetSel" expr="%{bottle_loc_cabinetLst[medicineid]}"/><assign name="cabinetid[cabinetid]" function="SetSel" expr="%{bottle_loc_cabinetLst[cabinetid]}"/><assign name="cellid[cellid]" function="SetSel" expr="%{bottle_loc_cabinetLst[cellid]}"/><assign name="opera[user_id]" function="SetSel" expr="%{bottle_loc_cabinetLst[opera]}"/>
<if cond="'%{locationid}'"><SetVisible name="insertbottle_loc_cabinet" Visible="0"/><SetVisible name="modifybottle_loc_cabinet" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertbottle_loc_cabinet" Visible="1"/><SetVisible name="modifybottle_loc_cabinet" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_pick.xml" Text="medicine_info_Pick" Name="medicine_info_pick" popup="1">
<var name="searchtmpl"><medicineno format="(m.medicineno like '%%{opvalue}%')"/><medicinenocn format="(m.medicinenocn like '%%{opvalue}%')"/><medicinenopy format="(m.medicinenopy like '%%{opvalue}%')"/><packno format="(m.packno like '%%{opvalue}%')"/><medicinecode format="(m.medicinecode like '%%{opvalue}%')"/><density format="(m.density like '%%{opvalue}%')"/><equivalent format="(m.equivalent like '%%{opvalue}%')"/><price format="(m.price like '%%{opvalue}%')"/><warningval_jiliang format="(m.warningval_jiliang like '%%{opvalue}%')"/><warningval_stock format="(m.warningval_stock like '%%{opvalue}%')"/><warningval_cabinet format="(m.warningval_cabinet like '%%{opvalue}%')"/><ispoison format="m.ispoison is %{opvalue}"/><isanesthetic format="m.isanesthetic is %{opvalue}"/><medicineid format="(m.medicineid like '%%{opvalue}%')"/><opera format="m.opera='%{opvalue}'"/><uptime format="(m.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><isdel format="m.isdel is %{opvalue}"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medicine_info.xml" name="medicine_info">
<Lang name="medicine_info" value="药品信息"/>
<Lang name="medicine_info_v" value="药品信息"/>
<Lang name="TabEditmedicine_info" value="medicine_info Edit"/>
<Lang name="TabViewmedicine_info" value="medicine_info View"/>
<Lang name="medicineno" value="药品编号"/>
<Lang name="ttp_medicineno" value="药品编号"/>
<Lang name="medicinecode" value="HIS药品编号"/>
<Lang name="ttp_medicinecode" value="HIS药品编号"/>
<Lang name="medicinenocn" value="药名中文"/>
<Lang name="ttp_medicinenocn" value="药名中文"/>
<Lang name="medicinenopy" value="药名拼音"/>
<Lang name="ttp_medicinenopy" value="药名拼音"/>
<Lang name="packno" value="包装码"/>
<Lang name="ttp_packno" value="包装码"/>
<Lang name="density" value="密度"/>
<Lang name="ttp_density" value=""/>
<Lang name="equivalent" value="当量"/>
<Lang name="ttp_equivalent" value=""/>
<Lang name="currentqty" value="当前数量"/>
<Lang name="ttp_currentqty" value="当前数量"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="warningval_jiliang" value="剂量上限"/>
<Lang name="ttp_warningval_jiliang" value=""/>
<Lang name="warningval_stock" value="库存安全值"/>
<Lang name="ttp_warningval_stock" value="库存安全值"/>
<Lang name="warningval_cabinet" value="药柜安全值"/>
<Lang name="ttp_warningval_cabinet" value="药柜安全值"/>
<Lang name="warning_validdays" value="有效期报警值"/>
<Lang name="ttp_warning_validdays" value="有效期报警值"/>
<Lang name="publicqty" value=""/>
<Lang name="ttp_publicqty" value=""/>
<Lang name="ispoison" value="毒药"/>
<Lang name="ttp_ispoison" value="毒药"/>
<Lang name="isanesthetic" value="麻药"/>
<Lang name="ttp_isanesthetic" value="麻药"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value="SEQ"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="ttp_operationmedicine_info" value=""/>
<Lang name="ttp_createmedicine_info" value=""/>
<Lang name="ttp_modifymedicine_info" value=""/>
<Lang name="ttp_resetmedicine_info" value=""/>
<Lang name="ttp_deletemedicine_info" value=""/>
<Lang name="ttp_refreshmedicine_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="medicine_info" Name="GBmedicine_info" id="medicine_info" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Vs.xml" text="Search" toggle="1" Name="GBDEDITmedicine_info"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineno"><Ctrls>
<Label Align="Right" Text="medicineno" Name="lb_medicineno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" Name="medicineno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenocn"><Ctrls>
<Label Align="Right" Text="medicinenocn" Name="lb_medicinenocn" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenocn" Name="medicinenocn" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenopy"><Ctrls>
<Label Align="Right" Text="medicinenopy" Name="lb_medicinenopy" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenopy" Name="medicinenopy" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVmedicine_info" Size="100,20"><Ctrls>
<Button Text="reset" ToolTip="ttp_resetmedicine_info" Name="resetmedicine_info" Size="50,20">	<OnClick>	<submit next="GBDEDITmedicine_info" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchmedicine_info" Name="gsearchmedicine_info" Size="50,20">	<OnClick>	
<search next="medicine_info_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedicine_info" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm12 md12 lg12" Name="GBDVmedicine_info"><Ctrls>
<ListCtrl Heading="medicineno,250;medicinenocn,250;medicinenopy,250;packno,250;medicinecode,250;density,50;equivalent,55;price,90;warningval_jiliang,90;warningval_stock,25;warningval_cabinet,25;ispoison,60;isanesthetic,60;medicineid,55;opera,55;uptime,150;isdel,60;" loadedclick="0" ToolTip="ttp_medicine_info_v" Name="medicine_info_vLst" Size="700,450">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info m left join his.users u on m.opera=u.user_id</DbTable>
<Data>m.medicineno,m.medicinenocn,m.medicinenopy,m.packno,m.medicinecode,m.density,m.equivalent,m.price,m.warningval_jiliang,m.warningval_stock,m.warningval_cabinet,m.ispoison,m.isanesthetic,m.medicineid,u.user_name opera,m.uptime,m.isdel</Data>
<Order>medicineid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<OnClick><if cond="%{medicine_info_vLst[medicineid]}"><DbDetails><Where>medicineid='%{medicine_info_vLst[medicineid]}'</Where></DbDetails><submit next="$parent.%{frmwndctrl}" namelist="DbDetails"/><submit function="onok"/></if></OnClick>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
</WndTaps>
<var name="searchtmpl"><bottleno format="(b.bottleno like '%%{opvalue}%')"/><medicineid format="b.medicineid='%{opvalue}'"/><medicineno format="(b.medicineno like '%%{opvalue}%')"/><uses_flag format="b.uses_flag='%{opvalue}'"/><weight_initial format="(b.weight_initial like '%%{opvalue}%')"/><weight_last format="(b.weight_last like '%%{opvalue}%')"/><weight_cur format="(b.weight_cur like '%%{opvalue}%')"/><weight_gross format="(b.weight_gross like '%%{opvalue}%')"/><weight_net format="(b.weight_net like '%%{opvalue}%')"/><remark format="(b.remark like '%%{opvalue}%')"/><opera format="b.opera='%{opvalue}'"/><uptime format="(b.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><bottleid format="(b.bottleid like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\bottle_info.xml" name="bottle_info">
<Lang name="bottle_info" value="药瓶信息"/>
<Lang name="bottle_info_v" value="药瓶信息"/>
<Lang name="TabEditbottle_info" value="bottle_info Edit"/>
<Lang name="TabViewbottle_info" value="bottle_info View"/>
<Lang name="bottleno" value="瓶号"/>
<Lang name="ttp_bottleno" value="瓶号"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="medicineno" value="药码"/>
<Lang name="ttp_medicineno" value="药码"/>
<Lang name="uses_flag" value="使用状态"/>
<Lang name="ttp_uses_flag" value="使用状态"/>
<Lang name="weight_initial" value="初始重量"/>
<Lang name="ttp_weight_initial" value="初始重量"/>
<Lang name="weight_last" value="最近重量"/>
<Lang name="ttp_weight_last" value=""/>
<Lang name="weight_cur" value=""/>
<Lang name="ttp_weight_cur" value="当前重量"/>
<Lang name="weight_gross" value="毛重(标)"/>
<Lang name="ttp_weight_gross" value="毛重(标)"/>
<Lang name="weight_net" value="净重(标)"/>
<Lang name="ttp_weight_net" value="净重(标)"/>
<Lang name="remark" value="备注"/>
<Lang name="ttp_remark" value="备注"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="bottleid" value=""/>
<Lang name="ttp_bottleid" value=""/>
<Lang name="ttp_operationbottle_info" value=""/>
<Lang name="ttp_createbottle_info" value=""/>
<Lang name="ttp_modifybottle_info" value=""/>
<Lang name="ttp_resetbottle_info" value=""/>
<Lang name="ttp_deletebottle_info" value=""/>
<Lang name="ttp_refreshbottle_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="bottle_info" Name="GBbottle_info" id="bottle_info" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_Vs.xml" text="Search" toggle="1" Name="GBDEDITbottle_info"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_bottleno"><Ctrls>
<Label Align="Right" Text="bottleno" Name="lb_bottleno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_bottleno" Name="bottleno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="150,20">
	<DbDetails fcsm="true">
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineno,medicineid</Data>
<Where>!isdel</Where>
<queryFormat/></DbDetails></TextBox>
<MagicCtrl Name="pickmedicineid" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$this.medicine_info_pick.frmwndctrl" expr="medicineid"/><DbDetails><Where/></DbDetails><submit next="$this.medicine_info_pick.medicine_info_vLst" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVbottle_info" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.bottle_info.GBDEDITbottle_info" function="reset"/><assign name="$this.bottle_info.frmwndctrl" expr="%{$this.bottle_info_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetbottle_info" Name="resetbottle_info" Size="50,20">	<OnClick>	<submit next="GBDEDITbottle_info" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchbottle_info" Name="gsearchbottle_info" Size="50,20">	<OnClick>	
<search next="bottle_info_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITbottle_info" namelist="search" function="search"/>	
<search next="records_bottle_info" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITbottle_info" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGbottle_info"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_bottle_info" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>bottleid</Index>
<DbTable>his.bottle_info b left join his.medicine_info m on b.medicineid=m.medicineid left join his.status_option s on b.uses_flag=s.statuscode left join his.users u on b.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>bottleid</Order><Queryformat>select %{data} from (select b.bottleid from %{dbtable} %{where} GROUP BY b.bottleid  ORDER BY b.bottleid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_bottle_info" expr="js(Math.ceil(%{records_bottle_info}/%{bottle_info_vLst[countsperpage]}))"/>
<assign name="pgscb_bottle_info" function="setitems" expr="js('1~'+Math.ceil(%{records_bottle_info}/%{bottle_info_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_bottle_info" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_bottle_info" Size="30,20"/>
<Button Text="go2Page" Name="go2pagebottle_info_vLst" Size="50,20"><OnClick><submit next="bottle_info_vLst" function="GetPage(%{pgcur_bottle_info}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVbottle_info"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialbottle_info" Size="50,20">
<OnClick><submit next="bottle_info_vLst" function="initial"/><submit next="records_bottle_info" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPbottle_info_vLst" Size="50,20">
<OnClick><submit next="bottle_info_vLst" function="GetPage(first)"/><submit next="records_bottle_info"/></OnClick></Button>
<Button Text="prepage" Name="PREbottle_info_vLst" Size="50,20">
<OnClick><submit next="bottle_info_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPbottle_info_vLst" Size="50,20">
<OnClick><submit next="bottle_info_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVbottle_info"><Ctrls>
<ListCtrl Heading="bottleno,250;medicineid,100;medicineno,250;uses_flag,120;weight_initial,90;weight_last,90;weight_cur,90;weight_gross,90;weight_net,90;remark,250;opera,55;uptime,150;bottleid,100;" loadedclick="0" ToolTip="ttp_bottle_info_v" OnLoad="init" Name="bottle_info_vLst" Size="700,450">
	<DbDetails>
<Index>bottleid</Index>
<DbTable>his.bottle_info b left join his.medicine_info m on b.medicineid=m.medicineid left join his.status_option s on b.uses_flag=s.statuscode left join his.users u on b.opera=u.user_id</DbTable>
<Data>b.bottleno,m.medicinenocn medicineid,b.medicineno,s.statusname uses_flag,b.weight_initial,b.weight_last,b.weight_cur,b.weight_gross,b.weight_net,b.remark,u.user_name opera,b.uptime,b.bottleid,b.uses_flag usesflag,b.medicineid medicine_id</Data>
<Order>bottleid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<operator xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\bottle_info_ops.xml" firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<EvalTbl rules="" table="bottle_info_ops">
<rules><Tables xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\rule/bottle_info_ops.xml"><Table name="bottle_info_ops"><Inputs><Attr>uses_flag</Attr><Value op="1" id="3">100</Value><Value op="1" id="4">101</Value><Value op="1" id="5,6">106|107</Value><Value/></Inputs><Inputs><Attr>roleid</Attr><Value/><Value/><Value/><Value/></Inputs><Outputs><Attr>title</Attr><Value op="1" id="7">modify;instock</Value><Value op="1" id="8">upcabinet</Value><Value op="1" id="9">backstock</Value><Value/></Outputs><Outputs><Attr>disabled</Attr><Value op="1" id="10">false</Value><Value op="1" id="10">false</Value><Value op="1" id="10">false</Value><Value op="1" id="10">false</Value></Outputs></Table></Tables></rules>
<inputs roleid="%{role_id}" uses_flag="%{bottle_info_vLst[usesflag]}"/>
<outputs title="text" disabled="disabled"/></EvalTbl>
<op text="modify"><DbDetails><Where>bottleid='%{bottle_info_vLst[bottleid]}'</Where></DbDetails><submit next="$this.bottle_info.bottle_infoLst" namelist="DbDetails"/><DbDetails><Where>medicineid='%{bottle_info_vLst[medicineid]}'</Where></DbDetails><submit next="$this.bottle_info.medicineid" namelist="DbDetails"/><assign name="$this.bottle_info.frmwndctrl" expr="%{this}"/></op>
<op text="instock"><submit next="$this.bottle_transaction_op.GBDEDITbottle_transaction" function="reset"/><DbDetails><Where>bottleid='%{bottle_info_vLst[bottleid]}' and uses_flag=100</Where></DbDetails><submit next="$this.bottle_transaction_op.bottleid" namelist="DbDetails"/><assign name="$this.bottle_transaction_op.uses_flag" expr="101"/><assign name="$this.bottle_transaction_op.frmwndctrl" expr="%{this}"/></op>
<op text="upcabinet"><submit next="$this.bottle_loc_cabinet.GBDEDITbottle_loc_cabinet" function="reset"/><DbDetails><Where>bottleid='%{bottle_info_vLst[bottleid]}' and uses_flag&lt;103</Where></DbDetails><submit next="$this.bottle_loc_cabinet.bottleid" namelist="DbDetails"/><assign name="$this.bottle_loc_cabinet.frmwndctrl" expr="%{this}"/></op>

<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.bottle_info</DbTable>
<Where>bottleid='%{bottle_info_vLst[bottleid]}'</Where>
<queryFormat>update %{table} set uses_flag=109 where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_bottle_info" expr="js(%{bottle_info_vLst[currentpage]}+1)"/>
<assign name="pgscb_bottle_info" function="SetSel" expr="js(%{bottle_info_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_v.xml" Text="medicine_info_v" Name="medicine_info_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Ve.xml" Text="medicine_info" Name="medicine_info" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medicine_info.xml" name="medicine_info">
<Lang name="medicine_info" value="药品信息"/>
<Lang name="medicine_info_v" value="药品信息"/>
<Lang name="TabEditmedicine_info" value="medicine_info Edit"/>
<Lang name="TabViewmedicine_info" value="medicine_info View"/>
<Lang name="medicineno" value="药品编号"/>
<Lang name="ttp_medicineno" value="药品编号"/>
<Lang name="medicinecode" value="HIS药品编号"/>
<Lang name="ttp_medicinecode" value="HIS药品编号"/>
<Lang name="medicinenocn" value="药名中文"/>
<Lang name="ttp_medicinenocn" value="药名中文"/>
<Lang name="medicinenopy" value="药名拼音"/>
<Lang name="ttp_medicinenopy" value="药名拼音"/>
<Lang name="packno" value="包装码"/>
<Lang name="ttp_packno" value="包装码"/>
<Lang name="density" value="密度"/>
<Lang name="ttp_density" value=""/>
<Lang name="equivalent" value="当量"/>
<Lang name="ttp_equivalent" value=""/>
<Lang name="currentqty" value="当前数量"/>
<Lang name="ttp_currentqty" value="当前数量"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="warningval_jiliang" value="剂量上限"/>
<Lang name="ttp_warningval_jiliang" value=""/>
<Lang name="warningval_stock" value="库存安全值"/>
<Lang name="ttp_warningval_stock" value="库存安全值"/>
<Lang name="warningval_cabinet" value="药柜安全值"/>
<Lang name="ttp_warningval_cabinet" value="药柜安全值"/>
<Lang name="warning_validdays" value="有效期报警值"/>
<Lang name="ttp_warning_validdays" value="有效期报警值"/>
<Lang name="publicqty" value=""/>
<Lang name="ttp_publicqty" value=""/>
<Lang name="ispoison" value="毒药"/>
<Lang name="ttp_ispoison" value="毒药"/>
<Lang name="isanesthetic" value="麻药"/>
<Lang name="ttp_isanesthetic" value="麻药"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value="SEQ"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="ttp_operationmedicine_info" value=""/>
<Lang name="ttp_createmedicine_info" value=""/>
<Lang name="ttp_modifymedicine_info" value=""/>
<Lang name="ttp_resetmedicine_info" value=""/>
<Lang name="ttp_deletemedicine_info" value=""/>
<Lang name="ttp_refreshmedicine_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="medicine_info" Name="GBmedicine_info" id="medicine_info" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_GBDEDIT.xml" Name="GBDEDITmedicine_info"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineno"><Ctrls>
<Label Align="Right" Text="medicineno" Name="lb_medicineno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" Name="medicineno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenocn"><Ctrls>
<Label Align="Right" Text="medicinenocn" Name="lb_medicinenocn" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenocn" Name="medicinenocn" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenopy"><Ctrls>
<Label Align="Right" Text="medicinenopy" Name="lb_medicinenopy" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenopy" Name="medicinenopy" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_packno"><Ctrls>
<Label Align="Right" Text="packno" Name="lb_packno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_packno" Name="packno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinecode"><Ctrls>
<Label Align="Right" Text="medicinecode" Name="lb_medicinecode" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinecode" Name="medicinecode" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_density"><Ctrls>
<Label Align="Right" Text="density" Name="lb_density" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_density" Name="density" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equivalent"><Ctrls>
<Label Align="Right" Text="equivalent" Name="lb_equivalent" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equivalent" Name="equivalent" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_price"><Ctrls>
<Label Align="Right" Text="price" Name="lb_price" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_price" Name="price" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_warningval_jiliang"><Ctrls>
<Label Align="Right" Text="warningval_jiliang" Name="lb_warningval_jiliang" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_warningval_jiliang" Name="warningval_jiliang" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_warningval_stock"><Ctrls>
<Label Align="Right" Text="warningval_stock" Name="lb_warningval_stock" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_warningval_stock" Name="warningval_stock" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_warningval_cabinet"><Ctrls>
<Label Align="Right" Text="warningval_cabinet" Name="lb_warningval_cabinet" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_warningval_cabinet" Name="warningval_cabinet" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_ispoison"><Ctrls>
<CheckBox Text="ispoison" ToolTip="ttp_ispoison" Name="ispoison" Size="230,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_isanesthetic"><Ctrls>
<CheckBox Text="isanesthetic" ToolTip="ttp_isanesthetic" Name="isanesthetic" Size="230,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_medicineid" Visible="false"><Ctrls>
<Label Align="Right" Text="medicineid" overlap="pre" Name="lb_medicineid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineid" overlap="pre" Name="medicineid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{medicineid}'"><SetVisible name="insertmedicine_info" Visible="0"/><SetVisible name="modifymedicine_info" Visible="1"/><else/><SetVisible name="insertmedicine_info" Visible="1"/><SetVisible name="modifymedicine_info" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_isdel" Visible="false"><Ctrls>
<CheckBox Text="isdel" ToolTip="ttp_isdel" overlap="pre" Name="isdel" readonly="true" Size="230,20" Visible="false"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEmedicine_info" Size="100,100"><Ctrls>
<Button sqlpkinsert="medicineid" Text="create" ToolTip="ttp_createmedicine_info" Name="insertmedicine_info" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.medicine_info</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicineno,medicinenocn,medicinenopy,packno,medicinecode,density,equivalent,price,warningval_jiliang,warningval_stock,warningval_cabinet,ispoison,isanesthetic</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertmedicine_info[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medicine_infoLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medicine_info_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifymedicine_info" Name="modifymedicine_info" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.medicine_info</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicineno,medicinenocn,medicinenopy,packno,medicinecode,density,equivalent,price,warningval_jiliang,warningval_stock,warningval_cabinet,ispoison,isanesthetic</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<Where>medicineid='%{medicineid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifymedicine_info[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medicine_infoLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medicine_info_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetmedicine_info" Name="resetmedicine_info" Size="50,20">
<OnClick>
<submit next="GBDEDITmedicine_info" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchmedicine_info" Name="gsearchmedicine_info" Size="50,20" visible="false">
<OnClick>
<search next="medicine_infoLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITmedicine_info" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedicine_info" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_medicine_info" Name="medicine_infoLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicineno,medicinenocn,medicinenopy,packno,medicinecode,density,equivalent,price,warningval_jiliang,warningval_stock,warningval_cabinet,ispoison,isanesthetic,medicineid,opera,uptime,isdel</Data>
<Order>medicineid</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{medicine_infoLst[opera]}"/>
<if cond="'%{medicineid}'"><SetVisible name="insertmedicine_info" Visible="0"/><SetVisible name="modifymedicine_info" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertmedicine_info" Visible="1"/><SetVisible name="modifymedicine_info" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><medicineno format="(m.medicineno like '%%{opvalue}%')"/><medicinenocn format="(m.medicinenocn like '%%{opvalue}%')"/><medicinenopy format="(m.medicinenopy like '%%{opvalue}%')"/><packno format="(m.packno like '%%{opvalue}%')"/><medicinecode format="(m.medicinecode like '%%{opvalue}%')"/><density format="(m.density like '%%{opvalue}%')"/><equivalent format="(m.equivalent like '%%{opvalue}%')"/><price format="(m.price like '%%{opvalue}%')"/><warningval_jiliang format="(m.warningval_jiliang like '%%{opvalue}%')"/><warningval_stock format="(m.warningval_stock like '%%{opvalue}%')"/><warningval_cabinet format="(m.warningval_cabinet like '%%{opvalue}%')"/><ispoison format="m.ispoison is %{opvalue}"/><isanesthetic format="m.isanesthetic is %{opvalue}"/><medicineid format="(m.medicineid like '%%{opvalue}%')"/><opera format="m.opera='%{opvalue}'"/><uptime format="(m.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><isdel format="m.isdel is %{opvalue}"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medicine_info.xml" name="medicine_info">
<Lang name="medicine_info" value="药品信息"/>
<Lang name="medicine_info_v" value="药品信息"/>
<Lang name="TabEditmedicine_info" value="medicine_info Edit"/>
<Lang name="TabViewmedicine_info" value="medicine_info View"/>
<Lang name="medicineno" value="药品编号"/>
<Lang name="ttp_medicineno" value="药品编号"/>
<Lang name="medicinecode" value="HIS药品编号"/>
<Lang name="ttp_medicinecode" value="HIS药品编号"/>
<Lang name="medicinenocn" value="药名中文"/>
<Lang name="ttp_medicinenocn" value="药名中文"/>
<Lang name="medicinenopy" value="药名拼音"/>
<Lang name="ttp_medicinenopy" value="药名拼音"/>
<Lang name="packno" value="包装码"/>
<Lang name="ttp_packno" value="包装码"/>
<Lang name="density" value="密度"/>
<Lang name="ttp_density" value=""/>
<Lang name="equivalent" value="当量"/>
<Lang name="ttp_equivalent" value=""/>
<Lang name="currentqty" value="当前数量"/>
<Lang name="ttp_currentqty" value="当前数量"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="warningval_jiliang" value="剂量上限"/>
<Lang name="ttp_warningval_jiliang" value=""/>
<Lang name="warningval_stock" value="库存安全值"/>
<Lang name="ttp_warningval_stock" value="库存安全值"/>
<Lang name="warningval_cabinet" value="药柜安全值"/>
<Lang name="ttp_warningval_cabinet" value="药柜安全值"/>
<Lang name="warning_validdays" value="有效期报警值"/>
<Lang name="ttp_warning_validdays" value="有效期报警值"/>
<Lang name="publicqty" value=""/>
<Lang name="ttp_publicqty" value=""/>
<Lang name="ispoison" value="毒药"/>
<Lang name="ttp_ispoison" value="毒药"/>
<Lang name="isanesthetic" value="麻药"/>
<Lang name="ttp_isanesthetic" value="麻药"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value="SEQ"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="ttp_operationmedicine_info" value=""/>
<Lang name="ttp_createmedicine_info" value=""/>
<Lang name="ttp_modifymedicine_info" value=""/>
<Lang name="ttp_resetmedicine_info" value=""/>
<Lang name="ttp_deletemedicine_info" value=""/>
<Lang name="ttp_refreshmedicine_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="medicine_info" Name="GBmedicine_info" id="medicine_info" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Vs.xml" text="Search" toggle="1" Name="GBDEDITmedicine_info"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineno"><Ctrls>
<Label Align="Right" Text="medicineno" Name="lb_medicineno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" Name="medicineno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenocn"><Ctrls>
<Label Align="Right" Text="medicinenocn" Name="lb_medicinenocn" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenocn" Name="medicinenocn" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenopy"><Ctrls>
<Label Align="Right" Text="medicinenopy" Name="lb_medicinenopy" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenopy" Name="medicinenopy" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVmedicine_info" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.medicine_info.GBDEDITmedicine_info" function="reset"/><assign name="$this.medicine_info.frmwndctrl" expr="%{$this.medicine_info_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetmedicine_info" Name="resetmedicine_info" Size="50,20">	<OnClick>	<submit next="GBDEDITmedicine_info" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchmedicine_info" Name="gsearchmedicine_info" Size="50,20">	<OnClick>	
<search next="medicine_info_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedicine_info" namelist="search" function="search"/>	
<search next="records_medicine_info" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedicine_info" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGmedicine_info"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_medicine_info" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>medicineid</Index>
<DbTable>his.medicine_info m left join his.users u on m.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>medicineid</Order><Queryformat>select %{data} from (select m.medicineid from %{dbtable} %{where} GROUP BY m.medicineid  ORDER BY m.medicineid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_medicine_info" expr="js(Math.ceil(%{records_medicine_info}/%{medicine_info_vLst[countsperpage]}))"/>
<assign name="pgscb_medicine_info" function="setitems" expr="js('1~'+Math.ceil(%{records_medicine_info}/%{medicine_info_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_medicine_info" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_medicine_info" Size="30,20"/>
<Button Text="go2Page" Name="go2pagemedicine_info_vLst" Size="50,20"><OnClick><submit next="medicine_info_vLst" function="GetPage(%{pgcur_medicine_info}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVmedicine_info"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialmedicine_info" Size="50,20">
<OnClick><submit next="medicine_info_vLst" function="initial"/><submit next="records_medicine_info" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPmedicine_info_vLst" Size="50,20">
<OnClick><submit next="medicine_info_vLst" function="GetPage(first)"/><submit next="records_medicine_info"/></OnClick></Button>
<Button Text="prepage" Name="PREmedicine_info_vLst" Size="50,20">
<OnClick><submit next="medicine_info_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPmedicine_info_vLst" Size="50,20">
<OnClick><submit next="medicine_info_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedicine_info"><Ctrls>
<ListCtrl Heading="medicineno,250;medicinenocn,250;medicinenopy,250;packno,250;medicinecode,250;density,50;equivalent,55;price,90;warningval_jiliang,90;warningval_stock,25;warningval_cabinet,25;ispoison,60;isanesthetic,60;medicineid,55;opera,55;uptime,150;isdel,60;" loadedclick="0" ToolTip="ttp_medicine_info_v" OnLoad="init" Name="medicine_info_vLst" Size="700,450">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info m left join his.users u on m.opera=u.user_id</DbTable>
<Data>m.medicineno,m.medicinenocn,m.medicinenopy,m.packno,m.medicinecode,m.density,m.equivalent,m.price,m.warningval_jiliang,m.warningval_stock,m.warningval_cabinet,m.ispoison,m.isanesthetic,m.medicineid,u.user_name opera,m.uptime,m.isdel</Data>
<Order>medicineid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>medicineid='%{medicine_info_vLst[medicineid]}'</Where></DbDetails><submit next="$this.medicine_info.medicine_infoLst" namelist="DbDetails"/><assign name="$this.medicine_info.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.medicine_info</DbTable>
<Where>medicineid='%{medicine_info_vLst[medicineid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_medicine_info" expr="js(%{medicine_info_vLst[currentpage]}+1)"/>
<assign name="pgscb_medicine_info" function="SetSel" expr="js(%{medicine_info_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_v.xml" Text="equipment_v" Name="equipment_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_Ve.xml" Text="equipment" Name="equipment" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\equipment.xml" name="equipment">
<Lang name="equipment" value="发药机"/>
<Lang name="equipment_v" value="发药机"/>
<Lang name="TabEditequipment" value="equipment Edit"/>
<Lang name="TabViewequipment" value="equipment View"/>
<Lang name="equipmentno" value="设备编号"/>
<Lang name="ttp_equipmentno" value="设备编号"/>
<Lang name="equipmentname" value="设备名"/>
<Lang name="ttp_equipmentname" value="设备名"/>
<Lang name="ip" value=""/>
<Lang name="ttp_ip" value="ip"/>
<Lang name="cabinetid" value="药柜号"/>
<Lang name="ttp_cabinetid" value="药柜号"/>
<Lang name="equipmenttypeid" value="设备类型"/>
<Lang name="ttp_equipmenttypeid" value=""/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="equipmentid" value=""/>
<Lang name="ttp_equipmentid" value="序号"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="computerid" value="绑定电脑"/>
<Lang name="ttp_computerid" value=""/>
<Lang name="ttp_operationequipment" value=""/>
<Lang name="ttp_createequipment" value=""/>
<Lang name="ttp_modifyequipment" value=""/>
<Lang name="ttp_resetequipment" value=""/>
<Lang name="ttp_deleteequipment" value=""/>
<Lang name="ttp_refreshequipment" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\equipment_pos.xml" name="equipment_pos">
<Lang name="equipment_pos" value="药机位"/>
<Lang name="TabEditequipment_pos" value="equipment_pos Edit"/>
<Lang name="TabViewequipment_pos" value="equipment_pos View"/>
<Lang name="equipment_pos_degree" value="开口角度"/>
<Lang name="pos_idx" value="机位"/>
<Lang name="ttp_pos_idx" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="posid" value=""/>
<Lang name="ttp_posid" value=""/>
<Lang name="equipmentid" value=""/>
<Lang name="ttp_equipmentid" value=""/>
<Lang name="ttp_operationequipment_pos" value=""/>
<Lang name="ttp_createequipment_pos" value=""/>
<Lang name="ttp_modifyequipment_pos" value=""/>
<Lang name="ttp_resetequipment_pos" value=""/>
<Lang name="ttp_deleteequipment_pos" value=""/>
<Lang name="ttp_refreshequipment_pos" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="equipment" Name="GBequipment" id="equipment" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_GBDEDIT.xml" Name="GBDEDITequipment"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipmentno"><Ctrls>
<Label Align="Right" Text="equipmentno" Name="lb_equipmentno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipmentno" Name="equipmentno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipmentname"><Ctrls>
<Label Align="Right" Text="equipmentname" Name="lb_equipmentname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipmentname" Name="equipmentname" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_ip"><Ctrls>
<Label Align="Right" Text="ip" Name="lb_ip" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_ip" Name="ip" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetid"><Ctrls>
<Label Align="Right" Text="cabinetid" onload="init" Name="lb_cabinetid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_cabinetid" onload="init" Name="cabinetid" Size="150,100">
	<DbDetails>
<Index>cabinetid</Index>
<DbTable>his.cabinet</DbTable>
<Data>cabinetname,cabinetid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshcabinetid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="cabinetid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipmenttypeid"><Ctrls>
<Label Align="Right" Text="equipmenttypeid" onload="init" Name="lb_equipmenttypeid" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_equipmenttypeid" onload="init" Name="equipmenttypeid" Size="150,100">
	<DbDetails>
<Index>equipmenttypeid</Index>
<DbTable>his.equipment_type</DbTable>
<Data>equipmenttypeno,equipmenttypeid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshequipmenttypeid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="equipmenttypeid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_status" Visible="false"><Ctrls>
<CheckBox Text="status" ToolTip="ttp_status" overlap="pre" Name="status" readonly="true" Size="230,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_equipmentid" Visible="false"><Ctrls>
<Label Align="Right" Text="equipmentid" overlap="pre" Name="lb_equipmentid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipmentid" overlap="pre" Name="equipmentid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{equipmentid}'"><SetVisible name="insertequipment" Visible="0"/><SetVisible name="modifyequipment" Visible="1"/><else/><SetVisible name="insertequipment" Visible="1"/><SetVisible name="modifyequipment" Visible="0"/></if><if cond="'%{equipmentid}'"><DbDetails><Where>equipmentid='%{equipmentid}'</Where></DbDetails><submit next="equipment_pos_vLst" namelist="DbDetails"/><else/><submit next="equipment_pos_vLst" function="resetcontent"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_computerid"><Ctrls>
<Label Align="Right" Text="computerid" onload="init" Name="lb_computerid" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_computerid" onload="init" Name="computerid" Size="170,100">
	<DbDetails>
<Index>computerid</Index>
<DbTable>his.computers</DbTable>
<Data>computer_name,computerid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEequipment" Size="100,100"><Ctrls>
<Button sqlpkinsert="equipmentid" Text="create" ToolTip="ttp_createequipment" Name="insertequipment" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.equipment</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>equipmentno,equipmentname,ip,cabinetid[cabinetid],equipmenttypeid[equipmenttypeid],computerid[computerid]</Data>
<DataEx>status,opera,uptime;1,'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertequipment[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="equipmentLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="0"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.equipment_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifyequipment" Name="modifyequipment" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.equipment</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>equipmentno,equipmentname,ip,cabinetid[cabinetid],equipmenttypeid[equipmenttypeid],computerid[computerid]</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<Where>equipmentid='%{equipmentid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifyequipment[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="equipmentLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.equipment_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetequipment" Name="resetequipment" Size="50,20">
<OnClick>
<submit next="GBDEDITequipment" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchequipment" Name="gsearchequipment" Size="50,20" visible="false">
<OnClick>
<search next="equipmentLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITequipment" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVequipment" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_equipment" Name="equipmentLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>equipmentid</Index>
<DbTable>his.equipment</DbTable>
<Data>equipmentno,equipmentname,ip,cabinetid,equipmenttypeid,status,equipmentid,opera,uptime,computerid</Data>
<Order>equipmentid</Order></DbDetails>
<OnClick><assign name="cabinetid[cabinetid]" function="SetSel" expr="%{equipmentLst[cabinetid]}"/><assign name="equipmenttypeid[equipmenttypeid]" function="SetSel" expr="%{equipmentLst[equipmenttypeid]}"/><assign name="opera[user_id]" function="SetSel" expr="%{equipmentLst[opera]}"/><assign name="computerid[computerid]" function="SetSel" expr="%{equipmentLst[computerid]}"/>
<if cond="'%{equipmentid}'"><SetVisible name="insertequipment" Visible="0"/><SetVisible name="modifyequipment" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox>
<BR/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_pos_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVequipment_pos"><Ctrls>
<ListCtrl Heading="pos_idx,20;opera,55;uptime,150;posid,55;equipmentid,55;" loadedclick="0" ToolTip="ttp_equipment_pos_v" Name="equipment_pos_vLst" Size="700,450">
	<DbDetails>
<Index>posid</Index>
<DbTable>his.equipment_pos e left join his.users u on e.opera=u.user_id</DbTable>
<Data>e.pos_idx,u.user_name opera,e.uptime,e.posid,e.equipmentid</Data>
<Order>posid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op mustselected="0" text="addone"><if cond="!%{equipmentid}"><alert expr="equipmentid is Empty!"/><else/><submit next="$parent.equipment_pos.GBDEDITequipment_pos" function="reset"/><assign name="$parent.equipment_pos.equipmentid" expr="%{equipmentid}"/><assign name="$parent.equipment_pos.frmwndctrl" expr="%{this}"/></if></op>
<op text="modify"><DbDetails><Where>posid='%{equipment_pos_vLst[posid]}'</Where></DbDetails><submit next="$parent.equipment_pos.equipment_posLst" namelist="DbDetails"/><assign name="$parent.equipment_pos.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.equipment_pos</DbTable>
<Where>posid='%{equipment_pos_vLst[posid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertequipment" Visible="1"/><SetVisible name="modifyequipment" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_pos_Ve.xml" Text="equipment_pos" Name="equipment_pos" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="equipmentid"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\equipment_pos.xml" name="equipment_pos">
<Lang name="equipment_pos" value="药机位"/>
<Lang name="TabEditequipment_pos" value="equipment_pos Edit"/>
<Lang name="TabViewequipment_pos" value="equipment_pos View"/>
<Lang name="equipment_pos_degree" value="开口角度"/>
<Lang name="pos_idx" value="机位"/>
<Lang name="ttp_pos_idx" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="posid" value=""/>
<Lang name="ttp_posid" value=""/>
<Lang name="equipmentid" value=""/>
<Lang name="ttp_equipmentid" value=""/>
<Lang name="ttp_operationequipment_pos" value=""/>
<Lang name="ttp_createequipment_pos" value=""/>
<Lang name="ttp_modifyequipment_pos" value=""/>
<Lang name="ttp_resetequipment_pos" value=""/>
<Lang name="ttp_deleteequipment_pos" value=""/>
<Lang name="ttp_refreshequipment_pos" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="equipment_pos" Name="GBequipment_pos" id="equipment_pos" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_pos_GBDEDIT.xml" Name="GBDEDITequipment_pos"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_pos_idx"><Ctrls>
<Label Align="Right" Text="pos_idx" Name="lb_pos_idx" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_pos_idx" Name="pos_idx" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_posid" Visible="false"><Ctrls>
<Label Align="Right" Text="posid" overlap="pre" Name="lb_posid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_posid" overlap="pre" Name="posid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{posid}'"><SetVisible name="insertequipment_pos" Visible="0"/><SetVisible name="modifyequipment_pos" Visible="1"/><else/><SetVisible name="insertequipment_pos" Visible="1"/><SetVisible name="modifyequipment_pos" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_equipmentid" Visible="false"><Ctrls>
<Label Align="Right" Text="equipmentid" overlap="pre" Name="lb_equipmentid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipmentid" overlap="pre" Name="equipmentid" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_pos_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEequipment_pos" Size="100,100"><Ctrls>
<Button sqlpkinsert="posid" Text="create" ToolTip="ttp_createequipment_pos" Name="insertequipment_pos" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.equipment_pos</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>pos_idx,equipmentid</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertequipment_pos[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="equipment_posLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.equipment_pos_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifyequipment_pos" Name="modifyequipment_pos" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.equipment_pos</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>pos_idx,equipmentid</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<Where>posid='%{posid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifyequipment_pos[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="equipment_posLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.equipment_pos_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetequipment_pos" Name="resetequipment_pos" Size="50,20">
<OnClick>
<submit next="GBDEDITequipment_pos" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchequipment_pos" Name="gsearchequipment_pos" Size="50,20" visible="false">
<OnClick>
<search next="equipment_posLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITequipment_pos" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_pos_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVequipment_pos" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_equipment_pos" Name="equipment_posLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>posid</Index>
<DbTable>his.equipment_pos</DbTable>
<Data>pos_idx,opera,uptime,posid,equipmentid</Data>
<Order>posid</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{equipment_posLst[opera]}"/>
<if cond="'%{posid}'"><SetVisible name="insertequipment_pos" Visible="0"/><SetVisible name="modifyequipment_pos" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertequipment_pos" Visible="1"/><SetVisible name="modifyequipment_pos" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><equipmentno format="(e.equipmentno like '%%{opvalue}%')"/><equipmentname format="(e.equipmentname like '%%{opvalue}%')"/><ip format="(e.ip like '%%{opvalue}%')"/><cabinetid format="e.cabinetid='%{opvalue}'"/><equipmenttypeid format="e.equipmenttypeid='%{opvalue}'"/><status format="e.status is %{opvalue}"/><equipmentid format="(e.equipmentid like '%%{opvalue}%')"/><opera format="e.opera='%{opvalue}'"/><uptime format="(e.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><computerid format="e.computerid='%{opvalue}'"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\equipment.xml" name="equipment">
<Lang name="equipment" value="发药机"/>
<Lang name="equipment_v" value="发药机"/>
<Lang name="TabEditequipment" value="equipment Edit"/>
<Lang name="TabViewequipment" value="equipment View"/>
<Lang name="equipmentno" value="设备编号"/>
<Lang name="ttp_equipmentno" value="设备编号"/>
<Lang name="equipmentname" value="设备名"/>
<Lang name="ttp_equipmentname" value="设备名"/>
<Lang name="ip" value=""/>
<Lang name="ttp_ip" value="ip"/>
<Lang name="cabinetid" value="药柜号"/>
<Lang name="ttp_cabinetid" value="药柜号"/>
<Lang name="equipmenttypeid" value="设备类型"/>
<Lang name="ttp_equipmenttypeid" value=""/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="equipmentid" value=""/>
<Lang name="ttp_equipmentid" value="序号"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="computerid" value="绑定电脑"/>
<Lang name="ttp_computerid" value=""/>
<Lang name="ttp_operationequipment" value=""/>
<Lang name="ttp_createequipment" value=""/>
<Lang name="ttp_modifyequipment" value=""/>
<Lang name="ttp_resetequipment" value=""/>
<Lang name="ttp_deleteequipment" value=""/>
<Lang name="ttp_refreshequipment" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="equipment" Name="GBequipment" id="equipment" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_Vs.xml" text="Search" toggle="1" Name="GBDEDITequipment"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipmentno"><Ctrls>
<Label Align="Right" Text="equipmentno" Name="lb_equipmentno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipmentno" Name="equipmentno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_equipmentname"><Ctrls>
<Label Align="Right" Text="equipmentname" Name="lb_equipmentname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_equipmentname" Name="equipmentname" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_computerid"><Ctrls>
<Label Align="Right" Text="computerid" onload="init" Name="lb_computerid" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_computerid" onload="init" Name="computerid" Size="170,100">
	<DbDetails>
<Index>computerid</Index>
<DbTable>his.computers</DbTable>
<Data>computer_name,computerid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVequipment" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.equipment.GBDEDITequipment" function="reset"/><assign name="$this.equipment.frmwndctrl" expr="%{$this.equipment_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetequipment" Name="resetequipment" Size="50,20">	<OnClick>	<submit next="GBDEDITequipment" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchequipment" Name="gsearchequipment" Size="50,20">	<OnClick>	
<search next="equipment_vLst" listed="0" prefixwhere="0" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITequipment" namelist="search" function="search"/>	
<search next="records_equipment" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITequipment" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGequipment"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_equipment" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>equipmentid</Index>
<DbTable>his.equipment e left join his.cabinet c on e.cabinetid=c.cabinetid left join his.equipment_type e0 on e.equipmenttypeid=e0.equipmenttypeid left join his.users u on e.opera=u.user_id left join his.computers c0 on e.computerid=c0.computerid</DbTable>
<Data>count(*) records</Data>
<Order>equipmentid</Order><Queryformat>select %{data} from (select e.equipmentid from %{dbtable} %{where} GROUP BY e.equipmentid  ORDER BY e.equipmentid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_equipment" expr="js(Math.ceil(%{records_equipment}/%{equipment_vLst[countsperpage]}))"/>
<assign name="pgscb_equipment" function="setitems" expr="js('1~'+Math.ceil(%{records_equipment}/%{equipment_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_equipment" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_equipment" Size="30,20"/>
<Button Text="go2Page" Name="go2pageequipment_vLst" Size="50,20"><OnClick><submit next="equipment_vLst" function="GetPage(%{pgcur_equipment}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVequipment"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialequipment" Size="50,20">
<OnClick><submit next="equipment_vLst" function="initial"/><submit next="records_equipment" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPequipment_vLst" Size="50,20">
<OnClick><submit next="equipment_vLst" function="GetPage(first)"/><submit next="records_equipment"/></OnClick></Button>
<Button Text="prepage" Name="PREequipment_vLst" Size="50,20">
<OnClick><submit next="equipment_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPequipment_vLst" Size="50,20">
<OnClick><submit next="equipment_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\equipment_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVequipment"><Ctrls>
<ListCtrl Heading="equipmentno,100;equipmentname,250;ip,250;cabinetid,120;equipmenttypeid,120;status,60;equipmentid,55;opera,55;uptime,150;computerid,120;" loadedclick="0" ToolTip="ttp_equipment_v" OnLoad="init" Name="equipment_vLst" Size="700,450">
	<DbDetails>
<Index>equipmentid</Index>
<DbTable>his.equipment e left join his.cabinet c on e.cabinetid=c.cabinetid left join his.equipment_type e0 on e.equipmenttypeid=e0.equipmenttypeid left join his.users u on e.opera=u.user_id left join his.computers c0 on e.computerid=c0.computerid</DbTable>
<Data>e.equipmentno,e.equipmentname,e.ip,c.cabinetname cabinetid,e0.equipmenttypeno equipmenttypeid,e.status,e.equipmentid,u.user_name opera,e.uptime,c0.computer_name computerid</Data>
<Order>equipmentid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>equipmentid='%{equipment_vLst[equipmentid]}'</Where></DbDetails><submit next="$this.equipment.equipmentLst" namelist="DbDetails"/><assign name="$this.equipment.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.equipment</DbTable>
<Where>equipmentid='%{equipment_vLst[equipmentid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_equipment" expr="js(%{equipment_vLst[currentpage]}+1)"/>
<assign name="pgscb_equipment" function="SetSel" expr="js(%{equipment_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_vm.xml" Text="cabinet_v" Name="cabinet_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_Ve.xml" Text="cabinet" Name="cabinet" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\cabinet.xml" name="cabinet">
<Lang name="cabinet" value="药柜"/>
<Lang name="cabinet_v" value="药柜"/>
<Lang name="TabEditcabinet" value="cabinet Edit"/>
<Lang name="TabViewcabinet" value="cabinet View"/>
<Lang name="cabinetno" value="柜号"/>
<Lang name="ttp_cabinetno" value="柜号"/>
<Lang name="cabinetname" value="柜名"/>
<Lang name="ttp_cabinetname" value="柜名"/>
<Lang name="layout_row" value="药柜行数"/>
<Lang name="ttp_layout_row" value="药柜行数"/>
<Lang name="layout_col" value="药柜列数"/>
<Lang name="ttp_layout_col" value="药柜列数"/>
<Lang name="layout_rowwidth" value="药格宽"/>
<Lang name="ttp_layout_rowwidth" value="药格宽"/>
<Lang name="layout_rowheight" value="药格高"/>
<Lang name="ttp_layout_rowheight" value="药格高"/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="cabinetid" value=""/>
<Lang name="ttp_cabinetid" value="序号"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="ttp_operationcabinet" value=""/>
<Lang name="ttp_createcabinet" value=""/>
<Lang name="ttp_modifycabinet" value=""/>
<Lang name="ttp_resetcabinet" value=""/>
<Lang name="ttp_deletecabinet" value=""/>
<Lang name="ttp_refreshcabinet" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\cabinet_cell.xml" name="cabinet_cell">
<Lang name="cabinet_cell" value="药格"/>
<Lang name="cell" value="药格"/>
<Lang name="TabEditcabinet_cell" value="cabinet_cell Edit"/>
<Lang name="TabViewcabinet_cell" value="cabinet_cell View"/>
<Lang name="cell_row" value="行"/>
<Lang name="ttp_cell_row" value=""/>
<Lang name="cell_col" value="列"/>
<Lang name="ttp_cell_col" value=""/>
<Lang name="op_idx" value="操作系列"/>
<Lang name="ttp_op_idx" value="modbus regs index, eg:1,2,3,4,5"/>
<Lang name="op_code" value="操作参数"/>
<Lang name="ttp_op_code" value="modbus reg code,eg:0,1,2,3,4,...,15"/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value=""/>
<Lang name="cellid" value="药格"/>
<Lang name="ttp_cellid" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="ttp_operationcabinet_cell" value=""/>
<Lang name="ttp_createcabinet_cell" value=""/>
<Lang name="ttp_modifycabinet_cell" value=""/>
<Lang name="ttp_resetcabinet_cell" value=""/>
<Lang name="ttp_deletecabinet_cell" value=""/>
<Lang name="ttp_refreshcabinet_cell" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="cabinet" Name="GBcabinet" id="cabinet" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_GBDEDIT.xml" Name="GBDEDITcabinet"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetno"><Ctrls>
<Label Align="Right" Text="cabinetno" Name="lb_cabinetno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cabinetno" Name="cabinetno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetname"><Ctrls>
<Label Align="Right" Text="cabinetname" Name="lb_cabinetname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cabinetname" Name="cabinetname" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_layout_row"><Ctrls>
<Label Align="Right" Text="layout_row" Name="lb_layout_row" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_layout_row" Name="layout_row" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_layout_col"><Ctrls>
<Label Align="Right" Text="layout_col" Name="lb_layout_col" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_layout_col" Name="layout_col" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_layout_rowwidth"><Ctrls>
<Label Align="Right" Text="layout_rowwidth" Name="lb_layout_rowwidth" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_layout_rowwidth" Name="layout_rowwidth" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_layout_rowheight"><Ctrls>
<Label Align="Right" Text="layout_rowheight" Name="lb_layout_rowheight" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_layout_rowheight" Name="layout_rowheight" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_status" Visible="false"><Ctrls>
<CheckBox Text="status" ToolTip="ttp_status" overlap="pre" Name="status" readonly="true" Size="230,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_cabinetid" Visible="false"><Ctrls>
<Label Align="Right" Text="cabinetid" overlap="pre" Name="lb_cabinetid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cabinetid" overlap="pre" Name="cabinetid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{cabinetid}'"><SetVisible name="insertcabinet" Visible="0"/><SetVisible name="modifycabinet" Visible="1"/><else/><SetVisible name="insertcabinet" Visible="1"/><SetVisible name="modifycabinet" Visible="0"/></if><if cond="'%{cabinetid}'"><DbDetails><Where>cabinetid='%{cabinetid}'</Where></DbDetails><submit next="cabinet_cell_vLst" namelist="DbDetails"/><else/><submit next="cabinet_cell_vLst" function="resetcontent"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEcabinet" Size="100,100"><Ctrls>
<Button sqlpkinsert="cabinetid" Text="create" ToolTip="ttp_createcabinet" Name="insertcabinet" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.cabinet</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>cabinetno,cabinetname,layout_row,layout_col,layout_rowwidth,layout_rowheight</Data>
<DataEx>status,uptime,opera;1,now(),'%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertcabinet[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="cabinetLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="0"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.cabinet_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifycabinet" Name="modifycabinet" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.cabinet</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>cabinetno,cabinetname,layout_row,layout_col,layout_rowwidth,layout_rowheight</Data>
<DataEx>uptime,opera;now(),'%{operaid}'</DataEx>
<Where>cabinetid='%{cabinetid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifycabinet[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="cabinetLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.cabinet_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetcabinet" Name="resetcabinet" Size="50,20">
<OnClick>
<submit next="GBDEDITcabinet" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchcabinet" Name="gsearchcabinet" Size="50,20" visible="false">
<OnClick>
<search next="cabinetLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITcabinet" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVcabinet" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_cabinet" Name="cabinetLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>cabinetid</Index>
<DbTable>his.cabinet</DbTable>
<Data>cabinetno,cabinetname,layout_row,layout_col,layout_rowwidth,layout_rowheight,status,cabinetid,uptime,opera</Data>
<Order>cabinetid</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{cabinetLst[opera]}"/>
<if cond="'%{cabinetid}'"><SetVisible name="insertcabinet" Visible="0"/><SetVisible name="modifycabinet" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox>
<BR/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_cell_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVcabinet_cell"><Ctrls>
<ListCtrl Heading="cell_row,20;cell_col,20;op_idx,55;op_code,55;cabinetid,55;cellid,55;uptime,150;opera,55;" loadedclick="0" ToolTip="ttp_cabinet_cell_v" Name="cabinet_cell_vLst" Size="700,450">
	<DbDetails>
<Index>cellid</Index>
<DbTable>his.cabinet_cell c left join his.users u on c.opera=u.user_id</DbTable>
<Data>c.cell_row,c.cell_col,c.op_idx,c.op_code,c.cabinetid,c.cellid,c.uptime,u.user_name opera</Data>
<Order>cellid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op mustselected="0" text="addone"><if cond="!%{cabinetid}"><alert expr="cabinetid is Empty!"/><else/><submit next="$parent.cabinet_cell.GBDEDITcabinet_cell" function="reset"/><assign name="$parent.cabinet_cell.cabinetid" expr="%{cabinetid}"/><assign name="$parent.cabinet_cell.frmwndctrl" expr="%{this}"/></if></op>
<op text="modify"><DbDetails><Where>cellid='%{cabinet_cell_vLst[cellid]}'</Where></DbDetails><submit next="$parent.cabinet_cell.cabinet_cellLst" namelist="DbDetails"/><assign name="$parent.cabinet_cell.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.cabinet_cell</DbTable>
<Where>cellid='%{cabinet_cell_vLst[cellid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertcabinet" Visible="1"/><SetVisible name="modifycabinet" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_cell_Vem.xml" Text="cabinet_cell" Name="cabinet_cell" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="cabinetid"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\cabinet_cell.xml" name="cabinet_cell">
<Lang name="cabinet_cell" value="药格"/>
<Lang name="cell" value="药格"/>
<Lang name="TabEditcabinet_cell" value="cabinet_cell Edit"/>
<Lang name="TabViewcabinet_cell" value="cabinet_cell View"/>
<Lang name="cell_row" value="行"/>
<Lang name="ttp_cell_row" value=""/>
<Lang name="cell_col" value="列"/>
<Lang name="ttp_cell_col" value=""/>
<Lang name="op_idx" value="操作系列"/>
<Lang name="ttp_op_idx" value="modbus regs index, eg:1,2,3,4,5"/>
<Lang name="op_code" value="操作参数"/>
<Lang name="ttp_op_code" value="modbus reg code,eg:0,1,2,3,4,...,15"/>
<Lang name="cabinetid" value="药柜"/>
<Lang name="ttp_cabinetid" value=""/>
<Lang name="cellid" value="药格"/>
<Lang name="ttp_cellid" value=""/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value=""/>
<Lang name="ttp_operationcabinet_cell" value=""/>
<Lang name="ttp_createcabinet_cell" value=""/>
<Lang name="ttp_modifycabinet_cell" value=""/>
<Lang name="ttp_resetcabinet_cell" value=""/>
<Lang name="ttp_deletecabinet_cell" value=""/>
<Lang name="ttp_refreshcabinet_cell" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="cabinet_cell" Name="GBcabinet_cell" id="cabinet_cell" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_cell_GBDEDIT.xml" Name="GBDEDITcabinet_cell"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cell_row"><Ctrls>
<Label Align="Right" Text="cell_row" Name="lb_cell_row" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cell_row" Name="cell_row" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cell_col"><Ctrls>
<Label Align="Right" Text="cell_col" Name="lb_cell_col" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cell_col" Name="cell_col" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_op_idx"><Ctrls>
<Label Align="Right" Text="op_idx" Name="lb_op_idx" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_op_idx" Items="1~13" Name="op_idx" Size="170,100"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_op_code"><Ctrls>
<Label Align="Right" Text="op_code" Name="lb_op_code" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_op_code" Items="0~15" Name="op_code" Size="170,100"><OnSelEndOk><assign name="cellopcode" expr="js(Math.pow(2,%{op_code}))"/></OnSelEndOk></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_cabinetid" Visible="false"><Ctrls>
<Label Align="Right" Text="cabinetid" overlap="pre" Name="lb_cabinetid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cabinetid" overlap="pre" Name="cabinetid" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_cellid" Visible="false"><Ctrls>
<Label Align="Right" Text="cellid" overlap="pre" Name="lb_cellid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cellid" overlap="pre" Name="cellid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{cellid}'"><SetVisible name="insertcabinet_cell" Visible="0"/><SetVisible name="modifycabinet_cell" Visible="1"/><else/><SetVisible name="insertcabinet_cell" Visible="1"/><SetVisible name="modifycabinet_cell" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="cellopcode" readonly="true" Size="170,20" Visible="false"/></Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_cell_GBOPEm.xml" cols="xs12 sm6 md4" Name="GBOPEcabinet_cell" Size="100,100"><Ctrls>
<Button sqlpkinsert="cellid" Text="create" ToolTip="ttp_createcabinet_cell" Name="insertcabinet_cell" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.cabinet_cell</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>cell_row,cell_col,op_idx,op_code,cabinetid</Data>
<DataEx>uptime,opera;now(),'%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertcabinet_cell[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="cabinet_cellLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.cabinet_cell_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifycabinet_cell" Name="modifycabinet_cell" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.cabinet_cell</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>cell_row,cell_col,op_idx,op_code,cabinetid</Data>
<DataEx>uptime,opera;now(),'%{operaid}'</DataEx>
<Where>cellid='%{cellid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifycabinet_cell[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="cabinet_cellLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.cabinet_cell_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetcabinet_cell" Name="resetcabinet_cell" Size="50,20">
<OnClick>
<submit next="GBDEDITcabinet_cell" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchcabinet_cell" Name="gsearchcabinet_cell" Size="50,20" visible="false">
<OnClick>
<search next="cabinet_cellLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITcabinet_cell" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
<Button Text="light" ToolTip="ttp_light_cabinet" Name="light_cabinet" Size="100,20">
<OnClick>
<DbDetails> <DbDatabase>mqtt</DbDatabase> <datatype>mqtt</datatype> <queryFormat>set devices/%{$parent.cabinet.cabinetno}/light%{op_idx}='%{cellopcode}'</queryFormat> </DbDetails><submit namelist="DbDetails"/>	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_cell_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVcabinet_cell" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_cabinet_cell" Name="cabinet_cellLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>cellid</Index>
<DbTable>his.cabinet_cell</DbTable>
<Data>cell_row,cell_col,op_idx,op_code,cabinetid,cellid,uptime,opera</Data>
<Order>cellid</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{cabinet_cellLst[opera]}"/>
<if cond="'%{cellid}'"><SetVisible name="insertcabinet_cell" Visible="0"/><SetVisible name="modifycabinet_cell" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertcabinet_cell" Visible="1"/><SetVisible name="modifycabinet_cell" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><cabinetno format="(c.cabinetno like '%%{opvalue}%')"/><cabinetname format="(c.cabinetname like '%%{opvalue}%')"/><layout_row format="(c.layout_row like '%%{opvalue}%')"/><layout_col format="(c.layout_col like '%%{opvalue}%')"/><layout_rowwidth format="(c.layout_rowwidth like '%%{opvalue}%')"/><layout_rowheight format="(c.layout_rowheight like '%%{opvalue}%')"/><status format="c.status is %{opvalue}"/><cabinetid format="(c.cabinetid like '%%{opvalue}%')"/><uptime format="(c.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><opera format="c.opera='%{opvalue}'"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\cabinet.xml" name="cabinet">
<Lang name="cabinet" value="药柜"/>
<Lang name="cabinet_v" value="药柜"/>
<Lang name="TabEditcabinet" value="cabinet Edit"/>
<Lang name="TabViewcabinet" value="cabinet View"/>
<Lang name="cabinetno" value="柜号"/>
<Lang name="ttp_cabinetno" value="柜号"/>
<Lang name="cabinetname" value="柜名"/>
<Lang name="ttp_cabinetname" value="柜名"/>
<Lang name="layout_row" value="药柜行数"/>
<Lang name="ttp_layout_row" value="药柜行数"/>
<Lang name="layout_col" value="药柜列数"/>
<Lang name="ttp_layout_col" value="药柜列数"/>
<Lang name="layout_rowwidth" value="药格宽"/>
<Lang name="ttp_layout_rowwidth" value="药格宽"/>
<Lang name="layout_rowheight" value="药格高"/>
<Lang name="ttp_layout_rowheight" value="药格高"/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="cabinetid" value=""/>
<Lang name="ttp_cabinetid" value="序号"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="ttp_operationcabinet" value=""/>
<Lang name="ttp_createcabinet" value=""/>
<Lang name="ttp_modifycabinet" value=""/>
<Lang name="ttp_resetcabinet" value=""/>
<Lang name="ttp_deletecabinet" value=""/>
<Lang name="ttp_refreshcabinet" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="cabinet" Name="GBcabinet" id="cabinet" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_Vs.xml" text="Search" toggle="1" Name="GBDEDITcabinet"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetno"><Ctrls>
<Label Align="Right" Text="cabinetno" Name="lb_cabinetno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cabinetno" Name="cabinetno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_cabinetname"><Ctrls>
<Label Align="Right" Text="cabinetname" Name="lb_cabinetname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_cabinetname" Name="cabinetname" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVcabinet" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.cabinet.GBDEDITcabinet" function="reset"/><assign name="$this.cabinet.frmwndctrl" expr="%{$this.cabinet_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetcabinet" Name="resetcabinet" Size="50,20">	<OnClick>	<submit next="GBDEDITcabinet" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchcabinet" Name="gsearchcabinet" Size="50,20">	<OnClick>	
<search next="cabinet_vLst" listed="0" prefixwhere="0" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITcabinet" namelist="search" function="search"/>	
<search next="records_cabinet" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITcabinet" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGcabinet"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_cabinet" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>cabinetid</Index>
<DbTable>his.cabinet c left join his.users u on c.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>cabinetid</Order><Queryformat>select %{data} from (select c.cabinetid from %{dbtable} %{where} GROUP BY c.cabinetid  ORDER BY c.cabinetid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_cabinet" expr="js(Math.ceil(%{records_cabinet}/%{cabinet_vLst[countsperpage]}))"/>
<assign name="pgscb_cabinet" function="setitems" expr="js('1~'+Math.ceil(%{records_cabinet}/%{cabinet_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_cabinet" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_cabinet" Size="30,20"/>
<Button Text="go2Page" Name="go2pagecabinet_vLst" Size="50,20"><OnClick><submit next="cabinet_vLst" function="GetPage(%{pgcur_cabinet}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVcabinet"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialcabinet" Size="50,20">
<OnClick><submit next="cabinet_vLst" function="initial"/><submit next="records_cabinet" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPcabinet_vLst" Size="50,20">
<OnClick><submit next="cabinet_vLst" function="GetPage(first)"/><submit next="records_cabinet"/></OnClick></Button>
<Button Text="prepage" Name="PREcabinet_vLst" Size="50,20">
<OnClick><submit next="cabinet_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPcabinet_vLst" Size="50,20">
<OnClick><submit next="cabinet_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\cabinet_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVcabinet"><Ctrls>
<ListCtrl Heading="cabinetno,100;cabinetname,250;layout_row,20;layout_col,20;layout_rowwidth,30;layout_rowheight,30;status,60;cabinetid,55;uptime,150;opera,55;" loadedclick="0" ToolTip="ttp_cabinet_v" OnLoad="init" Name="cabinet_vLst" Size="700,450">
	<DbDetails>
<Index>cabinetid</Index>
<DbTable>his.cabinet c left join his.users u on c.opera=u.user_id</DbTable>
<Data>c.cabinetno,c.cabinetname,c.layout_row,c.layout_col,c.layout_rowwidth,c.layout_rowheight,c.status,c.cabinetid,c.uptime,u.user_name opera</Data>
<Order>cabinetid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>cabinetid='%{cabinet_vLst[cabinetid]}'</Where></DbDetails><submit next="$this.cabinet.cabinetLst" namelist="DbDetails"/><assign name="$this.cabinet.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.cabinet</DbTable>
<Where>cabinetid='%{cabinet_vLst[cabinetid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_cabinet" expr="js(%{cabinet_vLst[currentpage]}+1)"/>
<assign name="pgscb_cabinet" function="SetSel" expr="js(%{cabinet_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stockbaseinfo_v.xml" Text="stockbaseinfo_v" Name="stockbaseinfo_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stockbaseinfo_Ve.xml" Text="stockbaseinfo" Name="stockbaseinfo" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="dispensaryid"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\stockbaseinfo.xml" name="stockbaseinfo">
<Lang name="stockbaseinfo" value="药库"/>
<Lang name="stockbaseinfo_v" value="药库"/>
<Lang name="TabEditstockbaseinfo" value="stockbaseinfo Edit"/>
<Lang name="TabViewstockbaseinfo" value="stockbaseinfo View"/>
<Lang name="stockno" value="药库码"/>
<Lang name="ttp_stockno" value="药库码"/>
<Lang name="stockname" value="药库名"/>
<Lang name="ttp_stockname" value="药库名"/>
<Lang name="guige" value="规格"/>
<Lang name="ttp_guige" value="规格"/>
<Lang name="locations" value="位置"/>
<Lang name="ttp_locations" value="位置"/>
<Lang name="memo" value=""/>
<Lang name="ttp_memo" value="备注"/>
<Lang name="delemp" value=""/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="deltime" value=""/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="stockid" value=""/>
<Lang name="ttp_stockid" value=""/>
<Lang name="dispensaryid" value=""/>
<Lang name="ttp_dispensaryid" value=""/>
<Lang name="ttp_operationstockbaseinfo" value=""/>
<Lang name="ttp_createstockbaseinfo" value=""/>
<Lang name="ttp_modifystockbaseinfo" value=""/>
<Lang name="ttp_resetstockbaseinfo" value=""/>
<Lang name="ttp_deletestockbaseinfo" value=""/>
<Lang name="ttp_refreshstockbaseinfo" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\stocklocationinfo.xml" name="stocklocationinfo">
<Lang name="stocklocationinfo" value="库位"/>
<Lang name="stocklocationinfo_v" value="库位"/>
<Lang name="TabEditstocklocationinfo" value="stocklocationinfo Edit"/>
<Lang name="TabViewstocklocationinfo" value="stocklocationinfo View"/>
<Lang name="stockno" value=""/>
<Lang name="ttp_stockno" value="仓库编号"/>
<Lang name="location_no" value="库位码"/>
<Lang name="ttp_location_no" value="库位码"/>
<Lang name="location_name" value="库位名"/>
<Lang name="ttp_location_name" value="库位名"/>
<Lang name="location_guige" value="位置规格"/>
<Lang name="ttp_location_guige" value="位置规格"/>
<Lang name="location_status" value="位置状态"/>
<Lang name="ttp_location_status" value="位置状态"/>
<Lang name="memo" value=""/>
<Lang name="ttp_memo" value="备注"/>
<Lang name="insert_time" value=""/>
<Lang name="ttp_insert_time" value="时间"/>
<Lang name="delemp" value=""/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="deltime" value=""/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="locationid" value=""/>
<Lang name="ttp_locationid" value=""/>
<Lang name="stockid" value=""/>
<Lang name="ttp_stockid" value=""/>
<Lang name="ttp_operationstocklocationinfo" value=""/>
<Lang name="ttp_createstocklocationinfo" value=""/>
<Lang name="ttp_modifystocklocationinfo" value=""/>
<Lang name="ttp_resetstocklocationinfo" value=""/>
<Lang name="ttp_deletestocklocationinfo" value=""/>
<Lang name="ttp_refreshstocklocationinfo" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="stockbaseinfo" Name="GBstockbaseinfo" id="stockbaseinfo" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stockbaseinfo_GBDEDIT.xml" Name="GBDEDITstockbaseinfo"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_stockno"><Ctrls>
<Label Align="Right" Text="stockno" Name="lb_stockno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_stockno" Name="stockno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_stockname"><Ctrls>
<Label Align="Right" Text="stockname" Name="lb_stockname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_stockname" Name="stockname" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_guige"><Ctrls>
<Label Align="Right" Text="guige" Name="lb_guige" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_guige" Name="guige" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_locations"><Ctrls>
<Label Align="Right" Text="locations" Name="lb_locations" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_locations" Name="locations" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_memo"><Ctrls>
<Label Align="Right" Text="memo" Name="lb_memo" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_memo" Name="memo" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_delemp" Visible="false"><Ctrls>
<Label Align="Right" Text="delemp" overlap="pre" Name="lb_delemp" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_delemp" overlap="pre" Name="delemp" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_deltime" Visible="false"><Ctrls>
<Label Align="Right" Text="deltime" overlap="pre" Name="lb_deltime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_deltime" overlap="pre" Name="deltime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_status"><Ctrls>
<Label Align="Right" Text="status" Name="lb_status" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_status" Name="status" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_stockid" Visible="false"><Ctrls>
<Label Align="Right" Text="stockid" overlap="pre" Name="lb_stockid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_stockid" overlap="pre" Name="stockid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{stockid}'"><SetVisible name="insertstockbaseinfo" Visible="0"/><SetVisible name="modifystockbaseinfo" Visible="1"/><else/><SetVisible name="insertstockbaseinfo" Visible="1"/><SetVisible name="modifystockbaseinfo" Visible="0"/></if><if cond="'%{stockid}'"><DbDetails><Where>stockid='%{stockid}'</Where></DbDetails><submit next="stocklocationinfo_vLst" namelist="DbDetails"/><else/><submit next="stocklocationinfo_vLst" function="resetcontent"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_dispensaryid" Visible="false"><Ctrls>
<Label Align="Right" Text="dispensaryid" overlap="pre" Name="lb_dispensaryid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_dispensaryid" overlap="pre" Name="dispensaryid" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stockbaseinfo_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEstockbaseinfo" Size="100,100"><Ctrls>
<Button sqlpkinsert="stockid" Text="create" ToolTip="ttp_createstockbaseinfo" Name="insertstockbaseinfo" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.stockbaseinfo</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>stockno,stockname,guige,locations,memo,status,dispensaryid</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertstockbaseinfo[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="stockbaseinfoLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="0"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.stockbaseinfo_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifystockbaseinfo" Name="modifystockbaseinfo" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.stockbaseinfo</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>stockno,stockname,guige,locations,memo,status,dispensaryid</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<Where>stockid='%{stockid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifystockbaseinfo[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="stockbaseinfoLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.stockbaseinfo_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetstockbaseinfo" Name="resetstockbaseinfo" Size="50,20">
<OnClick>
<submit next="GBDEDITstockbaseinfo" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchstockbaseinfo" Name="gsearchstockbaseinfo" Size="50,20" visible="false">
<OnClick>
<search next="stockbaseinfoLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITstockbaseinfo" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stockbaseinfo_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVstockbaseinfo" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_stockbaseinfo" Name="stockbaseinfoLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>stockid</Index>
<DbTable>his.stockbaseinfo</DbTable>
<Data>stockno,stockname,guige,locations,memo,delemp,deltime,status,opera,uptime,stockid,dispensaryid</Data>
<Order>stockid</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{stockbaseinfoLst[opera]}"/>
<if cond="'%{stockid}'"><SetVisible name="insertstockbaseinfo" Visible="0"/><SetVisible name="modifystockbaseinfo" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox>
<BR/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stocklocationinfo_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVstocklocationinfo"><Ctrls>
<ListCtrl Heading="stockno,25;location_no,250;location_name,250;location_guige,250;location_status,20;memo,250;insert_time,150;delemp,55;deltime,150;opera,55;locationid,55;stockid,55;" loadedclick="0" ToolTip="ttp_stocklocationinfo_v" Name="stocklocationinfo_vLst" Size="700,450">
	<DbDetails>
<Index>locationid</Index>
<DbTable>his.stocklocationinfo s left join his.users u on s.opera=u.user_id</DbTable>
<Data>s.stockno,s.location_no,s.location_name,s.location_guige,s.location_status,s.memo,s.insert_time,s.delemp,s.deltime,u.user_name opera,s.locationid,s.stockid</Data>
<Order>locationid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op mustselected="0" text="addone"><if cond="!%{stockid}"><alert expr="stockid is Empty!"/><else/><submit next="$parent.bottle_info.GBDEDITstocklocationinfo" function="reset"/><assign name="$parent.stocklocationinfo.stockid" expr="%{stockid}"/><assign name="$parent.bottle_info.frmwndctrl" expr="%{this}"/></if></op>
<op text="modify"><DbDetails><Where>locationid='%{stocklocationinfo_vLst[locationid]}'</Where></DbDetails><submit next="$parent.bottle_info.stocklocationinfoLst" namelist="DbDetails"/><assign name="$parent.bottle_info.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.stocklocationinfo</DbTable>
<Where>locationid='%{stocklocationinfo_vLst[locationid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertstockbaseinfo" Visible="1"/><SetVisible name="modifystockbaseinfo" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stocklocationinfo_Ve.xml" Text="bottle_info" Name="bottle_info" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\stocklocationinfo.xml" name="stocklocationinfo">
<Lang name="stocklocationinfo" value="库位"/>
<Lang name="stocklocationinfo_v" value="库位"/>
<Lang name="TabEditstocklocationinfo" value="stocklocationinfo Edit"/>
<Lang name="TabViewstocklocationinfo" value="stocklocationinfo View"/>
<Lang name="stockno" value=""/>
<Lang name="ttp_stockno" value="仓库编号"/>
<Lang name="location_no" value="库位码"/>
<Lang name="ttp_location_no" value="库位码"/>
<Lang name="location_name" value="库位名"/>
<Lang name="ttp_location_name" value="库位名"/>
<Lang name="location_guige" value="位置规格"/>
<Lang name="ttp_location_guige" value="位置规格"/>
<Lang name="location_status" value="位置状态"/>
<Lang name="ttp_location_status" value="位置状态"/>
<Lang name="memo" value=""/>
<Lang name="ttp_memo" value="备注"/>
<Lang name="insert_time" value=""/>
<Lang name="ttp_insert_time" value="时间"/>
<Lang name="delemp" value=""/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="deltime" value=""/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="locationid" value=""/>
<Lang name="ttp_locationid" value=""/>
<Lang name="stockid" value=""/>
<Lang name="ttp_stockid" value=""/>
<Lang name="ttp_operationstocklocationinfo" value=""/>
<Lang name="ttp_createstocklocationinfo" value=""/>
<Lang name="ttp_modifystocklocationinfo" value=""/>
<Lang name="ttp_resetstocklocationinfo" value=""/>
<Lang name="ttp_deletestocklocationinfo" value=""/>
<Lang name="ttp_refreshstocklocationinfo" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="stocklocationinfo" Name="GBstocklocationinfo" id="stocklocationinfo" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stocklocationinfo_GBDEDIT.xml" Name="GBDEDITstocklocationinfo"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_stockno"><Ctrls>
<Label Align="Right" Text="stockno" Name="lb_stockno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_stockno" Name="stockno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_location_no"><Ctrls>
<Label Align="Right" Text="location_no" Name="lb_location_no" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_location_no" Name="location_no" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_location_name"><Ctrls>
<Label Align="Right" Text="location_name" Name="lb_location_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_location_name" Name="location_name" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_location_guige"><Ctrls>
<Label Align="Right" Text="location_guige" Name="lb_location_guige" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_location_guige" Name="location_guige" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_location_status"><Ctrls>
<Label Align="Right" Text="location_status" Name="lb_location_status" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_location_status" Name="location_status" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_memo"><Ctrls>
<Label Align="Right" Text="memo" Name="lb_memo" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_memo" Name="memo" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_insert_time" Visible="false"><Ctrls>
<Label Align="Right" Text="insert_time" overlap="pre" Name="lb_insert_time" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_insert_time" overlap="pre" Name="insert_time" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_delemp" Visible="false"><Ctrls>
<Label Align="Right" Text="delemp" overlap="pre" Name="lb_delemp" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_delemp" overlap="pre" Name="delemp" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_deltime" Visible="false"><Ctrls>
<Label Align="Right" Text="deltime" overlap="pre" Name="lb_deltime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_deltime" overlap="pre" Name="deltime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_locationid" Visible="false"><Ctrls>
<Label Align="Right" Text="locationid" overlap="pre" Name="lb_locationid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_locationid" overlap="pre" Name="locationid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{locationid}'"><SetVisible name="insertstocklocationinfo" Visible="0"/><SetVisible name="modifystocklocationinfo" Visible="1"/><else/><SetVisible name="insertstocklocationinfo" Visible="1"/><SetVisible name="modifystocklocationinfo" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_stockid" Visible="false"><Ctrls>
<Label Align="Right" Text="stockid" overlap="pre" Name="lb_stockid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_stockid" overlap="pre" Name="stockid" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stocklocationinfo_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEstocklocationinfo" Size="100,100"><Ctrls>
<Button sqlpkinsert="locationid" Text="create" ToolTip="ttp_createstocklocationinfo" Name="insertstocklocationinfo" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.stocklocationinfo</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>stockno,location_no,location_name,location_guige,location_status,memo,insert_time</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertstocklocationinfo[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="stocklocationinfoLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.stocklocationinfo_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifystocklocationinfo" Name="modifystocklocationinfo" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.stocklocationinfo</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>stockno,location_no,location_name,location_guige,location_status,memo</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<Where>locationid='%{locationid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifystocklocationinfo[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="stocklocationinfoLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.stocklocationinfo_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetstocklocationinfo" Name="resetstocklocationinfo" Size="50,20">
<OnClick>
<submit next="GBDEDITstocklocationinfo" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchstocklocationinfo" Name="gsearchstocklocationinfo" Size="50,20" visible="false">
<OnClick>
<search next="stocklocationinfoLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITstocklocationinfo" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stocklocationinfo_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVstocklocationinfo" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_stocklocationinfo" Name="stocklocationinfoLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>locationid</Index>
<DbTable>his.stocklocationinfo</DbTable>
<Data>stockno,location_no,location_name,location_guige,location_status,memo,insert_time,delemp,deltime,opera,locationid,stockid</Data>
<Order>locationid</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{stocklocationinfoLst[opera]}"/>
<if cond="'%{locationid}'"><SetVisible name="insertstocklocationinfo" Visible="0"/><SetVisible name="modifystocklocationinfo" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertstocklocationinfo" Visible="1"/><SetVisible name="modifystocklocationinfo" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><stockno format="(s.stockno like '%%{opvalue}%')"/><stockname format="(s.stockname like '%%{opvalue}%')"/><guige format="(s.guige like '%%{opvalue}%')"/><locations format="(s.locations like '%%{opvalue}%')"/><memo format="(s.memo like '%%{opvalue}%')"/><delemp format="(s.delemp like '%%{opvalue}%')"/><deltime format="(s.deltime between '%{deltime[datetime]}' and '%{deltime[datetime2]}')"/><status format="(s.status like '%%{opvalue}%')"/><opera format="s.opera='%{opvalue}'"/><uptime format="(s.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><stockid format="(s.stockid like '%%{opvalue}%')"/><dispensaryid format="(s.dispensaryid like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\stockbaseinfo.xml" name="stockbaseinfo">
<Lang name="stockbaseinfo" value="药库"/>
<Lang name="stockbaseinfo_v" value="药库"/>
<Lang name="TabEditstockbaseinfo" value="stockbaseinfo Edit"/>
<Lang name="TabViewstockbaseinfo" value="stockbaseinfo View"/>
<Lang name="stockno" value="药库码"/>
<Lang name="ttp_stockno" value="药库码"/>
<Lang name="stockname" value="药库名"/>
<Lang name="ttp_stockname" value="药库名"/>
<Lang name="guige" value="规格"/>
<Lang name="ttp_guige" value="规格"/>
<Lang name="locations" value="位置"/>
<Lang name="ttp_locations" value="位置"/>
<Lang name="memo" value=""/>
<Lang name="ttp_memo" value="备注"/>
<Lang name="delemp" value=""/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="deltime" value=""/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="stockid" value=""/>
<Lang name="ttp_stockid" value=""/>
<Lang name="dispensaryid" value=""/>
<Lang name="ttp_dispensaryid" value=""/>
<Lang name="ttp_operationstockbaseinfo" value=""/>
<Lang name="ttp_createstockbaseinfo" value=""/>
<Lang name="ttp_modifystockbaseinfo" value=""/>
<Lang name="ttp_resetstockbaseinfo" value=""/>
<Lang name="ttp_deletestockbaseinfo" value=""/>
<Lang name="ttp_refreshstockbaseinfo" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="stockbaseinfo" Name="GBstockbaseinfo" id="stockbaseinfo" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stockbaseinfo_Vs.xml" text="Search" toggle="1" Name="GBDEDITstockbaseinfo"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_stockno"><Ctrls>
<Label Align="Right" Text="stockno" Name="lb_stockno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_stockno" Name="stockno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_stockname"><Ctrls>
<Label Align="Right" Text="stockname" Name="lb_stockname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_stockname" Name="stockname" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVstockbaseinfo" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.stockbaseinfo.GBDEDITstockbaseinfo" function="reset"/><assign name="$this.stockbaseinfo.frmwndctrl" expr="%{$this.stockbaseinfo_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetstockbaseinfo" Name="resetstockbaseinfo" Size="50,20">	<OnClick>	<submit next="GBDEDITstockbaseinfo" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchstockbaseinfo" Name="gsearchstockbaseinfo" Size="50,20">	<OnClick>	
<search next="stockbaseinfo_vLst" listed="0" prefixwhere="0" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITstockbaseinfo" namelist="search" function="search"/>	
<search next="records_stockbaseinfo" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITstockbaseinfo" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stockbaseinfo_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGstockbaseinfo"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_stockbaseinfo" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>stockid</Index>
<DbTable>his.stockbaseinfo s left join his.users u on s.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>stockid</Order><Queryformat>select %{data} from (select s.stockid from %{dbtable} %{where} GROUP BY s.stockid  ORDER BY s.stockid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_stockbaseinfo" expr="js(Math.ceil(%{records_stockbaseinfo}/%{stockbaseinfo_vLst[countsperpage]}))"/>
<assign name="pgscb_stockbaseinfo" function="setitems" expr="js('1~'+Math.ceil(%{records_stockbaseinfo}/%{stockbaseinfo_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_stockbaseinfo" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_stockbaseinfo" Size="30,20"/>
<Button Text="go2Page" Name="go2pagestockbaseinfo_vLst" Size="50,20"><OnClick><submit next="stockbaseinfo_vLst" function="GetPage(%{pgcur_stockbaseinfo}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stockbaseinfo_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVstockbaseinfo"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialstockbaseinfo" Size="50,20">
<OnClick><submit next="stockbaseinfo_vLst" function="initial"/><submit next="records_stockbaseinfo" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPstockbaseinfo_vLst" Size="50,20">
<OnClick><submit next="stockbaseinfo_vLst" function="GetPage(first)"/><submit next="records_stockbaseinfo"/></OnClick></Button>
<Button Text="prepage" Name="PREstockbaseinfo_vLst" Size="50,20">
<OnClick><submit next="stockbaseinfo_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPstockbaseinfo_vLst" Size="50,20">
<OnClick><submit next="stockbaseinfo_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\stockbaseinfo_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVstockbaseinfo"><Ctrls>
<ListCtrl Heading="stockno,25;stockname,250;guige,250;locations,250;memo,250;delemp,55;deltime,150;status,20;opera,55;uptime,150;stockid,55;dispensaryid,55;" loadedclick="0" ToolTip="ttp_stockbaseinfo_v" OnLoad="init" Name="stockbaseinfo_vLst" Size="700,450">
	<DbDetails>
<Index>stockid</Index>
<DbTable>his.stockbaseinfo s left join his.users u on s.opera=u.user_id</DbTable>
<Data>s.stockno,s.stockname,s.guige,s.locations,s.memo,s.delemp,s.deltime,s.status,u.user_name opera,s.uptime,s.stockid,s.dispensaryid</Data>
<Order>stockid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>stockid='%{stockbaseinfo_vLst[stockid]}'</Where></DbDetails><submit next="$this.stockbaseinfo.stockbaseinfoLst" namelist="DbDetails"/><assign name="$this.stockbaseinfo.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.stockbaseinfo</DbTable>
<Where>stockid='%{stockbaseinfo_vLst[stockid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_stockbaseinfo" expr="js(%{stockbaseinfo_vLst[currentpage]}+1)"/>
<assign name="pgscb_stockbaseinfo" function="SetSel" expr="js(%{stockbaseinfo_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\dispensary_v.xml" Text="dispensary_v" Name="dispensary_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\dispensary_Ve.xml" Text="dispensary" Name="dispensary" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="hospitalid"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\dispensary.xml" name="dispensary">
<Lang name="dispensary" value="药房"/>
<Lang name="dispensary_v" value="药房"/>
<Lang name="TabEditdispensary" value="dispensary Edit"/>
<Lang name="TabViewdispensary" value="dispensary View"/>
<Lang name="dispensaryno" value="药房码"/>
<Lang name="ttp_dispensaryno" value="药房码"/>
<Lang name="dispensaryname" value="药房名"/>
<Lang name="ttp_dispensaryname" value="药房名"/>
<Lang name="memo" value="备注"/>
<Lang name="ttp_memo" value="备注"/>
<Lang name="delemp" value="删除人"/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="deltime" value="删除时间"/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="dispensaryid" value=""/>
<Lang name="ttp_dispensaryid" value=""/>
<Lang name="hospitalid" value=""/>
<Lang name="ttp_hospitalid" value=""/>
<Lang name="ttp_operationdispensary" value=""/>
<Lang name="ttp_createdispensary" value=""/>
<Lang name="ttp_modifydispensary" value=""/>
<Lang name="ttp_resetdispensary" value=""/>
<Lang name="ttp_deletedispensary" value=""/>
<Lang name="ttp_refreshdispensary" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="dispensary" Name="GBdispensary" id="dispensary" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\dispensary_GBDEDIT.xml" Name="GBDEDITdispensary"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dispensaryno"><Ctrls>
<Label Align="Right" Text="dispensaryno" Name="lb_dispensaryno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_dispensaryno" Name="dispensaryno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dispensaryname"><Ctrls>
<Label Align="Right" Text="dispensaryname" Name="lb_dispensaryname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_dispensaryname" Name="dispensaryname" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_memo"><Ctrls>
<Label Align="Right" Text="memo" Name="lb_memo" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_memo" Name="memo" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_delemp" Visible="false"><Ctrls>
<Label Align="Right" Text="delemp" overlap="pre" Name="lb_delemp" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_delemp" overlap="pre" Name="delemp" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_deltime" Visible="false"><Ctrls>
<Label Align="Right" Text="deltime" overlap="pre" Name="lb_deltime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_deltime" overlap="pre" Name="deltime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_status"><Ctrls>
<Label Align="Right" Text="status" Name="lb_status" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_status" Name="status" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_dispensaryid" Visible="false"><Ctrls>
<Label Align="Right" Text="dispensaryid" overlap="pre" Name="lb_dispensaryid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_dispensaryid" overlap="pre" Name="dispensaryid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{dispensaryid}'"><SetVisible name="insertdispensary" Visible="0"/><SetVisible name="modifydispensary" Visible="1"/><else/><SetVisible name="insertdispensary" Visible="1"/><SetVisible name="modifydispensary" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_hospitalid" Visible="false"><Ctrls>
<Label Align="Right" Text="hospitalid" overlap="pre" Name="lb_hospitalid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_hospitalid" overlap="pre" Name="hospitalid" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\dispensary_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEdispensary" Size="100,100"><Ctrls>
<Button sqlpkinsert="dispensaryid" Text="create" ToolTip="ttp_createdispensary" Name="insertdispensary" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.dispensary</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>dispensaryno,dispensaryname,memo,status,hospitalid</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertdispensary[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="dispensaryLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.dispensary_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifydispensary" Name="modifydispensary" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.dispensary</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>dispensaryno,dispensaryname,memo,status,hospitalid</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<Where>dispensaryid='%{dispensaryid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifydispensary[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="dispensaryLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.dispensary_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetdispensary" Name="resetdispensary" Size="50,20">
<OnClick>
<submit next="GBDEDITdispensary" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchdispensary" Name="gsearchdispensary" Size="50,20" visible="false">
<OnClick>
<search next="dispensaryLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITdispensary" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\dispensary_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVdispensary" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_dispensary" Name="dispensaryLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>dispensaryid</Index>
<DbTable>his.dispensary</DbTable>
<Data>dispensaryno,dispensaryname,memo,delemp,deltime,status,opera,uptime,dispensaryid,hospitalid</Data>
<Order>dispensaryid</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{dispensaryLst[opera]}"/>
<if cond="'%{dispensaryid}'"><SetVisible name="insertdispensary" Visible="0"/><SetVisible name="modifydispensary" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertdispensary" Visible="1"/><SetVisible name="modifydispensary" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><dispensaryno format="(d.dispensaryno like '%%{opvalue}%')"/><dispensaryname format="(d.dispensaryname like '%%{opvalue}%')"/><memo format="(d.memo like '%%{opvalue}%')"/><delemp format="(d.delemp like '%%{opvalue}%')"/><deltime format="(d.deltime between '%{deltime[datetime]}' and '%{deltime[datetime2]}')"/><status format="(d.status like '%%{opvalue}%')"/><opera format="d.opera='%{opvalue}'"/><uptime format="(d.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><dispensaryid format="(d.dispensaryid like '%%{opvalue}%')"/><hospitalid format="(d.hospitalid like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\dispensary.xml" name="dispensary">
<Lang name="dispensary" value="药房"/>
<Lang name="dispensary_v" value="药房"/>
<Lang name="TabEditdispensary" value="dispensary Edit"/>
<Lang name="TabViewdispensary" value="dispensary View"/>
<Lang name="dispensaryno" value="药房码"/>
<Lang name="ttp_dispensaryno" value="药房码"/>
<Lang name="dispensaryname" value="药房名"/>
<Lang name="ttp_dispensaryname" value="药房名"/>
<Lang name="memo" value="备注"/>
<Lang name="ttp_memo" value="备注"/>
<Lang name="delemp" value="删除人"/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="deltime" value="删除时间"/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="dispensaryid" value=""/>
<Lang name="ttp_dispensaryid" value=""/>
<Lang name="hospitalid" value=""/>
<Lang name="ttp_hospitalid" value=""/>
<Lang name="ttp_operationdispensary" value=""/>
<Lang name="ttp_createdispensary" value=""/>
<Lang name="ttp_modifydispensary" value=""/>
<Lang name="ttp_resetdispensary" value=""/>
<Lang name="ttp_deletedispensary" value=""/>
<Lang name="ttp_refreshdispensary" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="dispensary" Name="GBdispensary" id="dispensary" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\dispensary_Vs.xml" text="Search" toggle="1" Name="GBDEDITdispensary"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dispensaryno"><Ctrls>
<Label Align="Right" Text="dispensaryno" Name="lb_dispensaryno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_dispensaryno" Name="dispensaryno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dispensaryname"><Ctrls>
<Label Align="Right" Text="dispensaryname" Name="lb_dispensaryname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_dispensaryname" Name="dispensaryname" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVdispensary" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.dispensary.GBDEDITdispensary" function="reset"/><assign name="$this.dispensary.frmwndctrl" expr="%{$this.dispensary_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetdispensary" Name="resetdispensary" Size="50,20">	<OnClick>	<submit next="GBDEDITdispensary" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchdispensary" Name="gsearchdispensary" Size="50,20">	<OnClick>	
<search next="dispensary_vLst" listed="0" prefixwhere="0" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITdispensary" namelist="search" function="search"/>	
<search next="records_dispensary" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITdispensary" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\dispensary_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGdispensary"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_dispensary" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>dispensaryid</Index>
<DbTable>his.dispensary d left join his.users u on d.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>dispensaryid</Order><Queryformat>select %{data} from (select d.dispensaryid from %{dbtable} %{where} GROUP BY d.dispensaryid  ORDER BY d.dispensaryid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_dispensary" expr="js(Math.ceil(%{records_dispensary}/%{dispensary_vLst[countsperpage]}))"/>
<assign name="pgscb_dispensary" function="setitems" expr="js('1~'+Math.ceil(%{records_dispensary}/%{dispensary_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_dispensary" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_dispensary" Size="30,20"/>
<Button Text="go2Page" Name="go2pagedispensary_vLst" Size="50,20"><OnClick><submit next="dispensary_vLst" function="GetPage(%{pgcur_dispensary}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\dispensary_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVdispensary"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialdispensary" Size="50,20">
<OnClick><submit next="dispensary_vLst" function="initial"/><submit next="records_dispensary" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPdispensary_vLst" Size="50,20">
<OnClick><submit next="dispensary_vLst" function="GetPage(first)"/><submit next="records_dispensary"/></OnClick></Button>
<Button Text="prepage" Name="PREdispensary_vLst" Size="50,20">
<OnClick><submit next="dispensary_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPdispensary_vLst" Size="50,20">
<OnClick><submit next="dispensary_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\dispensary_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVdispensary"><Ctrls>
<ListCtrl Heading="dispensaryno,25;dispensaryname,250;memo,250;delemp,55;deltime,150;status,20;opera,55;uptime,150;dispensaryid,55;hospitalid,55;" loadedclick="0" ToolTip="ttp_dispensary_v" OnLoad="init" Name="dispensary_vLst" Size="700,450">
	<DbDetails>
<Index>dispensaryid</Index>
<DbTable>his.dispensary d left join his.users u on d.opera=u.user_id</DbTable>
<Data>d.dispensaryno,d.dispensaryname,d.memo,d.delemp,d.deltime,d.status,u.user_name opera,d.uptime,d.dispensaryid,d.hospitalid</Data>
<Order>dispensaryid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>dispensaryid='%{dispensary_vLst[dispensaryid]}'</Where></DbDetails><submit next="$this.dispensary.dispensaryLst" namelist="DbDetails"/><assign name="$this.dispensary.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.dispensary</DbTable>
<Where>dispensaryid='%{dispensary_vLst[dispensaryid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_dispensary" expr="js(%{dispensary_vLst[currentpage]}+1)"/>
<assign name="pgscb_dispensary" function="SetSel" expr="js(%{dispensary_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	
	
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\hospital_v.xml" Text="hospital_v" Name="hospital_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\hospital_Ve.xml" Text="hospital" Name="hospital" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\hospital.xml" name="hospital">
<Lang name="hospital" value="医院信息"/>
<Lang name="hospital_v" value="医院信息"/>
<Lang name="TabEdithospital" value="hospital Edit"/>
<Lang name="TabViewhospital" value="hospital View"/>
<Lang name="hospitalname" value="医院名"/>
<Lang name="ttp_hospitalname" value="医院名"/>
<Lang name="hospitalno" value="医院编号"/>
<Lang name="ttp_hospitalno" value="医院编号"/>
<Lang name="hospitalid" value=""/>
<Lang name="ttp_hospitalid" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="工号"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="ttp_operationhospital" value=""/>
<Lang name="ttp_createhospital" value=""/>
<Lang name="ttp_modifyhospital" value=""/>
<Lang name="ttp_resethospital" value=""/>
<Lang name="ttp_deletehospital" value=""/>
<Lang name="ttp_refreshhospital" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="hospital" Name="GBhospital" id="hospital" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\hospital_GBDEDIT.xml" Name="GBDEDIThospital"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_hospitalname"><Ctrls>
<Label Align="Right" Text="hospitalname" Name="lb_hospitalname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_hospitalname" Name="hospitalname" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_hospitalno"><Ctrls>
<Label Align="Right" Text="hospitalno" Name="lb_hospitalno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_hospitalno" Name="hospitalno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_hospitalid" Visible="false"><Ctrls>
<Label Align="Right" Text="hospitalid" overlap="pre" Name="lb_hospitalid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_hospitalid" overlap="pre" Name="hospitalid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{hospitalid}'"><SetVisible name="inserthospital" Visible="0"/><SetVisible name="modifyhospital" Visible="1"/><else/><SetVisible name="inserthospital" Visible="1"/><SetVisible name="modifyhospital" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\hospital_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEhospital" Size="100,100"><Ctrls>
<Button sqlpkinsert="hospitalid" Text="create" ToolTip="ttp_createhospital" Name="inserthospital" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.hospital</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>hospitalname,hospitalno</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{inserthospital[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="hospitalLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.hospital_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifyhospital" Name="modifyhospital" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.hospital</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>hospitalname,hospitalno</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<Where>hospitalid='%{hospitalid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifyhospital[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="hospitalLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.hospital_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resethospital" Name="resethospital" Size="50,20">
<OnClick>
<submit next="GBDEDIThospital" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchhospital" Name="gsearchhospital" Size="50,20" visible="false">
<OnClick>
<search next="hospitalLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDIThospital" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\hospital_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVhospital" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_hospital" Name="hospitalLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>hospitalid</Index>
<DbTable>his.hospital</DbTable>
<Data>hospitalname,hospitalno,hospitalid,opera,uptime</Data>
<Order>hospitalid</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{hospitalLst[opera]}"/>
<if cond="'%{hospitalid}'"><SetVisible name="inserthospital" Visible="0"/><SetVisible name="modifyhospital" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="inserthospital" Visible="1"/><SetVisible name="modifyhospital" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><hospitalname format="(h.hospitalname like '%%{opvalue}%')"/><hospitalno format="(h.hospitalno like '%%{opvalue}%')"/><hospitalid format="(h.hospitalid like '%%{opvalue}%')"/><opera format="h.opera='%{opvalue}'"/><uptime format="(h.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\hospital.xml" name="hospital">
<Lang name="hospital" value="医院信息"/>
<Lang name="hospital_v" value="医院信息"/>
<Lang name="TabEdithospital" value="hospital Edit"/>
<Lang name="TabViewhospital" value="hospital View"/>
<Lang name="hospitalname" value="医院名"/>
<Lang name="ttp_hospitalname" value="医院名"/>
<Lang name="hospitalno" value="医院编号"/>
<Lang name="ttp_hospitalno" value="医院编号"/>
<Lang name="hospitalid" value=""/>
<Lang name="ttp_hospitalid" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="工号"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="ttp_operationhospital" value=""/>
<Lang name="ttp_createhospital" value=""/>
<Lang name="ttp_modifyhospital" value=""/>
<Lang name="ttp_resethospital" value=""/>
<Lang name="ttp_deletehospital" value=""/>
<Lang name="ttp_refreshhospital" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="hospital" Name="GBhospital" id="hospital" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\hospital_Vs.xml" text="Search" toggle="1" Name="GBDEDIThospital"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_hospitalname"><Ctrls>
<Label Align="Right" Text="hospitalname" Name="lb_hospitalname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_hospitalname" Name="hospitalname" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_hospitalno"><Ctrls>
<Label Align="Right" Text="hospitalno" Name="lb_hospitalno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_hospitalno" Name="hospitalno" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVhospital" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.hospital.GBDEDIThospital" function="reset"/><assign name="$this.hospital.frmwndctrl" expr="%{$this.hospital_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resethospital" Name="resethospital" Size="50,20">	<OnClick>	<submit next="GBDEDIThospital" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchhospital" Name="gsearchhospital" Size="50,20">	<OnClick>	
<search next="hospital_vLst" listed="0" prefixwhere="0" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDIThospital" namelist="search" function="search"/>	
<search next="records_hospital" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDIThospital" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\hospital_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGhospital"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_hospital" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>hospitalid</Index>
<DbTable>his.hospital h left join his.users u on h.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>hospitalid</Order><Queryformat>select %{data} from (select h.hospitalid from %{dbtable} %{where} GROUP BY h.hospitalid  ORDER BY h.hospitalid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_hospital" expr="js(Math.ceil(%{records_hospital}/%{hospital_vLst[countsperpage]}))"/>
<assign name="pgscb_hospital" function="setitems" expr="js('1~'+Math.ceil(%{records_hospital}/%{hospital_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_hospital" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_hospital" Size="30,20"/>
<Button Text="go2Page" Name="go2pagehospital_vLst" Size="50,20"><OnClick><submit next="hospital_vLst" function="GetPage(%{pgcur_hospital}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\hospital_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVhospital"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialhospital" Size="50,20">
<OnClick><submit next="hospital_vLst" function="initial"/><submit next="records_hospital" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPhospital_vLst" Size="50,20">
<OnClick><submit next="hospital_vLst" function="GetPage(first)"/><submit next="records_hospital"/></OnClick></Button>
<Button Text="prepage" Name="PREhospital_vLst" Size="50,20">
<OnClick><submit next="hospital_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPhospital_vLst" Size="50,20">
<OnClick><submit next="hospital_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\hospital_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVhospital"><Ctrls>
<ListCtrl Heading="hospitalname,250;hospitalno,100;hospitalid,55;opera,55;uptime,150;" loadedclick="0" ToolTip="ttp_hospital_v" OnLoad="init" Name="hospital_vLst" Size="700,450">
	<DbDetails>
<Index>hospitalid</Index>
<DbTable>his.hospital h left join his.users u on h.opera=u.user_id</DbTable>
<Data>h.hospitalname,h.hospitalno,h.hospitalid,u.user_name opera,h.uptime</Data>
<Order>hospitalid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>hospitalid='%{hospital_vLst[hospitalid]}'</Where></DbDetails><submit next="$this.hospital.hospitalLst" namelist="DbDetails"/><assign name="$this.hospital.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.hospital</DbTable>
<Where>hospitalid='%{hospital_vLst[hospitalid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_hospital" expr="js(%{hospital_vLst[currentpage]}+1)"/>
<assign name="pgscb_hospital" function="SetSel" expr="js(%{hospital_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\users_v.xml" Text="users_v" Name="users_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\users_Ve.xml" Text="users" Name="users" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\users.xml" name="users">
<Lang name="users" value="用户"/>
<Lang name="users_v" value="用户"/>
<Lang name="TabEditusers" value="users Edit"/>
<Lang name="TabViewusers" value="users View"/>
<Lang name="user_name" value="用户名"/>
<Lang name="ttp_user_name" value="用户名"/>
<Lang name="user_pass" value="密码"/>
<Lang name="ttp_user_pass" value="密码"/>
<Lang name="user_role" value="类型"/>
<Lang name="ttp_user_role" value="类型"/>
<Lang name="ap_name" value=""/>
<Lang name="ttp_ap_name" value="AP"/>
<Lang name="user_str" value=""/>
<Lang name="ttp_user_str" value=""/>
<Lang name="dept_info" value="部门"/>
<Lang name="ttp_dept_info" value="部门"/>
<Lang name="memo" value=""/>
<Lang name="ttp_memo" value="备注"/>
<Lang name="real_name" value=""/>
<Lang name="ttp_real_name" value="真实名字"/>
<Lang name="user_id" value=""/>
<Lang name="ttp_user_id" value=""/>
<Lang name="ttp_operationusers" value=""/>
<Lang name="ttp_createusers" value=""/>
<Lang name="ttp_modifyusers" value=""/>
<Lang name="ttp_resetusers" value=""/>
<Lang name="ttp_deleteusers" value=""/>
<Lang name="ttp_refreshusers" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="users" Name="GBusers" id="users" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\users_GBDEDIT.xml" Name="GBDEDITusers"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_user_name"><Ctrls>
<Label Align="Right" Text="user_name" Name="lb_user_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_user_name" Name="user_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_user_pass"><Ctrls>
<Label Align="Right" Text="user_pass" Name="lb_user_pass" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_user_pass" Name="user_pass" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_user_role"><Ctrls>
<Label Align="Right" Text="user_role" onload="init" Name="lb_user_role" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_user_role" onload="init" Name="user_role" Size="150,100">
	<DbDetails>
<Index>role_id</Index>
<DbTable>his.user_role</DbTable>
<Data>role_name,role_id</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshuser_role" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="user_role"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_real_name"><Ctrls>
<Label Align="Right" Text="real_name" Name="lb_real_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_real_name" Name="real_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_memo"><Ctrls>
<Label Align="Right" Text="memo" Name="lb_memo" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_memo" Name="memo" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dept_info"><Ctrls>
<Label Align="Right" Text="dept_info" onload="init" Name="lb_dept_info" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_dept_info" onload="init" Name="dept_info" Size="150,100">
	<DbDetails>
<Index>departmentid</Index>
<DbTable>his.department</DbTable>
<Data>departname,departmentid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshdept_info" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="dept_info"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_ap_name"><Ctrls>
<Label Align="Right" Text="ap_name" Name="lb_ap_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_ap_name" Name="ap_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_user_str"><Ctrls>
<Label Align="Right" Text="user_str" Name="lb_user_str" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_user_str" Name="user_str" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_user_id" Visible="false"><Ctrls>
<Label Align="Right" Text="user_id" overlap="pre" Name="lb_user_id" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_user_id" overlap="pre" Name="user_id" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{user_id}'"><SetVisible name="insertusers" Visible="0"/><SetVisible name="modifyusers" Visible="1"/><else/><SetVisible name="insertusers" Visible="1"/><SetVisible name="modifyusers" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\users_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEusers" Size="100,100"><Ctrls>
<Button sqlpkinsert="user_id" Text="create" ToolTip="ttp_createusers" Name="insertusers" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.users</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>user_name,user_role[role_id],real_name,memo,dept_info[departmentid],ap_name,user_str</Data>
<DataEx>user_pass;md5('%{user_pass}')</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertusers[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="usersLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.users_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifyusers" Name="modifyusers" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.users</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>user_name,user_role[role_id],real_name,memo,dept_info[departmentid],ap_name,user_str</Data>
<DataEx>user_pass;md5('%{user_pass}')</DataEx>
<Where>user_id='%{user_id}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifyusers[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="usersLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.users_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetusers" Name="resetusers" Size="50,20">
<OnClick>
<submit next="GBDEDITusers" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchusers" Name="gsearchusers" Size="50,20" visible="false">
<OnClick>
<search next="usersLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITusers" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\users_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVusers" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_users" Name="usersLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_pass,user_role,real_name,memo,dept_info,ap_name,user_str,user_id</Data>
<Order>user_id</Order></DbDetails>
<OnClick><assign name="user_role[role_id]" function="SetSel" expr="%{usersLst[user_role]}"/><assign name="dept_info[departmentid]" function="SetSel" expr="%{usersLst[dept_info]}"/>
<if cond="'%{user_id}'"><SetVisible name="insertusers" Visible="0"/><SetVisible name="modifyusers" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertusers" Visible="1"/><SetVisible name="modifyusers" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><user_name format="(u.user_name like '%%{opvalue}%')"/><user_pass format="(u.user_pass like '%%{opvalue}%')"/><user_role format="u.user_role='%{opvalue}'"/><real_name format="(u.real_name like '%%{opvalue}%')"/><memo format="(u.memo like '%%{opvalue}%')"/><dept_info format="u.dept_info='%{opvalue}'"/><ap_name format="(u.ap_name like '%%{opvalue}%')"/><user_str format="(u.user_str like '%%{opvalue}%')"/><user_id format="(u.user_id like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\users.xml" name="users">
<Lang name="users" value="用户"/>
<Lang name="users_v" value="用户"/>
<Lang name="TabEditusers" value="users Edit"/>
<Lang name="TabViewusers" value="users View"/>
<Lang name="user_name" value="用户名"/>
<Lang name="ttp_user_name" value="用户名"/>
<Lang name="user_pass" value="密码"/>
<Lang name="ttp_user_pass" value="密码"/>
<Lang name="user_role" value="类型"/>
<Lang name="ttp_user_role" value="类型"/>
<Lang name="ap_name" value=""/>
<Lang name="ttp_ap_name" value="AP"/>
<Lang name="user_str" value=""/>
<Lang name="ttp_user_str" value=""/>
<Lang name="dept_info" value="部门"/>
<Lang name="ttp_dept_info" value="部门"/>
<Lang name="memo" value=""/>
<Lang name="ttp_memo" value="备注"/>
<Lang name="real_name" value=""/>
<Lang name="ttp_real_name" value="真实名字"/>
<Lang name="user_id" value=""/>
<Lang name="ttp_user_id" value=""/>
<Lang name="ttp_operationusers" value=""/>
<Lang name="ttp_createusers" value=""/>
<Lang name="ttp_modifyusers" value=""/>
<Lang name="ttp_resetusers" value=""/>
<Lang name="ttp_deleteusers" value=""/>
<Lang name="ttp_refreshusers" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="users" Name="GBusers" id="users" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\users_Vs.xml" text="Search" toggle="1" Name="GBDEDITusers"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_user_name"><Ctrls>
<Label Align="Right" Text="user_name" Name="lb_user_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_user_name" Name="user_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_user_role"><Ctrls>
<Label Align="Right" Text="user_role" onload="init" Name="lb_user_role" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_user_role" onload="init" Name="user_role" Size="150,100">
	<DbDetails>
<Index>role_id</Index>
<DbTable>his.user_role</DbTable>
<Data>role_name,role_id</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshuser_role" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="user_role"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_real_name"><Ctrls>
<Label Align="Right" Text="real_name" Name="lb_real_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_real_name" Name="real_name" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dept_info"><Ctrls>
<Label Align="Right" Text="dept_info" onload="init" Name="lb_dept_info" Size="60,20"/>
<ComboBox Weight="150" Text="" ToolTip="ttp_dept_info" onload="init" Name="dept_info" Size="150,100">
	<DbDetails>
<Index>departmentid</Index>
<DbTable>his.department</DbTable>
<Data>departname,departmentid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
<MagicCtrl Name="refreshdept_info" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="dept_info"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVusers" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.users.GBDEDITusers" function="reset"/><assign name="$this.users.frmwndctrl" expr="%{$this.users_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetusers" Name="resetusers" Size="50,20">	<OnClick>	<submit next="GBDEDITusers" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchusers" Name="gsearchusers" Size="50,20">	<OnClick>	
<search next="users_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITusers" namelist="search" function="search"/>	
<search next="records_users" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITusers" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\users_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGusers"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_users" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>user_id</Index>
<DbTable>his.users u left join his.user_role u0 on u.user_role=u0.role_id left join his.department d on u.dept_info=d.departmentid</DbTable>
<Data>count(*) records</Data>
<Order>user_id</Order><Queryformat>select %{data} from (select u.user_id from %{dbtable} %{where} GROUP BY u.user_id  ORDER BY u.user_id) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_users" expr="js(Math.ceil(%{records_users}/%{users_vLst[countsperpage]}))"/>
<assign name="pgscb_users" function="setitems" expr="js('1~'+Math.ceil(%{records_users}/%{users_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_users" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_users" Size="30,20"/>
<Button Text="go2Page" Name="go2pageusers_vLst" Size="50,20"><OnClick><submit next="users_vLst" function="GetPage(%{pgcur_users}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\users_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVusers"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialusers" Size="50,20">
<OnClick><submit next="users_vLst" function="initial"/><submit next="records_users" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPusers_vLst" Size="50,20">
<OnClick><submit next="users_vLst" function="GetPage(first)"/><submit next="records_users"/></OnClick></Button>
<Button Text="prepage" Name="PREusers_vLst" Size="50,20">
<OnClick><submit next="users_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPusers_vLst" Size="50,20">
<OnClick><submit next="users_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\users_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVusers"><Ctrls>
<ListCtrl Heading="user_name,150;user_pass,250;user_role,120;real_name,150;memo,500;dept_info,120;ap_name,150;user_str,500;user_id,55;" loadedclick="0" ToolTip="ttp_users_v" OnLoad="init" Name="users_vLst" Size="700,450">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users u left join his.user_role u0 on u.user_role=u0.role_id left join his.department d on u.dept_info=d.departmentid</DbTable>
<Data>u.user_name,u.user_pass,u0.role_name user_role,u.real_name,u.memo,d.departname dept_info,u.ap_name,u.user_str,u.user_id</Data>
<Order>user_id</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>user_id='%{users_vLst[user_id]}'</Where></DbDetails><submit next="$this.users.usersLst" namelist="DbDetails"/><assign name="$this.users.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.users</DbTable>
<Where>user_id='%{users_vLst[user_id]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_users" expr="js(%{users_vLst[currentpage]}+1)"/>
<assign name="pgscb_users" function="SetSel" expr="js(%{users_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\user_role_v.xml" Text="user_role_v" Name="user_role_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\user_role_Ve.xml" Text="user_role" Name="user_role" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\user_role.xml" name="user_role">
<Lang name="user_role" value="角色"/>
<Lang name="user_role_v" value="角色"/>
<Lang name="TabEdituser_role" value="user_role Edit"/>
<Lang name="TabViewuser_role" value="user_role View"/>
<Lang name="role_name" value="角色名"/>
<Lang name="ttp_role_name" value="角色名"/>
<Lang name="layout" value=""/>
<Lang name="ttp_layout" value="菜单id"/>
<Lang name="insert_time" value=""/>
<Lang name="ttp_insert_time" value="操作时间"/>
<Lang name="insert_emp" value=""/>
<Lang name="ttp_insert_emp" value=""/>
<Lang name="del_opera" value=""/>
<Lang name="ttp_del_opera" value="删除人"/>
<Lang name="del_time" value=""/>
<Lang name="ttp_del_time" value="删除时间"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="role_id" value=""/>
<Lang name="ttp_role_id" value="角色id"/>
<Lang name="ttp_operationuser_role" value=""/>
<Lang name="ttp_createuser_role" value=""/>
<Lang name="ttp_modifyuser_role" value=""/>
<Lang name="ttp_resetuser_role" value=""/>
<Lang name="ttp_deleteuser_role" value=""/>
<Lang name="ttp_refreshuser_role" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="user_role" Name="GBuser_role" id="user_role" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\user_role_GBDEDIT.xml" Name="GBDEDITuser_role"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_role_name"><Ctrls>
<Label Align="Right" Text="role_name" Name="lb_role_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_role_name" Name="role_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_layout"><Ctrls>
<Label Align="Right" Text="layout" Name="lb_layout" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_layout" Name="layout" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_insert_time" Visible="false"><Ctrls>
<Label Align="Right" Text="insert_time" overlap="pre" Name="lb_insert_time" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_insert_time" overlap="pre" Name="insert_time" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_insert_emp" Visible="false"><Ctrls>
<Label Align="Right" Text="insert_emp" overlap="pre" Name="lb_insert_emp" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_insert_emp" overlap="pre" Name="insert_emp" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_del_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="del_opera" overlap="pre" Name="lb_del_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_del_opera" overlap="pre" Name="del_opera" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_del_time" Visible="false"><Ctrls>
<Label Align="Right" Text="del_time" overlap="pre" Name="lb_del_time" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_del_time" overlap="pre" Name="del_time" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_role_id" Visible="false"><Ctrls>
<Label Align="Right" Text="role_id" overlap="pre" Name="lb_role_id" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_role_id" overlap="pre" Name="role_id" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{role_id}'"><SetVisible name="insertuser_role" Visible="0"/><SetVisible name="modifyuser_role" Visible="1"/><else/><SetVisible name="insertuser_role" Visible="1"/><SetVisible name="modifyuser_role" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\user_role_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEuser_role" Size="100,100"><Ctrls>
<Button sqlpkinsert="role_id" Text="create" ToolTip="ttp_createuser_role" Name="insertuser_role" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.user_role</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>role_name,layout</Data>
<DataEx>insert_time,insert_emp,opera;now(),'%{operaid}','%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertuser_role[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="user_roleLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.user_role_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifyuser_role" Name="modifyuser_role" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.user_role</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>role_name,layout</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<Where>role_id='%{role_id}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifyuser_role[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="user_roleLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.user_role_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetuser_role" Name="resetuser_role" Size="50,20">
<OnClick>
<submit next="GBDEDITuser_role" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchuser_role" Name="gsearchuser_role" Size="50,20" visible="false">
<OnClick>
<search next="user_roleLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITuser_role" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\user_role_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVuser_role" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_user_role" Name="user_roleLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>role_id</Index>
<DbTable>his.user_role</DbTable>
<Data>role_name,layout,insert_time,insert_emp,del_opera,del_time,opera,role_id</Data>
<Order>role_id</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{user_roleLst[opera]}"/>
<if cond="'%{role_id}'"><SetVisible name="insertuser_role" Visible="0"/><SetVisible name="modifyuser_role" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertuser_role" Visible="1"/><SetVisible name="modifyuser_role" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><role_name format="(u.role_name like '%%{opvalue}%')"/><layout format="(u.layout like '%%{opvalue}%')"/><insert_time format="(u.insert_time between '%{insert_time[datetime]}' and '%{insert_time[datetime2]}')"/><insert_emp format="(u.insert_emp like '%%{opvalue}%')"/><del_opera format="(u.del_opera like '%%{opvalue}%')"/><del_time format="(u.del_time between '%{del_time[datetime]}' and '%{del_time[datetime2]}')"/><opera format="u.opera='%{opvalue}'"/><role_id format="(u.role_id like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\user_role.xml" name="user_role">
<Lang name="user_role" value="角色"/>
<Lang name="user_role_v" value="角色"/>
<Lang name="TabEdituser_role" value="user_role Edit"/>
<Lang name="TabViewuser_role" value="user_role View"/>
<Lang name="role_name" value="角色名"/>
<Lang name="ttp_role_name" value="角色名"/>
<Lang name="layout" value=""/>
<Lang name="ttp_layout" value="菜单id"/>
<Lang name="insert_time" value=""/>
<Lang name="ttp_insert_time" value="操作时间"/>
<Lang name="insert_emp" value=""/>
<Lang name="ttp_insert_emp" value=""/>
<Lang name="del_opera" value=""/>
<Lang name="ttp_del_opera" value="删除人"/>
<Lang name="del_time" value=""/>
<Lang name="ttp_del_time" value="删除时间"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="role_id" value=""/>
<Lang name="ttp_role_id" value="角色id"/>
<Lang name="ttp_operationuser_role" value=""/>
<Lang name="ttp_createuser_role" value=""/>
<Lang name="ttp_modifyuser_role" value=""/>
<Lang name="ttp_resetuser_role" value=""/>
<Lang name="ttp_deleteuser_role" value=""/>
<Lang name="ttp_refreshuser_role" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="user_role" Name="GBuser_role" id="user_role" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\user_role_Vs.xml" text="Search" toggle="1" Name="GBDEDITuser_role"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_role_name"><Ctrls>
<Label Align="Right" Text="role_name" Name="lb_role_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_role_name" Name="role_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_layout"><Ctrls>
<Label Align="Right" Text="layout" Name="lb_layout" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_layout" Name="layout" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVuser_role" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.user_role.GBDEDITuser_role" function="reset"/><assign name="$this.user_role.frmwndctrl" expr="%{$this.user_role_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetuser_role" Name="resetuser_role" Size="50,20">	<OnClick>	<submit next="GBDEDITuser_role" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchuser_role" Name="gsearchuser_role" Size="50,20">	<OnClick>	
<search next="user_role_vLst" listed="0" prefixwhere="0" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITuser_role" namelist="search" function="search"/>	
<search next="records_user_role" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITuser_role" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\user_role_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGuser_role"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_user_role" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>role_id</Index>
<DbTable>his.user_role u left join his.users u0 on u.opera=u0.user_id</DbTable>
<Data>count(*) records</Data>
<Order>role_id</Order><Queryformat>select %{data} from (select u.role_id from %{dbtable} %{where} GROUP BY u.role_id  ORDER BY u.role_id) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_user_role" expr="js(Math.ceil(%{records_user_role}/%{user_role_vLst[countsperpage]}))"/>
<assign name="pgscb_user_role" function="setitems" expr="js('1~'+Math.ceil(%{records_user_role}/%{user_role_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_user_role" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_user_role" Size="30,20"/>
<Button Text="go2Page" Name="go2pageuser_role_vLst" Size="50,20"><OnClick><submit next="user_role_vLst" function="GetPage(%{pgcur_user_role}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\user_role_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVuser_role"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialuser_role" Size="50,20">
<OnClick><submit next="user_role_vLst" function="initial"/><submit next="records_user_role" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPuser_role_vLst" Size="50,20">
<OnClick><submit next="user_role_vLst" function="GetPage(first)"/><submit next="records_user_role"/></OnClick></Button>
<Button Text="prepage" Name="PREuser_role_vLst" Size="50,20">
<OnClick><submit next="user_role_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPuser_role_vLst" Size="50,20">
<OnClick><submit next="user_role_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\user_role_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVuser_role"><Ctrls>
<ListCtrl Heading="role_name,250;layout,250;insert_time,150;insert_emp,55;del_opera,55;del_time,150;opera,55;role_id,55;" loadedclick="0" ToolTip="ttp_user_role_v" OnLoad="init" Name="user_role_vLst" Size="700,450">
	<DbDetails>
<Index>role_id</Index>
<DbTable>his.user_role u left join his.users u0 on u.opera=u0.user_id</DbTable>
<Data>u.role_name,u.layout,u.insert_time,u.insert_emp,u.del_opera,u.del_time,u0.user_name opera,u.role_id</Data>
<Order>role_id</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>role_id='%{user_role_vLst[role_id]}'</Where></DbDetails><submit next="$this.user_role.user_roleLst" namelist="DbDetails"/><assign name="$this.user_role.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.user_role</DbTable>
<Where>role_id='%{user_role_vLst[role_id]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_user_role" expr="js(%{user_role_vLst[currentpage]}+1)"/>
<assign name="pgscb_user_role" function="SetSel" expr="js(%{user_role_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\department_v.xml" Text="department_v" Name="department_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\department_Ve.xml" Text="department" Name="department" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\department.xml" name="department">
<Lang name="department" value="部门"/>
<Lang name="department_v" value="部门"/>
<Lang name="TabEditdepartment" value="department Edit"/>
<Lang name="TabViewdepartment" value="department View"/>
<Lang name="departname" value="部门名"/>
<Lang name="ttp_departname" value="部门名"/>
<Lang name="opera" value="操作者"/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="uptime" value="更新时间"/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="departmentid" value=""/>
<Lang name="ttp_departmentid" value=""/>
<Lang name="ttp_operationdepartment" value=""/>
<Lang name="ttp_createdepartment" value=""/>
<Lang name="ttp_modifydepartment" value=""/>
<Lang name="ttp_resetdepartment" value=""/>
<Lang name="ttp_deletedepartment" value=""/>
<Lang name="ttp_refreshdepartment" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="department" Name="GBdepartment" id="department" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\department_GBDEDIT.xml" Name="GBDEDITdepartment"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_departname"><Ctrls>
<Label Align="Right" Text="departname" Name="lb_departname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_departname" Name="departname" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_departmentid" Visible="false"><Ctrls>
<Label Align="Right" Text="departmentid" overlap="pre" Name="lb_departmentid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_departmentid" overlap="pre" Name="departmentid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{departmentid}'"><SetVisible name="insertdepartment" Visible="0"/><SetVisible name="modifydepartment" Visible="1"/><else/><SetVisible name="insertdepartment" Visible="1"/><SetVisible name="modifydepartment" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\department_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEdepartment" Size="100,100"><Ctrls>
<Button sqlpkinsert="departmentid" Text="create" ToolTip="ttp_createdepartment" Name="insertdepartment" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.department</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>departname</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertdepartment[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="departmentLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.department_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifydepartment" Name="modifydepartment" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.department</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>departname</Data>
<DataEx>opera,uptime;'%{operaid}',now()</DataEx>
<Where>departmentid='%{departmentid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifydepartment[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="departmentLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.department_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetdepartment" Name="resetdepartment" Size="50,20">
<OnClick>
<submit next="GBDEDITdepartment" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchdepartment" Name="gsearchdepartment" Size="50,20" visible="false">
<OnClick>
<search next="departmentLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITdepartment" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\department_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVdepartment" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_department" Name="departmentLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>departmentid</Index>
<DbTable>his.department</DbTable>
<Data>departname,opera,uptime,departmentid</Data>
<Order>departmentid</Order></DbDetails>
<OnClick><assign name="opera[user_id]" function="SetSel" expr="%{departmentLst[opera]}"/>
<if cond="'%{departmentid}'"><SetVisible name="insertdepartment" Visible="0"/><SetVisible name="modifydepartment" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertdepartment" Visible="1"/><SetVisible name="modifydepartment" Visible="0"/></OnActivate>
</WndTap>
</WndTaps>
<var name="searchtmpl"><departname format="(d.departname like '%%{opvalue}%')"/><opera format="d.opera='%{opvalue}'"/><uptime format="(d.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><departmentid format="(d.departmentid like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\department.xml" name="department">
<Lang name="department" value="部门"/>
<Lang name="department_v" value="部门"/>
<Lang name="TabEditdepartment" value="department Edit"/>
<Lang name="TabViewdepartment" value="department View"/>
<Lang name="departname" value="部门名"/>
<Lang name="ttp_departname" value="部门名"/>
<Lang name="opera" value="操作者"/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="uptime" value="更新时间"/>
<Lang name="ttp_uptime" value="更新时间"/>
<Lang name="departmentid" value=""/>
<Lang name="ttp_departmentid" value=""/>
<Lang name="ttp_operationdepartment" value=""/>
<Lang name="ttp_createdepartment" value=""/>
<Lang name="ttp_modifydepartment" value=""/>
<Lang name="ttp_resetdepartment" value=""/>
<Lang name="ttp_deletedepartment" value=""/>
<Lang name="ttp_refreshdepartment" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="department" Name="GBdepartment" id="department" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\department_Vs.xml" text="Search" toggle="1" Name="GBDEDITdepartment"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_departname"><Ctrls>
<Label Align="Right" Text="departname" Name="lb_departname" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_departname" Name="departname" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVdepartment" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.department.GBDEDITdepartment" function="reset"/><assign name="$this.department.frmwndctrl" expr="%{$this.department_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetdepartment" Name="resetdepartment" Size="50,20">	<OnClick>	<submit next="GBDEDITdepartment" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchdepartment" Name="gsearchdepartment" Size="50,20">	<OnClick>	
<search next="department_vLst" listed="0" prefixwhere="0" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITdepartment" namelist="search" function="search"/>	
<search next="records_department" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITdepartment" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\department_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGdepartment"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_department" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>departmentid</Index>
<DbTable>his.department d left join his.users u on d.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>departmentid</Order><Queryformat>select %{data} from (select d.departmentid from %{dbtable} %{where} GROUP BY d.departmentid  ORDER BY d.departmentid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_department" expr="js(Math.ceil(%{records_department}/%{department_vLst[countsperpage]}))"/>
<assign name="pgscb_department" function="setitems" expr="js('1~'+Math.ceil(%{records_department}/%{department_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_department" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_department" Size="30,20"/>
<Button Text="go2Page" Name="go2pagedepartment_vLst" Size="50,20"><OnClick><submit next="department_vLst" function="GetPage(%{pgcur_department}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\department_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVdepartment"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialdepartment" Size="50,20">
<OnClick><submit next="department_vLst" function="initial"/><submit next="records_department" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPdepartment_vLst" Size="50,20">
<OnClick><submit next="department_vLst" function="GetPage(first)"/><submit next="records_department"/></OnClick></Button>
<Button Text="prepage" Name="PREdepartment_vLst" Size="50,20">
<OnClick><submit next="department_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPdepartment_vLst" Size="50,20">
<OnClick><submit next="department_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\department_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVdepartment"><Ctrls>
<ListCtrl Heading="departname,250;opera,55;uptime,150;departmentid,30;" loadedclick="0" ToolTip="ttp_department_v" OnLoad="init" Name="department_vLst" Size="700,450">
	<DbDetails>
<Index>departmentid</Index>
<DbTable>his.department d left join his.users u on d.opera=u.user_id</DbTable>
<Data>d.departname,u.user_name opera,d.uptime,d.departmentid</Data>
<Order>departmentid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>departmentid='%{department_vLst[departmentid]}'</Where></DbDetails><submit next="$this.department.departmentLst" namelist="DbDetails"/><assign name="$this.department.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.department</DbTable>
<Where>departmentid='%{department_vLst[departmentid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_department" expr="js(%{department_vLst[currentpage]}+1)"/>
<assign name="pgscb_department" function="SetSel" expr="js(%{department_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_t_vm.xml" Text="xiefang_t_v" Name="xiefang_t_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_t_Ve.xml" Text="xiefang_t" Name="xiefang_t" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr=""/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\xiefang_t.xml" name="xiefang_t">
<Lang name="xiefang_t" value="协方"/>
<Lang name="xiefang_t_v" value="协方"/>
<Lang name="TabEditxiefang_t" value="xiefang_t Edit"/>
<Lang name="TabViewxiefang_t" value="xiefang_t View"/>
<Lang name="xiefang_no" value="协方编号"/>
<Lang name="ttp_xiefang_no" value="协方编号"/>
<Lang name="xiefang_name" value="协方名"/>
<Lang name="ttp_xiefang_name" value="协方名"/>
<Lang name="xiefang_forill" value="协方针对"/>
<Lang name="ttp_xiefang_forill" value="协方针对"/>
<Lang name="xiefang_jianyiji" value="协方建议剂次"/>
<Lang name="ttp_xiefang_jianyiji" value="协方建议剂次"/>
<Lang name="xiefang_chuchu" value="协方出处"/>
<Lang name="ttp_xiefang_chuchu" value="协方出处"/>
<Lang name="huanzhe_fallill_time" value=""/>
<Lang name="ttp_huanzhe_fallill_time" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="deltime" value=""/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="delemp" value=""/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="xiefangid" value=""/>
<Lang name="ttp_xiefangid" value=""/>
<Lang name="ttp_operationxiefang_t" value=""/>
<Lang name="ttp_createxiefang_t" value=""/>
<Lang name="ttp_modifyxiefang_t" value=""/>
<Lang name="ttp_resetxiefang_t" value=""/>
<Lang name="ttp_deletexiefang_t" value=""/>
<Lang name="ttp_refreshxiefang_t" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\xiefang_detail.xml" name="xiefang_detail">
<Lang name="xiefang_detail" value="xiefang_detail"/>
<Lang name="TabEditxiefang_detail" value="xiefang_detail Edit"/>
<Lang name="TabViewxiefang_detail" value="xiefang_detail View"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="medicinenopy" value="药名拼音"/>
<Lang name="ttp_medicinenopy" value="拼音"/>
<Lang name="medicinenocn" value="药名中文"/>
<Lang name="ttp_medicinenocn" value="药名中文"/>
<Lang name="medicine_pweight" value="参考剂量"/>
<Lang name="ttp_medicine_pweight" value="参考剂量"/>
<Lang name="medicineno" value="药物编码"/>
<Lang name="ttp_medicineno" value="药物编码"/>
<Lang name="delemp" value=""/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="deltime" value=""/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="xiefangid" value=""/>
<Lang name="ttp_xiefangid" value="协方号"/>
<Lang name="xiefang_detailid" value=""/>
<Lang name="ttp_xiefang_detailid" value=""/>
<Lang name="ttp_operationxiefang_detail" value=""/>
<Lang name="ttp_createxiefang_detail" value=""/>
<Lang name="ttp_modifyxiefang_detail" value=""/>
<Lang name="ttp_resetxiefang_detail" value=""/>
<Lang name="ttp_deletexiefang_detail" value=""/>
<Lang name="ttp_refreshxiefang_detail" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="xiefang_t" Name="GBxiefang_t" id="xiefang_t" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_t_GBDEDIT.xml" Name="GBDEDITxiefang_t"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_xiefang_no"><Ctrls>
<Label Align="Right" Text="xiefang_no" Name="lb_xiefang_no" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefang_no" Name="xiefang_no" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_xiefang_name"><Ctrls>
<Label Align="Right" Text="xiefang_name" Name="lb_xiefang_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefang_name" Name="xiefang_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dept_category"><Ctrls>
<Label Align="Right" Text="dept_category" onload="init" Name="lb_dept_category" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_dept_category" onload="init" Name="dept_category" Size="170,100">
	<DbDetails>
<Index>dept_categoryid</Index>
<DbTable>his.dept_category</DbTable>
<Data>dept_categoryname,dept_categoryid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medication_type"><Ctrls>
<Label Align="Right" Text="medication_type" onload="init" Name="lb_medication_type" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_medication_type" onload="init" Name="medication_type" Size="170,100">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=4</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_xiefang_forill"><Ctrls>
<Label Align="Right" Text="xiefang_forill" Name="lb_xiefang_forill" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefang_forill" Name="xiefang_forill" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_xiefang_jianyiji"><Ctrls>
<Label Align="Right" Text="xiefang_jianyiji" Name="lb_xiefang_jianyiji" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefang_jianyiji" Name="xiefang_jianyiji" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_xiefang_chuchu"><Ctrls>
<Label Align="Right" Text="xiefang_chuchu" Name="lb_xiefang_chuchu" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefang_chuchu" Name="xiefang_chuchu" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_huanzhe_fallill_time"><Ctrls>
<Label Align="Right" Text="huanzhe_fallill_time" Name="lb_huanzhe_fallill_time" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_huanzhe_fallill_time" Name="huanzhe_fallill_time" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_status" Visible="false"><Ctrls>
<Label Align="Right" Text="status" overlap="pre" Name="lb_status" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_status" overlap="pre" Name="status" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_deltime" Visible="false"><Ctrls>
<Label Align="Right" Text="deltime" overlap="pre" Name="lb_deltime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_deltime" overlap="pre" Name="deltime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_delemp" Visible="false"><Ctrls>
<Label Align="Right" Text="delemp" overlap="pre" Name="lb_delemp" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_delemp" overlap="pre" Name="delemp" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_xiefangid" Visible="false"><Ctrls>
<Label Align="Right" Text="xiefangid" overlap="pre" Name="lb_xiefangid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefangid" overlap="pre" Name="xiefangid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{xiefangid}'"><SetVisible name="insertxiefang_t" Visible="0"/><SetVisible name="modifyxiefang_t" Visible="1"/><else/><SetVisible name="insertxiefang_t" Visible="1"/><SetVisible name="modifyxiefang_t" Visible="0"/></if><if cond="'%{xiefangid}'"><DbDetails><Where>xiefangid='%{xiefangid}'</Where></DbDetails><submit next="xiefang_detail_vLst" namelist="DbDetails"/><else/><submit next="xiefang_detail_vLst" function="resetcontent"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_t_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPExiefang_t" Size="100,100"><Ctrls>
<Button sqlpkinsert="xiefangid" Text="create" ToolTip="ttp_createxiefang_t" Name="insertxiefang_t" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.xiefang_t</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>xiefang_no,xiefang_name,dept_category[dept_categoryid],medication_type[statuscode],xiefang_forill,xiefang_jianyiji,xiefang_chuchu,huanzhe_fallill_time</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertxiefang_t[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="xiefang_tLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="0"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.xiefang_t_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifyxiefang_t" Name="modifyxiefang_t" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.xiefang_t</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>xiefang_no,xiefang_name,dept_category[dept_categoryid],medication_type[statuscode],xiefang_forill,xiefang_jianyiji,xiefang_chuchu,huanzhe_fallill_time</Data>
<DataEx>opera;'%{operaid}'</DataEx>
<Where>xiefangid='%{xiefangid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifyxiefang_t[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="xiefang_tLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.xiefang_t_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetxiefang_t" Name="resetxiefang_t" Size="50,20">
<OnClick>
<submit next="GBDEDITxiefang_t" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchxiefang_t" Name="gsearchxiefang_t" Size="50,20" visible="false">
<OnClick>
<search next="xiefang_tLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITxiefang_t" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_t_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVxiefang_t" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_xiefang_t" Name="xiefang_tLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>xiefangid</Index>
<DbTable>his.xiefang_t</DbTable>
<Data>xiefang_no,xiefang_name,dept_category,medication_type,xiefang_forill,xiefang_jianyiji,xiefang_chuchu,huanzhe_fallill_time,opera,status,deltime,delemp,xiefangid</Data>
<Order>xiefangid</Order></DbDetails>
<OnClick><assign name="dept_category[dept_categoryid]" function="SetSel" expr="%{xiefang_tLst[dept_category]}"/><assign name="medication_type[statuscode]" function="SetSel" expr="%{xiefang_tLst[medication_type]}"/><assign name="opera[user_id]" function="SetSel" expr="%{xiefang_tLst[opera]}"/>
<if cond="'%{xiefangid}'"><SetVisible name="insertxiefang_t" Visible="0"/><SetVisible name="modifyxiefang_t" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox>
<BR/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_detail_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVxiefang_detail"><Ctrls>
<ListCtrl Heading="medicineid,55;medicinenopy,250;medicinenocn,250;medicine_pweight,50;medicineno,250;delemp,55;deltime,150;xiefangid,55;xiefang_detailid,55;" loadedclick="0" ToolTip="ttp_xiefang_detail_v" Name="xiefang_detail_vLst" Size="700,450">
	<DbDetails>
<Index>xiefang_detailid</Index>
<DbTable>his.xiefang_detail x left join his.medicine_info m on x.medicineid=m.medicineid</DbTable>
<Data>m.medicineno medicineid,x.medicinenopy,x.medicinenocn,x.medicine_pweight,x.medicineno,x.delemp,x.deltime,x.xiefangid,x.xiefang_detailid</Data>
<Order>xiefang_detailid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op mustselected="0" text="addone"><if cond="!%{xiefangid}"><alert expr="xiefangid is Empty!"/><else/><submit next="$parent.xiefang_detail.GBDEDITxiefang_detail" function="reset"/><assign name="$parent.xiefang_detail.xiefangid" expr="%{xiefangid}"/><assign name="$parent.xiefang_detail.frmwndctrl" expr="%{this}"/></if></op>
<op text="modify"><DbDetails><Where>xiefang_detailid='%{xiefang_detail_vLst[xiefang_detailid]}'</Where></DbDetails><submit next="$parent.xiefang_detail.xiefang_detailLst" namelist="DbDetails"/><assign name="$parent.xiefang_detail.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.xiefang_detail</DbTable>
<Where>xiefang_detailid='%{xiefang_detail_vLst[xiefang_detailid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertxiefang_t" Visible="1"/><SetVisible name="modifyxiefang_t" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_detail_Ve.xml" Text="xiefang_detail" Name="xiefang_detail" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="xiefangid"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\xiefang_detail.xml" name="xiefang_detail">
<Lang name="xiefang_detail" value="xiefang_detail"/>
<Lang name="TabEditxiefang_detail" value="xiefang_detail Edit"/>
<Lang name="TabViewxiefang_detail" value="xiefang_detail View"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value=""/>
<Lang name="medicinenopy" value="药名拼音"/>
<Lang name="ttp_medicinenopy" value="拼音"/>
<Lang name="medicinenocn" value="药名中文"/>
<Lang name="ttp_medicinenocn" value="药名中文"/>
<Lang name="medicine_pweight" value="参考剂量"/>
<Lang name="ttp_medicine_pweight" value="参考剂量"/>
<Lang name="medicineno" value="药物编码"/>
<Lang name="ttp_medicineno" value="药物编码"/>
<Lang name="delemp" value=""/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="deltime" value=""/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="xiefangid" value=""/>
<Lang name="ttp_xiefangid" value="协方号"/>
<Lang name="xiefang_detailid" value=""/>
<Lang name="ttp_xiefang_detailid" value=""/>
<Lang name="ttp_operationxiefang_detail" value=""/>
<Lang name="ttp_createxiefang_detail" value=""/>
<Lang name="ttp_modifyxiefang_detail" value=""/>
<Lang name="ttp_resetxiefang_detail" value=""/>
<Lang name="ttp_deletexiefang_detail" value=""/>
<Lang name="ttp_refreshxiefang_detail" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="xiefang_detail" Name="GBxiefang_detail" id="xiefang_detail" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_detail_GBDEDIT.xml" Name="GBDEDITxiefang_detail"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="150,20">
	<DbDetails fcsm="true">
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicineno,medicinenocn,medicinenopy,medicineid</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
<MagicCtrl Name="pickmedicineid" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$parent.medicine_info_pick.frmwndctrl" expr="xiefang_detail.medicineid"/><DbDetails><Where/></DbDetails><submit next="$parent.medicine_info_pick.medicine_info_vLst" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenopy"><Ctrls>
<Label Align="Right" Text="medicinenopy" Name="lb_medicinenopy" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenopy" Name="medicinenopy" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenocn"><Ctrls>
<Label Align="Right" Text="medicinenocn" Name="lb_medicinenocn" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenocn" Name="medicinenocn" Size="170,20"/>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicine_pweight"><Ctrls>
<Label Align="Right" Text="medicine_pweight" Name="lb_medicine_pweight" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicine_pweight" Name="medicine_pweight" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_medicineno" Visible="false"><Ctrls>
<Label Align="Right" Text="medicineno" overlap="pre" Name="lb_medicineno" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" overlap="pre" Name="medicineno" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_delemp" Visible="false"><Ctrls>
<Label Align="Right" Text="delemp" overlap="pre" Name="lb_delemp" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_delemp" overlap="pre" Name="delemp" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_deltime" Visible="false"><Ctrls>
<Label Align="Right" Text="deltime" overlap="pre" Name="lb_deltime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_deltime" overlap="pre" Name="deltime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_xiefangid" Visible="false"><Ctrls>
<Label Align="Right" Text="xiefangid" overlap="pre" Name="lb_xiefangid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefangid" overlap="pre" Name="xiefangid" readonly="true" Size="170,20" Visible="false"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_xiefang_detailid" Visible="false"><Ctrls>
<Label Align="Right" Text="xiefang_detailid" overlap="pre" Name="lb_xiefang_detailid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefang_detailid" overlap="pre" Name="xiefang_detailid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{xiefang_detailid}'"><SetVisible name="insertxiefang_detail" Visible="0"/><SetVisible name="modifyxiefang_detail" Visible="1"/><else/><SetVisible name="insertxiefang_detail" Visible="1"/><SetVisible name="modifyxiefang_detail" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_detail_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPExiefang_detail" Size="100,100"><Ctrls>
<Button sqlpkinsert="xiefang_detailid" Text="create" ToolTip="ttp_createxiefang_detail" Name="insertxiefang_detail" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.xiefang_detail</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicineid[medicineid],medicinenopy,medicinenocn,medicine_pweight,medicineno,xiefangid</Data>
<DataEx/>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertxiefang_detail[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="xiefang_detailLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.xiefang_detail_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifyxiefang_detail" Name="modifyxiefang_detail" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.xiefang_detail</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicineid[medicineid],medicinenopy,medicinenocn,medicine_pweight,medicineno</Data>
<DataEx/>
<Where>xiefang_detailid='%{xiefang_detailid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifyxiefang_detail[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="xiefang_detailLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.xiefang_detail_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetxiefang_detail" Name="resetxiefang_detail" Size="50,20">
<OnClick>
<submit next="GBDEDITxiefang_detail" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchxiefang_detail" Name="gsearchxiefang_detail" Size="50,20" visible="false">
<OnClick>
<search next="xiefang_detailLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITxiefang_detail" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_detail_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVxiefang_detail" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_xiefang_detail" Name="xiefang_detailLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>xiefang_detailid</Index>
<DbTable>his.xiefang_detail</DbTable>
<Data>medicineid,medicinenopy,medicinenocn,medicine_pweight,medicineno,delemp,deltime,xiefangid,xiefang_detailid</Data>
<Order>xiefang_detailid</Order></DbDetails>
<OnClick><assign name="medicineid[medicineid]" function="SetSel" expr="%{xiefang_detailLst[medicineid]}"/>
<if cond="'%{xiefang_detailid}'"><SetVisible name="insertxiefang_detail" Visible="0"/><SetVisible name="modifyxiefang_detail" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertxiefang_detail" Visible="1"/><SetVisible name="modifyxiefang_detail" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_pick.xml" Text="medicine_info_Pick" Name="medicine_info_pick" popup="1">
<var name="searchtmpl"><medicineno format="(m.medicineno like '%%{opvalue}%')"/><medicinenocn format="(m.medicinenocn like '%%{opvalue}%')"/><medicinenopy format="(m.medicinenopy like '%%{opvalue}%')"/><packno format="(m.packno like '%%{opvalue}%')"/><medicinecode format="(m.medicinecode like '%%{opvalue}%')"/><density format="(m.density like '%%{opvalue}%')"/><equivalent format="(m.equivalent like '%%{opvalue}%')"/><price format="(m.price like '%%{opvalue}%')"/><warningval_jiliang format="(m.warningval_jiliang like '%%{opvalue}%')"/><warningval_stock format="(m.warningval_stock like '%%{opvalue}%')"/><warningval_cabinet format="(m.warningval_cabinet like '%%{opvalue}%')"/><ispoison format="m.ispoison is %{opvalue}"/><isanesthetic format="m.isanesthetic is %{opvalue}"/><medicineid format="(m.medicineid like '%%{opvalue}%')"/><opera format="m.opera='%{opvalue}'"/><uptime format="(m.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><isdel format="m.isdel is %{opvalue}"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medicine_info.xml" name="medicine_info">
<Lang name="medicine_info" value="药品信息"/>
<Lang name="medicine_info_v" value="药品信息"/>
<Lang name="TabEditmedicine_info" value="medicine_info Edit"/>
<Lang name="TabViewmedicine_info" value="medicine_info View"/>
<Lang name="medicineno" value="药品编号"/>
<Lang name="ttp_medicineno" value="药品编号"/>
<Lang name="medicinecode" value="HIS药品编号"/>
<Lang name="ttp_medicinecode" value="HIS药品编号"/>
<Lang name="medicinenocn" value="药名中文"/>
<Lang name="ttp_medicinenocn" value="药名中文"/>
<Lang name="medicinenopy" value="药名拼音"/>
<Lang name="ttp_medicinenopy" value="药名拼音"/>
<Lang name="packno" value="包装码"/>
<Lang name="ttp_packno" value="包装码"/>
<Lang name="density" value="密度"/>
<Lang name="ttp_density" value=""/>
<Lang name="equivalent" value="当量"/>
<Lang name="ttp_equivalent" value=""/>
<Lang name="currentqty" value="当前数量"/>
<Lang name="ttp_currentqty" value="当前数量"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="warningval_jiliang" value="剂量上限"/>
<Lang name="ttp_warningval_jiliang" value=""/>
<Lang name="warningval_stock" value="库存安全值"/>
<Lang name="ttp_warningval_stock" value="库存安全值"/>
<Lang name="warningval_cabinet" value="药柜安全值"/>
<Lang name="ttp_warningval_cabinet" value="药柜安全值"/>
<Lang name="warning_validdays" value="有效期报警值"/>
<Lang name="ttp_warning_validdays" value="有效期报警值"/>
<Lang name="publicqty" value=""/>
<Lang name="ttp_publicqty" value=""/>
<Lang name="ispoison" value="毒药"/>
<Lang name="ttp_ispoison" value="毒药"/>
<Lang name="isanesthetic" value="麻药"/>
<Lang name="ttp_isanesthetic" value="麻药"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value="SEQ"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="ttp_operationmedicine_info" value=""/>
<Lang name="ttp_createmedicine_info" value=""/>
<Lang name="ttp_modifymedicine_info" value=""/>
<Lang name="ttp_resetmedicine_info" value=""/>
<Lang name="ttp_deletemedicine_info" value=""/>
<Lang name="ttp_refreshmedicine_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="medicine_info" Name="GBmedicine_info" id="medicine_info" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Vs.xml" text="Search" toggle="1" Name="GBDEDITmedicine_info"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineno"><Ctrls>
<Label Align="Right" Text="medicineno" Name="lb_medicineno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" Name="medicineno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenocn"><Ctrls>
<Label Align="Right" Text="medicinenocn" Name="lb_medicinenocn" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenocn" Name="medicinenocn" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenopy"><Ctrls>
<Label Align="Right" Text="medicinenopy" Name="lb_medicinenopy" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenopy" Name="medicinenopy" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVmedicine_info" Size="100,20"><Ctrls>
<Button Text="reset" ToolTip="ttp_resetmedicine_info" Name="resetmedicine_info" Size="50,20">	<OnClick>	<submit next="GBDEDITmedicine_info" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchmedicine_info" Name="gsearchmedicine_info" Size="50,20">	<OnClick>	
<search next="medicine_info_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedicine_info" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm12 md12 lg12" Name="GBDVmedicine_info"><Ctrls>
<ListCtrl Heading="medicineno,250;medicinenocn,250;medicinenopy,250;packno,250;medicinecode,250;density,50;equivalent,55;price,90;warningval_jiliang,90;warningval_stock,25;warningval_cabinet,25;ispoison,60;isanesthetic,60;medicineid,55;opera,55;uptime,150;isdel,60;" loadedclick="0" ToolTip="ttp_medicine_info_v" Name="medicine_info_vLst" Size="700,450">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info m left join his.users u on m.opera=u.user_id</DbTable>
<Data>m.medicineno,m.medicinenocn,m.medicinenopy,m.packno,m.medicinecode,m.density,m.equivalent,m.price,m.warningval_jiliang,m.warningval_stock,m.warningval_cabinet,m.ispoison,m.isanesthetic,m.medicineid,u.user_name opera,m.uptime,m.isdel</Data>
<Order>medicineid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<OnClick><if cond="%{medicine_info_vLst[medicineid]}"><DbDetails><Where>medicineid='%{medicine_info_vLst[medicineid]}'</Where></DbDetails><submit next="$parent.%{frmwndctrl}" namelist="DbDetails"/><submit function="onok"/></if></OnClick>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
</WndTaps>
<var name="searchtmpl"><xiefang_no format="(x.xiefang_no like '%%{opvalue}%')"/><xiefang_name format="(x.xiefang_name like '%%{opvalue}%')"/><xiefang_forill format="(x.xiefang_forill like '%%{opvalue}%')"/><xiefang_jianyiji format="(x.xiefang_jianyiji like '%%{opvalue}%')"/><xiefang_chuchu format="(x.xiefang_chuchu like '%%{opvalue}%')"/><huanzhe_fallill_time format="(x.huanzhe_fallill_time between '%{huanzhe_fallill_time[datetime]}' and '%{huanzhe_fallill_time[datetime2]}')"/><opera format="x.opera='%{opvalue}'"/><status format="(x.status like '%%{opvalue}%')"/><deltime format="(x.deltime between '%{deltime[datetime]}' and '%{deltime[datetime2]}')"/><delemp format="(x.delemp like '%%{opvalue}%')"/><xiefangid format="(x.xiefangid like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\xiefang_t.xml" name="xiefang_t">
<Lang name="xiefang_t" value="协方"/>
<Lang name="xiefang_t_v" value="协方"/>
<Lang name="TabEditxiefang_t" value="xiefang_t Edit"/>
<Lang name="TabViewxiefang_t" value="xiefang_t View"/>
<Lang name="xiefang_no" value="协方编号"/>
<Lang name="ttp_xiefang_no" value="协方编号"/>
<Lang name="xiefang_name" value="协方名"/>
<Lang name="ttp_xiefang_name" value="协方名"/>
<Lang name="xiefang_forill" value="协方针对"/>
<Lang name="ttp_xiefang_forill" value="协方针对"/>
<Lang name="xiefang_jianyiji" value="协方建议剂次"/>
<Lang name="ttp_xiefang_jianyiji" value="协方建议剂次"/>
<Lang name="xiefang_chuchu" value="协方出处"/>
<Lang name="ttp_xiefang_chuchu" value="协方出处"/>
<Lang name="huanzhe_fallill_time" value=""/>
<Lang name="ttp_huanzhe_fallill_time" value=""/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="status" value=""/>
<Lang name="ttp_status" value="状态"/>
<Lang name="deltime" value=""/>
<Lang name="ttp_deltime" value="删除时间"/>
<Lang name="delemp" value=""/>
<Lang name="ttp_delemp" value="删除人"/>
<Lang name="xiefangid" value=""/>
<Lang name="ttp_xiefangid" value=""/>
<Lang name="ttp_operationxiefang_t" value=""/>
<Lang name="ttp_createxiefang_t" value=""/>
<Lang name="ttp_modifyxiefang_t" value=""/>
<Lang name="ttp_resetxiefang_t" value=""/>
<Lang name="ttp_deletexiefang_t" value=""/>
<Lang name="ttp_refreshxiefang_t" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="xiefang_t" Name="GBxiefang_t" id="xiefang_t" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_t_Vs.xml" text="Search" toggle="1" Name="GBDEDITxiefang_t"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_xiefang_no"><Ctrls>
<Label Align="Right" Text="xiefang_no" Name="lb_xiefang_no" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefang_no" Name="xiefang_no" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_xiefang_name"><Ctrls>
<Label Align="Right" Text="xiefang_name" Name="lb_xiefang_name" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefang_name" Name="xiefang_name" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_dept_category"><Ctrls>
<Label Align="Right" Text="dept_category" onload="init" Name="lb_dept_category" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_dept_category" onload="init" Name="dept_category" Size="170,100">
	<DbDetails>
<Index>dept_categoryid</Index>
<DbTable>his.dept_category</DbTable>
<Data>dept_categoryname,dept_categoryid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medication_type"><Ctrls>
<Label Align="Right" Text="medication_type" onload="init" Name="lb_medication_type" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_medication_type" onload="init" Name="medication_type" Size="170,100">
	<DbDetails>
<Index>statuscode</Index>
<DbTable>his.status_option</DbTable>
<Data>statusname,statuscode</Data>
<Where>statustype=4</Where>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_xiefang_forill"><Ctrls>
<Label Align="Right" Text="xiefang_forill" Name="lb_xiefang_forill" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_xiefang_forill" Name="xiefang_forill" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVxiefang_t" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.xiefang_t.GBDEDITxiefang_t" function="reset"/><assign name="$this.xiefang_t.frmwndctrl" expr="%{$this.xiefang_t_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetxiefang_t" Name="resetxiefang_t" Size="50,20">	<OnClick>	<submit next="GBDEDITxiefang_t" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchxiefang_t" Name="gsearchxiefang_t" Size="50,20">	<OnClick>	
<search next="xiefang_t_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITxiefang_t" namelist="search" function="search"/>	
<search next="records_xiefang_t" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITxiefang_t" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_t_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGxiefang_t"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_xiefang_t" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>xiefangid</Index>
<DbTable>his.xiefang_t x left join his.dept_category d on x.dept_category=d.dept_categoryid left join his.status_option s on x.medication_type=s.statuscode left join his.users u on x.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>xiefangid</Order><Queryformat>select %{data} from (select x.xiefangid from %{dbtable} %{where} GROUP BY x.xiefangid  ORDER BY x.xiefangid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_xiefang_t" expr="js(Math.ceil(%{records_xiefang_t}/%{xiefang_t_vLst[countsperpage]}))"/>
<assign name="pgscb_xiefang_t" function="setitems" expr="js('1~'+Math.ceil(%{records_xiefang_t}/%{xiefang_t_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_xiefang_t" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_xiefang_t" Size="30,20"/>
<Button Text="go2Page" Name="go2pagexiefang_t_vLst" Size="50,20"><OnClick><submit next="xiefang_t_vLst" function="GetPage(%{pgcur_xiefang_t}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_t_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVxiefang_t"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialxiefang_t" Size="50,20">
<OnClick><submit next="xiefang_t_vLst" function="initial"/><submit next="records_xiefang_t" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPxiefang_t_vLst" Size="50,20">
<OnClick><submit next="xiefang_t_vLst" function="GetPage(first)"/><submit next="records_xiefang_t"/></OnClick></Button>
<Button Text="prepage" Name="PRExiefang_t_vLst" Size="50,20">
<OnClick><submit next="xiefang_t_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPxiefang_t_vLst" Size="50,20">
<OnClick><submit next="xiefang_t_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\xiefang_t_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVxiefang_t"><Ctrls>
<ListCtrl Heading="xiefang_no,250;xiefang_name,250;dept_category,120;medication_type,120;xiefang_forill,250;xiefang_jianyiji,50;xiefang_chuchu,250;huanzhe_fallill_time,30;opera,55;status,20;deltime,150;delemp,100;xiefangid,55;" loadedclick="0" ToolTip="ttp_xiefang_t_v" OnLoad="init" Name="xiefang_t_vLst" Size="700,450">
	<DbDetails>
<Index>xiefangid</Index>
<DbTable>his.xiefang_t x left join his.dept_category d on x.dept_category=d.dept_categoryid left join his.status_option s on x.medication_type=s.statuscode left join his.users u on x.opera=u.user_id</DbTable>
<Data>x.xiefang_no,x.xiefang_name,d.dept_categoryname dept_category,s.statusname medication_type,x.xiefang_forill,x.xiefang_jianyiji,x.xiefang_chuchu,x.huanzhe_fallill_time,u.user_name opera,x.status,x.deltime,x.delemp,x.xiefangid</Data>
<Order>xiefangid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>xiefangid='%{xiefang_t_vLst[xiefangid]}'</Where></DbDetails><submit next="$this.xiefang_t.xiefang_tLst" namelist="DbDetails"/><assign name="$this.xiefang_t.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.xiefang_t</DbTable>
<Where>xiefangid='%{xiefang_t_vLst[xiefangid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_xiefang_t" expr="js(%{xiefang_t_vLst[currentpage]}+1)"/>
<assign name="pgscb_xiefang_t" function="SetSel" expr="js(%{xiefang_t_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_control_vm.xml" Text="medicine_control_v" Name="medicine_control_v">
<WndTaps>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_control_Ve.xml" Text="medicine_control" Name="medicine_control" popup="1" Ver="2">
<var name="refreshAfterEdit" expr="2"/>
<var name="dataRequired" expr="medicineid[medicineid]"/>
<var name="dataRequireless" expr=""/>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medicine_control.xml" name="medicine_control">
<Lang name="medicine_control" value="中药规则"/>
<Lang name="medicine_control_v" value="中药规则"/>
<Lang name="TabEditmedicine_control" value="medicine_control Edit"/>
<Lang name="TabViewmedicine_control" value="medicine_control View"/>
<Lang name="medicineid" value="药编号1"/>
<Lang name="ttp_medicineid" value="药编号1"/>
<Lang name="medicine2id" value="要编号2"/>
<Lang name="ttp_medicine2id" value="要编号2"/>
<Lang name="relation" value="关系"/>
<Lang name="ttp_relation" value="关系"/>
<Lang name="explains" value="说明"/>
<Lang name="ttp_explains" value="说明"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="controlid" value=""/>
<Lang name="ttp_controlid" value=""/>
<Lang name="ttp_operationmedicine_control" value=""/>
<Lang name="ttp_createmedicine_control" value=""/>
<Lang name="ttp_modifymedicine_control" value=""/>
<Lang name="ttp_resetmedicine_control" value=""/>
<Lang name="ttp_deletemedicine_control" value=""/>
<Lang name="ttp_refreshmedicine_control" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls>
<GroupBox Text="medicine_control" Name="GBmedicine_control" id="medicine_control" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_control_GBDEDIT.xml" Name="GBDEDITmedicine_control"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="150,20">
	<DbDetails fcsm="true">
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineno,medicineid</Data>
<Where>!isdel</Where>
<queryFormat/></DbDetails></TextBox>
<MagicCtrl Name="pickmedicineid" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$parent.medicine_info_pick.frmwndctrl" expr="medicine_control.medicineid"/><DbDetails><Where/></DbDetails><submit next="$parent.medicine_info_pick.medicine_info_vLst" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_relation"><Ctrls>
<Label Align="Right" Text="relation" onload="init" Name="lb_relation" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_relation" onload="init" Name="relation" Size="170,100">
	<DbDetails>
<Index>relationid</Index>
<DbTable>his.medicine_control_type</DbTable>
<Data>relationtype,relationid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicine2id"><Ctrls>
<Label Align="Right" Text="medicine2id" Name="lb_medicine2id" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_medicine2id" Name="medicine2id" Size="150,20">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineno,medicineid</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
<MagicCtrl Name="pickmedicine2id" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$parent.medicine_info_pick.frmwndctrl" expr="medicine_control.medicine2id"/><DbDetails><Where/></DbDetails><submit next="$parent.medicine_info_pick.medicine_info_vLst" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_explains"><Ctrls>
<Label Align="Right" Text="explains" Name="lb_explains" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_explains" Name="explains" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_uptime" Visible="false"><Ctrls>
<Label Align="Right" Text="uptime" overlap="pre" Name="lb_uptime" readonly="true" Size="60,20" Visible="false"/>
<DateTime Weight="170" Text="" ToolTip="ttp_uptime" overlap="pre" Name="uptime" readonly="true" Size="170,20" Visible="false" Format="yyyy-MM-dd HH:mm:ss"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_opera" Visible="false"><Ctrls>
<Label Align="Right" Text="opera" overlap="pre" Name="lb_opera" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_opera" overlap="pre" Name="opera" readonly="true" Size="170,20" Visible="false">
	<DbDetails>
<Index>user_id</Index>
<DbTable>his.users</DbTable>
<Data>user_name,user_id</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" overlap="pre" Name="GB_controlid" Visible="false"><Ctrls>
<Label Align="Right" Text="controlid" overlap="pre" Name="lb_controlid" readonly="true" Size="60,20" Visible="false"/>
<TextBox Weight="170" Text="" ToolTip="ttp_controlid" overlap="pre" Name="controlid" readonly="true" Size="170,20" Visible="false"><OnEnChange><if cond="'%{controlid}'"><SetVisible name="insertmedicine_control" Visible="0"/><SetVisible name="modifymedicine_control" Visible="1"/><else/><SetVisible name="insertmedicine_control" Visible="1"/><SetVisible name="modifymedicine_control" Visible="0"/></if></OnEnChange></TextBox>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_control_GBOPE.xml" cols="xs12 sm6 md4" Name="GBOPEmedicine_control" Size="100,100"><Ctrls>
<Button sqlpkinsert="controlid" Text="create" ToolTip="ttp_createmedicine_control" Name="insertmedicine_control" Size="50,20">
<OnClick>
<DbDetails mode="insert" fcsm="1">
<DbTable>his.medicine_control</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicineid[medicineid],relation[relationid],medicine2id[medicineid],explains</Data>
<DataEx>uptime,opera;now(),'%{operaid}'</DataEx>
<queryFormat>insert into %{table} %{data}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{insertmedicine_control[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medicine_controlLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="1"><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medicine_control_vLst" delay="1000"/></if></if></if></if>
	</OnClick>
	</Button><TAB/>
<Button Text="modify" ToolTip="ttp_modifymedicine_control" Name="modifymedicine_control" Size="50,20">
<OnClick>
<DbDetails mode="update" fcsm="1">
<DbTable>his.medicine_control</DbTable>
<Required>%{dataRequired}</Required>
<Requireless>%{dataRequireless}</Requireless>
<Data>medicineid[medicineid],relation[relationid],medicine2id[medicineid],explains</Data>
<DataEx>uptime,opera;now(),'%{operaid}'</DataEx>
<Where>controlid='%{controlid}'</Where>
<queryFormat>update %{table} set %{data} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><if cond="!%{modifymedicine_control[broke]}"><if cond="%{refreshAfterEdit}==1"><submit next="medicine_controlLst" delay="1000"/><elseif cond="%{refreshAfterEdit}==2"/><if cond="'%{frmwndctrl}'"><submit next="%{frmwndctrl}" delay="1000"/><else/><submit next="$parent.medicine_control_vLst" delay="1000"/></if></if></if>
	</OnClick>
</Button><TAB/>
<Button Text="reset" ToolTip="ttp_resetmedicine_control" Name="resetmedicine_control" Size="50,20">
<OnClick>
<submit next="GBDEDITmedicine_control" function="reset"/>
	</OnClick>
</Button><TAB/>
<Button Text="Search" ToolTip="ttp_gsearchmedicine_control" Name="gsearchmedicine_control" Size="50,20" visible="false">
<OnClick>
<search next="medicine_controlLst" listed="0" prefixwhere="0" prefixand="0" inputed="1"/><submit next="GBDEDITmedicine_control" namelist="search" function="search"/>
	</OnClick>
</Button><TAB/>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_control_Vh.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedicine_control" visible="0"><Ctrls>
<ListCtrl loadedclick="1" ToolTip="ttp_medicine_control" Name="medicine_controlLst" Size="70,20" visible="0">
	<DbDetails fcsm="1">
<Index>controlid</Index>
<DbTable>his.medicine_control</DbTable>
<Data>medicineid,relation,medicine2id,explains,uptime,opera,controlid</Data>
<Order>controlid</Order></DbDetails>
<OnClick><assign name="medicineid[medicineid]" function="SetSel" expr="%{medicine_controlLst[medicineid]}"/><assign name="relation[relationid]" function="SetSel" expr="%{medicine_controlLst[relation]}"/><assign name="medicine2id[medicineid]" function="SetSel" expr="%{medicine_controlLst[medicine2id]}"/><assign name="opera[user_id]" function="SetSel" expr="%{medicine_controlLst[opera]}"/>
<if cond="'%{controlid}'"><SetVisible name="insertmedicine_control" Visible="0"/><SetVisible name="modifymedicine_control" Visible="1"/></if>
</OnClick>
</ListCtrl>
</Ctrls></GroupBox></Ctrls></GroupBox></Ctrls>
	<OnChanged/>
	<OnActivate><SetVisible name="insertmedicine_control" Visible="1"/><SetVisible name="modifymedicine_control" Visible="0"/></OnActivate>
</WndTap>
<WndTap xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_pick.xml" Text="medicine_info_Pick" Name="medicine_info_pick" popup="1">
<var name="searchtmpl"><medicineno format="(m.medicineno like '%%{opvalue}%')"/><medicinenocn format="(m.medicinenocn like '%%{opvalue}%')"/><medicinenopy format="(m.medicinenopy like '%%{opvalue}%')"/><packno format="(m.packno like '%%{opvalue}%')"/><medicinecode format="(m.medicinecode like '%%{opvalue}%')"/><density format="(m.density like '%%{opvalue}%')"/><equivalent format="(m.equivalent like '%%{opvalue}%')"/><price format="(m.price like '%%{opvalue}%')"/><warningval_jiliang format="(m.warningval_jiliang like '%%{opvalue}%')"/><warningval_stock format="(m.warningval_stock like '%%{opvalue}%')"/><warningval_cabinet format="(m.warningval_cabinet like '%%{opvalue}%')"/><ispoison format="m.ispoison is %{opvalue}"/><isanesthetic format="m.isanesthetic is %{opvalue}"/><medicineid format="(m.medicineid like '%%{opvalue}%')"/><opera format="m.opera='%{opvalue}'"/><uptime format="(m.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><isdel format="m.isdel is %{opvalue}"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medicine_info.xml" name="medicine_info">
<Lang name="medicine_info" value="药品信息"/>
<Lang name="medicine_info_v" value="药品信息"/>
<Lang name="TabEditmedicine_info" value="medicine_info Edit"/>
<Lang name="TabViewmedicine_info" value="medicine_info View"/>
<Lang name="medicineno" value="药品编号"/>
<Lang name="ttp_medicineno" value="药品编号"/>
<Lang name="medicinecode" value="HIS药品编号"/>
<Lang name="ttp_medicinecode" value="HIS药品编号"/>
<Lang name="medicinenocn" value="药名中文"/>
<Lang name="ttp_medicinenocn" value="药名中文"/>
<Lang name="medicinenopy" value="药名拼音"/>
<Lang name="ttp_medicinenopy" value="药名拼音"/>
<Lang name="packno" value="包装码"/>
<Lang name="ttp_packno" value="包装码"/>
<Lang name="density" value="密度"/>
<Lang name="ttp_density" value=""/>
<Lang name="equivalent" value="当量"/>
<Lang name="ttp_equivalent" value=""/>
<Lang name="currentqty" value="当前数量"/>
<Lang name="ttp_currentqty" value="当前数量"/>
<Lang name="price" value="价格"/>
<Lang name="ttp_price" value="价格"/>
<Lang name="warningval_jiliang" value="剂量上限"/>
<Lang name="ttp_warningval_jiliang" value=""/>
<Lang name="warningval_stock" value="库存安全值"/>
<Lang name="ttp_warningval_stock" value="库存安全值"/>
<Lang name="warningval_cabinet" value="药柜安全值"/>
<Lang name="ttp_warningval_cabinet" value="药柜安全值"/>
<Lang name="warning_validdays" value="有效期报警值"/>
<Lang name="ttp_warning_validdays" value="有效期报警值"/>
<Lang name="publicqty" value=""/>
<Lang name="ttp_publicqty" value=""/>
<Lang name="ispoison" value="毒药"/>
<Lang name="ttp_ispoison" value="毒药"/>
<Lang name="isanesthetic" value="麻药"/>
<Lang name="ttp_isanesthetic" value="麻药"/>
<Lang name="medicineid" value=""/>
<Lang name="ttp_medicineid" value="SEQ"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作员"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="ttp_operationmedicine_info" value=""/>
<Lang name="ttp_createmedicine_info" value=""/>
<Lang name="ttp_modifymedicine_info" value=""/>
<Lang name="ttp_resetmedicine_info" value=""/>
<Lang name="ttp_deletemedicine_info" value=""/>
<Lang name="ttp_refreshmedicine_info" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="medicine_info" Name="GBmedicine_info" id="medicine_info" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_info_Vs.xml" text="Search" toggle="1" Name="GBDEDITmedicine_info"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineno"><Ctrls>
<Label Align="Right" Text="medicineno" Name="lb_medicineno" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicineno" Name="medicineno" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenocn"><Ctrls>
<Label Align="Right" Text="medicinenocn" Name="lb_medicinenocn" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenocn" Name="medicinenocn" Size="170,20"/>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicinenopy"><Ctrls>
<Label Align="Right" Text="medicinenopy" Name="lb_medicinenopy" Size="60,20"/>
<TextBox Weight="170" Text="" ToolTip="ttp_medicinenopy" Name="medicinenopy" Size="170,20"/>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVmedicine_info" Size="100,20"><Ctrls>
<Button Text="reset" ToolTip="ttp_resetmedicine_info" Name="resetmedicine_info" Size="50,20">	<OnClick>	<submit next="GBDEDITmedicine_info" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchmedicine_info" Name="gsearchmedicine_info" Size="50,20">	<OnClick>	
<search next="medicine_info_vLst" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedicine_info" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm12 md12 lg12" Name="GBDVmedicine_info"><Ctrls>
<ListCtrl Heading="medicineno,250;medicinenocn,250;medicinenopy,250;packno,250;medicinecode,250;density,50;equivalent,55;price,90;warningval_jiliang,90;warningval_stock,25;warningval_cabinet,25;ispoison,60;isanesthetic,60;medicineid,55;opera,55;uptime,150;isdel,60;" loadedclick="0" ToolTip="ttp_medicine_info_v" Name="medicine_info_vLst" Size="700,450">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info m left join his.users u on m.opera=u.user_id</DbTable>
<Data>m.medicineno,m.medicinenocn,m.medicinenopy,m.packno,m.medicinecode,m.density,m.equivalent,m.price,m.warningval_jiliang,m.warningval_stock,m.warningval_cabinet,m.ispoison,m.isanesthetic,m.medicineid,u.user_name opera,m.uptime,m.isdel</Data>
<Order>medicineid</Order></DbDetails>
<DbDetails><queryFormat xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\biztools\mysqlcfg.xml" id="tbpages">select %{data} from %{dbtable} %{where} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>
<OnClick><if cond="%{medicine_info_vLst[medicineid]}"><DbDetails><Where>medicineid='%{medicine_info_vLst[medicineid]}'</Where></DbDetails><submit next="$parent.%{frmwndctrl}" namelist="DbDetails"/><submit function="onok"/></if></OnClick>
</ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
</WndTaps>
<var name="searchtmpl"><medicineid format="m.medicineid='%{opvalue}'"/><medicine2id format="m.medicine2id='%{opvalue}'"/><relation format="m.relation='%{opvalue}'"/><explains format="(m.explains like '%%{opvalue}%')"/><uptime format="(m.uptime between '%{uptime[datetime]}' and '%{uptime[datetime2]}')"/><opera format="m.opera='%{opvalue}'"/><controlid format="(m.controlid like '%%{opvalue}%')"/></var>
<Language xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\lan\medicine_control.xml" name="medicine_control">
<Lang name="medicine_control" value="中药规则"/>
<Lang name="medicine_control_v" value="中药规则"/>
<Lang name="TabEditmedicine_control" value="medicine_control Edit"/>
<Lang name="TabViewmedicine_control" value="medicine_control View"/>
<Lang name="medicineid" value="药编号1"/>
<Lang name="ttp_medicineid" value="药编号1"/>
<Lang name="medicine2id" value="要编号2"/>
<Lang name="ttp_medicine2id" value="要编号2"/>
<Lang name="relation" value="关系"/>
<Lang name="ttp_relation" value="关系"/>
<Lang name="explains" value="说明"/>
<Lang name="ttp_explains" value="说明"/>
<Lang name="uptime" value=""/>
<Lang name="ttp_uptime" value="时间"/>
<Lang name="opera" value=""/>
<Lang name="ttp_opera" value="操作者"/>
<Lang name="controlid" value=""/>
<Lang name="ttp_controlid" value=""/>
<Lang name="ttp_operationmedicine_control" value=""/>
<Lang name="ttp_createmedicine_control" value=""/>
<Lang name="ttp_modifymedicine_control" value=""/>
<Lang name="ttp_resetmedicine_control" value=""/>
<Lang name="ttp_deletemedicine_control" value=""/>
<Lang name="ttp_refreshmedicine_control" value=""/>
<Lang name="operation" value=""/>
<Lang name="create" value=""/>
<Lang name="modify" value=""/>
<Lang name="reset" value=""/>
<Lang name="delete" value=""/>
<Lang name="refresh" value=""/>
<Lang name="firstpage" value=""/>
<Lang name="prepage" value=""/>
<Lang name="nextpage" value=""/>
</Language>
<Ctrls><GroupBox Text="medicine_control" Name="GBmedicine_control" id="medicine_control" Size="100,100"><Ctrls>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_control_Vs.xml" text="Search" toggle="1" Name="GBDEDITmedicine_control"><Ctrls>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicineid"><Ctrls>
<Label Align="Right" Text="medicineid" Name="lb_medicineid" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_medicineid" Name="medicineid" Size="150,20">
	<DbDetails fcsm="true">
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineno,medicineid</Data>
<Where>!isdel</Where>
<queryFormat/></DbDetails></TextBox>
<MagicCtrl Name="pickmedicineid" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$this.medicine_info_pick.frmwndctrl" expr="medicineid"/><DbDetails><Where/></DbDetails><submit next="$this.medicine_info_pick.medicine_info_vLst" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_relation"><Ctrls>
<Label Align="Right" Text="relation" onload="init" Name="lb_relation" Size="60,20"/>
<ComboBox Weight="170" Text="" ToolTip="ttp_relation" onload="init" Name="relation" Size="170,100">
	<DbDetails>
<Index>relationid</Index>
<DbTable>his.medicine_control_type</DbTable>
<Data>relationtype,relationid</Data>
<Where/>
<queryFormat/></DbDetails></ComboBox>
</Ctrls></GroupBox>
<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_medicine2id"><Ctrls>
<Label Align="Right" Text="medicine2id" Name="lb_medicine2id" Size="60,20"/>
<TextBox Weight="150" Text="" ToolTip="ttp_medicine2id" Name="medicine2id" Size="150,20">
	<DbDetails>
<Index>medicineid</Index>
<DbTable>his.medicine_info</DbTable>
<Data>medicinenocn,medicineno,medicineid</Data>
<Where/>
<queryFormat/></DbDetails></TextBox>
<MagicCtrl Name="pickmedicine2id" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$this.medicine_info_pick.frmwndctrl" expr="medicine2id"/><DbDetails><Where/></DbDetails><submit next="$this.medicine_info_pick.medicine_info_vLst" namelist="DbDetails"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPVmedicine_control" Size="100,20"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.medicine_control.GBDEDITmedicine_control" function="reset"/><assign name="$this.medicine_control.frmwndctrl" expr="%{$this.medicine_control_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetmedicine_control" Name="resetmedicine_control" Size="50,20">	<OnClick>	<submit next="GBDEDITmedicine_control" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchmedicine_control" Name="gsearchmedicine_control" Size="50,20">	<OnClick>	
<search next="medicine_control_vLst" listed="0" prefixwhere="0" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedicine_control" namelist="search" function="search"/>	
<search next="records_medicine_control" listed="0" prefixwhere="1" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITmedicine_control" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_control_Vpg.xml" cols="xs12 sm6 md4" Multiline="0" Name="GBPGmedicine_control"><Ctrls>
<Label Align="Right" Text="Records" Name="lb_Records" Size="60,20"/>
<TextBox Weight="30" ToolTip="ttp_records" OnLoad="init" Name="records_medicine_control" readonly="1" Size="40,20">
	<DbDetails fcsm="1">
<Index>controlid</Index>
<DbTable>his.medicine_control m left join his.medicine_info m0 on m.medicineid=m0.medicineid left join his.medicine_control_type m1 on m.relation=m1.relationid left join his.medicine_info m2 on m.medicine2id=m2.medicineid left join his.users u on m.opera=u.user_id</DbTable>
<Data>count(*) records</Data>
<Order>controlid</Order><Queryformat>select %{data} from (select m.controlid from %{dbtable} %{where} GROUP BY m.controlid  ORDER BY m.controlid) t</Queryformat></DbDetails>
<OnEnchange>
<assign name="pgs_medicine_control" expr="js(Math.ceil(%{records_medicine_control}/%{medicine_control_vLst[countsperpage]}))"/>
<assign name="pgscb_medicine_control" function="setitems" expr="js('1~'+Math.ceil(%{records_medicine_control}/%{medicine_control_vLst[countsperpage]}))"/>
</OnEnchange>
</TextBox>

<TextBox Weight="30" ToolTip="ttp_pgs" Name="pgs_medicine_control" readonly="1" Size="30,20"/>
<TextBox Weight="30" ToolTip="ttp_pgcur" Name="pgcur_medicine_control" Size="30,20"/>
<Button Text="go2Page" Name="go2pagemedicine_control_vLst" Size="50,20"><OnClick><submit next="medicine_control_vLst" function="GetPage(%{pgcur_medicine_control}-1)"/></OnClick></Button>
</Ctrls></GroupBox>
<GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_control_Vpgop.xml" cols="xs12 sm6 md4" Name="GBOPVmedicine_control"><Ctrls>
<TAB/><Button Text="initial" ToolTip="ttp_initial" Name="initialmedicine_control" Size="50,20">
<OnClick><submit next="medicine_control_vLst" function="initial"/><submit next="records_medicine_control" function="initial"/></OnClick></Button>
<TAB/><Button Text="firstpage" Name="FPmedicine_control_vLst" Size="50,20">
<OnClick><submit next="medicine_control_vLst" function="GetPage(first)"/><submit next="records_medicine_control"/></OnClick></Button>
<Button Text="prepage" Name="PREmedicine_control_vLst" Size="50,20">
<OnClick><submit next="medicine_control_vLst" function="GetPage(Pre)"/></OnClick></Button>
<Button Text="nextpage" Name="NPmedicine_control_vLst" Size="50,20">
<OnClick><submit next="medicine_control_vLst" function="GetPage(Next)"/></OnClick></Button>
</Ctrls></GroupBox>
<BR AutoHeight="1"/><GroupBox xml:base="d:\Program Files (x86)\3UCS\3UCS Server\layout\ucin\his\medicine_control_Vv.xml" cols="xs12 sm12 md12 lg12" Name="GBDVmedicine_control"><Ctrls>
<ListCtrl Heading="medicineid,55;relation,120;medicine2id,55;explains,250;uptime,150;opera,55;controlid,55;" loadedclick="0" ToolTip="ttp_medicine_control_v" OnLoad="init" Name="medicine_control_vLst" Size="700,450">
	<DbDetails>
<Index>controlid</Index>
<DbTable>his.medicine_control m left join his.medicine_info m0 on m.medicineid=m0.medicineid left join his.medicine_control_type m1 on m.relation=m1.relationid left join his.medicine_info m2 on m.medicine2id=m2.medicineid left join his.users u on m.opera=u.user_id</DbTable>
<Data>m0.medicinenocn medicineid,m1.relationtype relation,m2.medicinenocn medicine2id,m.explains,m.uptime,u.user_name opera,m.controlid</Data>
<Order>controlid</Order></DbDetails>
<operator firstpage="0" nextpage="0" refresh="1" initial="0" prepage="0">
<op text="modify"><DbDetails><Where>controlid='%{medicine_control_vLst[controlid]}'</Where></DbDetails><submit next="$this.medicine_control.medicine_controlLst" namelist="DbDetails"/><assign name="$this.medicine_control.frmwndctrl" expr="%{this}"/></op>
<op text="delete" needconfirm="1"><DbDetails>
<DbTable>his.medicine_control</DbTable>
<Where>controlid='%{medicine_control_vLst[controlid]}'</Where>
<queryFormat>delete from %{table} where %{where}</queryFormat></DbDetails>
<submit namelist="DbDetails"/><submit/></op>
</operator>
<OnChanged>
<assign name="pgcur_medicine_control" expr="js(%{medicine_control_vLst[currentpage]}+1)"/>
<assign name="pgscb_medicine_control" function="SetSel" expr="js(%{medicine_control_vLst[currentpage]}+1)"/>
</OnChanged></ListCtrl>
</Ctrls></GroupBox>
</Ctrls></GroupBox>
</Ctrls></WndTap>
	</WndTaps>
</XI3uWnd>